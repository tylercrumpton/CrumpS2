(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{11257:function(t,e,n){"use strict";n.d(e,"a",(function(){return ye}));var o=n(4474),i=n(7619),r=n(0),s=n(181),a=n(2087),l=n(4597),d=n(539),c=n(192),p=n(1883),u=n(822),h=n(16),m=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;i.isDataFetching=!0,i.onDoubleClick=function(){i.onMoveToWidgetClick(i),u.a.embedActionsMenuUsed("widgets","double_click")},i.onMoveToWidgetClick=function(t){var e=l.a.getWidgets(t);0===e.length?i.notesModuleInstance.panelController.showNotesNotification(p.d,!0):h.a.mobileApp?i.closePanelAndJumpToWidgets(e):i.jumpToWidgets(e)},i.onRefreshClick=function(t,e){var n=i.notesModuleInstance.panelController,o=l.a.getWidgets(t);0===o.length?n.showNotesNotification(p.e,!0):(t.isFetching=!0,i.animateRefreshButton(t,e),l.a.createPreview(i.notesModuleInstance.collab.documentId,o,n.element.width()-100,n.element.height()/2).preview.then((function(e){var n={resource:e.id};i.notesModuleInstance.notesObjects.update(t.widgetsObject,n)})))},i.animateRefreshButton=function(t,e){e.classList.add("ql-embed-actions-menu__button--refresh-spin"),i.refreshAnimationIntervalId=setInterval((function(){t.isFetching||(e.classList.remove("ql-embed-actions-menu__button--refresh-spin"),clearInterval(i.refreshAnimationIntervalId))}),750)},i.onWidgetsObjectLoaded=function(t){i.widgetsRefId===t.id&&(i.showPlaceholder(),i.isDataFetching=!0,i.widgetsObject=t,i.notesModuleInstance.notesObjects.objectLoaded.remove(i.onWidgetsObjectLoaded,i),t.getData().resource&&i.onWidgetsObjectUpdated(i,t.getData()),t.dataChanged.add(i.onWidgetsObjectUpdated,i))},i.onWidgetsObjectUpdated=function(t,e){if(e.resource){i.isDataFetching=!0;var n=i.getImageUrl(e.resource),o=new Image;o.onload=function(){var t=i.shouldResetSize(i.contentNode,o);if(i.updateContentNodeSrc(n),t){var e=o.width,r=o.height;i.setBlotSize(e,r)}},o.src=n}},i.shouldResetSize=function(t,e){var n=t.getBoundingClientRect(),o=n.width/n.height,i=e.width/e.height;return o.toFixed(1)!==i.toFixed(1)},i.setMenuItems(),i.contentNode.onload=function(){i.contentImageOnLoad(),i.normalizeLocalImageSize(),i.isDataFetching=!1},i.widgetsRefId=o;var r=s.objectsRegistry.getGameObject(i.widgetsRefId);return r?r.getData().resource?(i.widgetsObject=r,i.updateContentNodeSrc(i.getImageUrl(r.getData().resource)),i.widgetsObject.dataChanged.add(i.onWidgetsObjectUpdated,i)):i.onWidgetsObjectLoaded(r):i.notesModuleInstance.notesObjects.objectLoaded.add(i.onWidgetsObjectLoaded,i),i.contentNode.addEventListener("dblclick",i.onDoubleClick.bind(i)),i}return Object(r.d)(e,t),e.prototype.setMenuItems=function(){this.blotMenuItems=[{actionName:"moveToWidget",handler:this.onMoveToWidgetClick,buttonCssClass:"ql-embed-actions-menu__button--move-to-widget"},{actionName:"refresh",handler:this.onRefreshClick,buttonCssClass:"ql-embed-actions-menu__button--refresh"}]},e.prototype.closePanelAndJumpToWidgets=function(t){var e=this;this.notesModuleInstance.panelController.closeAndWaitAnimation().then((function(){e.jumpToWidgets(t)}))},e.prototype.jumpToWidgets=function(t){d.a.setViewport(Object(c.g)(t)).calculateScreenOffset().jumpWithAnimation()},Object.defineProperty(e.prototype,"menuItems",{get:function(){return this.blotMenuItems},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFetching",{get:function(){return this.isDataFetching},set:function(t){this.isDataFetching=t},enumerable:!1,configurable:!0}),e.create=function(e){var n=t.create.call(this,e);return n.dataset.widgetsRefId=e,n},e.value=function(t){return t.dataset.widgetsRefId},e.blotName="widgetsRef",e.className="ql-custom-object",e.tagName="div",e}(a.b),g=n(386),f=n(187),b=n(222),v=n.n(b),x=n(747),y=n(411),w=n.n(y),C=n(618),k=n(1516),E=w.a.import("parchment"),S=w.a.import("delta"),M=w.a.import("blots/block"),I=w.a.import("blots/block/embed"),_="author",q="mainAuthor",O="author-",j=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.docAuthors=[],o.moduleInitialized=!1,o.userInfoBadgeVisibility=!1,o.onShowAuthorInfo=v()((function(t,e){o.processUserInfoBadge(t,e)}),500),o.compositionstart=!1,o.authorDeltaToApply=null,o.initAuthorshipChunk=function(t,e){setTimeout((function(){t.forEach((function(t){o.processLine(t)}))}),C.b*e)},h.a.msie||(n.editor.noteTextChanged.add(o.onTextChange,o),n.editor.noteSelectionChanged.add(o.onSelectionChange,o),o.quill.on("scroll-blot-mount",o.onBlotMount.bind(o)),o.mainAuthorAttrInstance=new E.Attributor(q,q,{scope:E.Scope.BLOCK}),o.authorAttrInstance=new E.ClassAttributor(_,_,{scope:E.Scope.INLINE_ATTRIBUTE}),w.a.register("attributors/class/author",o.authorAttrInstance,!0),w.a.register("formats/author",o.authorAttrInstance,!0),w.a.register("formats/mainAuthor",o.mainAuthorAttrInstance,!0),o.quill.clipboard.addMatcher(Node.ELEMENT_NODE,o.onPaste.bind(o)),o.currentUserId=Object(f.a)().userInfo.id,o.quill.container.getElementsByClassName("ql-editor")[0].addEventListener("scroll",o.hideUserInfoBadge.bind(o)),o.quill.root.addEventListener("mousemove",o.tryShowAuthorInfo.bind(o)),o.createUserInfoBadge(),o.addListeners()),o}return Object(r.d)(e,t),e.prototype.addListeners=function(){var t=this;this.quill.scroll.domNode.addEventListener("compositionstart",(function(){t.compositionstart=!0,t.authorDeltaToApply=null})),this.quill.scroll.domNode.addEventListener("compositionend",(function(){t.compositionstart=!1,t.authorDeltaToApply&&(t.quill.updateContents(t.authorDeltaToApply,w.a.sources.SILENT),t.authorDeltaToApply=null)}))},e.prototype.onBlotMount=function(t){if(t instanceof M||t instanceof I){var e=document.createElement("span");e.classList.add("ql-authorship-block-extension"),t.attachUIElement(e,"authorship")}},e.prototype.createUserInfoBadge=function(){var t=document.createElement("div");t.classList.add("ql-user-info-badge");var e=document.createElement("img");e.classList.add("ql-user-info-badge-photo");var n=document.createElement("div");n.classList.add("ql-user-info-badge-info");var o=document.createElement("div");o.classList.add("ql-user-info-badge-name");var i=document.createElement("div");i.classList.add("ql-user-info-badge-email"),this.userInfoBadge={badgeElement:t,photoElement:e,nameElement:o,emailElement:i,userId:null},this.quill.root.parentNode.appendChild(this.userInfoBadge.badgeElement),n.appendChild(o),n.appendChild(i),t.appendChild(e),t.appendChild(n)},e.prototype.processUserInfoBadge=function(t,e){var n=this;this.userInfoBadge.userId!=e?(this.userInfoBadge.photoElement.src="",Object(g.c)(e,"id,name,email,picture{size44}").then((function(o){n.userInfoBadge.photoElement.src=o.picture.size44,n.userInfoBadge.nameElement.innerText=o.name||"",n.userInfoBadge.emailElement.innerText=o.email||"",n.userInfoBadge.userId=e,n.showUserInfoBadge(t)}))):this.showUserInfoBadge(t)},e.prototype.showUserInfoBadge=function(t){var e=t.getBoundingClientRect(),n=this.quill.container.getBoundingClientRect();this.userInfoBadge.badgeElement.style.top=e.bottom+4-n.top+"px",this.userInfoBadge.badgeElement.style.left=e.left-n.left+"px",this.userInfoBadge.badgeElement.classList.add("ql-user-info-badge-visible"),this.userInfoBadgeVisibility=!0},e.prototype.hideUserInfoBadge=function(){this.userInfoBadgeVisibility&&(this.userInfoBadge.badgeElement.classList.remove("ql-user-info-badge-visible"),this.userInfoBadgeVisibility=!1)},e.prototype.tryShowAuthorInfo=function(t){var e=document.elementFromPoint(t.clientX,t.clientY);if(this.enabled&&e.className&&e.className.split){var n=e.className.split(" "),o="";if(n.forEach((function(t){-1!=t.indexOf(O)&&(o=t.substring(O.length))})),o&&e.parentElement){var i=e.parentElement.getAttribute(q);o!=i?this.onShowAuthorInfo(e,o):(this.hideUserInfoBadge(),this.onShowAuthorInfo.cancel())}else this.hideUserInfoBadge(),this.onShowAuthorInfo.cancel()}},e.prototype.initAuthorship=function(){var t=this;h.a.msie||(this.docAuthors=[],this.moduleInitialized=!0,this.quill.getLines(0,this.quill.getLength()).reduce((function(t,e,n){return n%C.a===0?Object(r.j)(t,[[e]]):Object(r.j)(t.slice(0,t.length-1),[Object(r.j)(t[t.length-1],[e])])}),[]).forEach((function(e,n){t.initAuthorshipChunk(e,n)})))},e.prototype.enableAuthorship=function(){this.enabled=!0,this.quill.root.classList.remove("ql-authorship-disabled"),this.hideUserInfoBadge()},e.prototype.disableAuthorship=function(){this.enabled=!1,this.quill.root.classList.add("ql-authorship-disabled"),this.hideUserInfoBadge()},e.prototype.processLine=function(t){var e=this;if(t){var n=[];if(t instanceof I){var o=t.domNode.dataset.author,i=this.processAuthor(o);i.textLength=1,i.nodes=[],n.push(i)}else t.domNode.childNodes.forEach((function(t){if(t instanceof HTMLElement){var o,i=!0;if(t instanceof HTMLDivElement?(o=t.dataset.author,i=!1):o=e.authorAttrInstance.value(t),o){var r=n.findIndex((function(t){return t.userId==o}));if(-1!==r)n[r].textLength+=t.innerText.length||1,i&&n[r].nodes.push(t);else{var s=e.processAuthor(o);s.textLength=t.innerText.length||1,i&&s.nodes.push(t),n.push(s)}}}}));var r=this.computeMainAuthorForLine(n),s=t.domNode.getBoundingClientRect(),a={blot:t,authors:n,bounds:s,mainAuthor:r};this.highlightAuthors(a),this.showMainAuthor(a)}},e.prototype.findNextBlotWithMainAuthor=function(t,e){for(var n,o=!1;t&&!o;)(t="LI"!==t.domNode.tagName||t[e]?t[e]:t.parent[e])&&t.attributes&&("OL"!==(n=t).domNode.tagName&&"UL"!==n.domNode.tagName||(n="next"==e?n.children.head:n.children.tail),t=n,!x.a.isEmptyLine(t)&&(t.attributes.attributes.mainAuthor||t instanceof I)&&(o=!0));return t},e.prototype.showMainAuthor=function(t){var e=this.quill.getIndex(t.blot);if(t.mainAuthor){(e||0==e)&&this.quill.formatLine(e,1,q,t.mainAuthor.userId,w.a.sources.SILENT);var n=this.findNextBlotWithMainAuthor(t.blot,"prev");if(n){x.a.isEmptyLine(n)&&this.cleanMainAuthorName(n);var o=n.formats();!x.a.isEmptyLine(t.blot)&&o.mainAuthor&&o.mainAuthor!=t.mainAuthor.userId?this.drawMainAuthorName(t.blot,t.mainAuthor):this.cleanMainAuthorName(t.blot)}else this.drawMainAuthorName(t.blot,t.mainAuthor);var i=this.findNextBlotWithMainAuthor(t.blot,"next");if(i){if(x.a.isEmptyLine(i))return void this.cleanMainAuthorName(i);(o=i.formats()).mainAuthor&&(o.mainAuthor!=t.mainAuthor.userId?this.drawMainAuthorName(i,this.processAuthor(o.mainAuthor)):this.cleanMainAuthorName(i))}}else(e||0==e)&&this.quill.formatLine(e,1,q,"",w.a.sources.SILENT),this.cleanMainAuthorName(t.blot)},e.prototype.drawMainAuthorName=function(t,e){if(t.getExtensionElement){var n=t.getExtensionElement("authorship");if(n){var o=n.node;if(o&&o.childNodes[0]&&o.childNodes[0].classList.contains(O+e.userId))return;var i=window.getComputedStyle(o).getPropertyValue("line-height"),r=document.createElement("div");r.classList.add("ql-author-caption"),h.a.isTouchSupportedAndNotDesktop&&r.classList.add("ql-author-caption--touch-device"),r.classList.add(O+e.userId),r.style.color=e.color,r.style.lineHeight=i||"24px",o.innerHTML="",o.appendChild(r),this.createMainAuthorCaption(n.node,e)}}},e.prototype.createMainAuthorCaption=function(t,e){var n=this,o=window.getComputedStyle(t).getPropertyValue("line-height"),i=document.createElement("div");i.classList.add("ql-author-caption"),h.a.isTouchSupportedAndNotDesktop&&i.classList.add("ql-author-caption--touch-device"),i.classList.add(O+e.userId),i.style.color=e.color,i.style.lineHeight=o||"24px",i.style.height=o||"24px",t.innerHTML="",t.appendChild(i),e.userId&&Object(g.c)(e.userId,"id,name,email,picture{size44}").then((function(t){i.innerText=n.getInitialsFromName(t.name)}))},e.prototype.cleanMainAuthorName=function(t){if(t&&t.getExtensionElement){var e=t.getExtensionElement("authorship");e&&(e.node.innerHTML="")}},e.prototype.computeMainAuthorForLine=function(t){var e,n=0;return t.forEach((function(t){t.textLength>n&&(n=t.textLength,e=t)})),e||(e=t[0]),e},e.prototype.highlightAuthors=function(t){t.authors.forEach((function(e){var n="none";e.userId!=t.mainAuthor.userId&&(n="1px solid "+e.color),e.nodes.forEach((function(t){t.style.borderBottom=n}))}))},e.prototype.getInitialsFromName=function(t){var e="";return t.split(" ").forEach((function(t){e+=t.substr(0,1).toUpperCase()})),e.substr(0,2)},e.prototype.processAuthor=function(t){var e=this.docAuthors.findIndex((function(e){return e.userId==t}));-1!==e&&this.docAuthors.splice(e,1);var n={userId:t,color:x.a.getColorForUser(t),textLength:0,nodes:[]};return this.docAuthors.push(n),n},e.prototype.onSelectionChange=function(t){if(t){var e=this.quill.getLine(t.index)[0];x.a.isEmptyLine(e)&&this.quill.format(_,this.currentUserId,w.a.sources.SILENT)}},e.prototype.onTextChange=function(t,e,n){var o=this;if(this.moduleInitialized&&t.ops&&!x.a.isFormattingDelta(t)&&(n==w.a.sources.USER||n==w.a.sources.API)){var i=x.a.getAffectedLinesFromDelta(this.quill,t);if(n==w.a.sources.USER){var r=new S,s={author:this.currentUserId};t.ops.forEach((function(t){if(!t.delete)if(t.insert){if("\n"==t.insert)return void r.retain(t.insert.length);r.retain(t.insert.length||1,s)}else t.retain&&r.retain(t.retain)})),this.authorDeltaToApply=r,this.compositionstart||this.quill.updateContents(r,w.a.sources.SILENT)}i.forEach((function(t){o.processLine(t)}))}},e.prototype.onPaste=function(t,e){var n={};n.author=this.currentUserId;var o=(new S).retain(e.length(),n);return e.compose(o)},e}(k.a),T=n(12),A=n(276),L=w.a.import("delta"),D=function(t){function e(e,n){var o=t.call(this,e,n)||this;return n.editor.noteTextChanged.add(o.onTextChange,o),o.quill.clipboard.addMatcher(Node.TEXT_NODE,o.onPaste.bind(o)),o}return Object(r.d)(e,t),e.prototype.onTextChange=function(t){if(t&&t.ops&&2===t.ops.length&&t.ops[0].retain&&Object(A.g)(t.ops[1].insert)){var e=t.ops[0].retain,n=this.quill.getText().substring(Math.max(0,e-64),e).match(T.l);if(null!==n){var o=n[0],i=[];e>o.length&&i.push({retain:e-o.length}),i=i.concat([{delete:o.length},{insert:o,attributes:{link:o}}]),this.quill.updateContents(new L({ops:i}),w.a.sources.USER)}}},e.prototype.onPaste=function(t,e){var n=this;if("string"===typeof t.data){var o=Object(T.b)(t.data);if(o&&o.length>0){var i=[],r=t.data;o.forEach((function(t){var e=r.split(t),o=e.shift();i.push({insert:o}),n.options.insertImages&&null!=t.match(C.r)?(i.push({insert:"\n"}),i.push({insert:{image:t}})):i.push({insert:t,attributes:{link:t}}),r=e.join(t)})),i.push({insert:r}),e.ops=i}return e}},e}(k.a),N=n(563),z=w.a.import("blots/embed"),P=N.b(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.create=function(n){var o,i,r=t.create.call(this);if(n.name&&n.id)o=n.id,i=n.name;else{o=n;var s=P().getMentionById(n);i=s?s.name:n}return r.innerHTML+="@"+Object(A.e)(i),e.setDataValues(r,o)},e.setDataValues=function(t,e){var n=t;return n.dataset.user=e,n},e.value=function(t){return t.dataset.user},e}(z),B=R;R.blotName="mention",R.tagName="span",R.className="ql-mention";var U=n(4476),H=n(4477),W=function(){function t(t){this.onMouseDownWrapper=this.onMouseDown.bind(this),this.onMouseMoveWrapper=this.onMouseMove.bind(this),this.onMouseUpWrapper=this.onMouseUp.bind(this),this.embedProcessor=t,this.editorInstance=t.editorInstance,document.execCommand("enableObjectResizing",!1,"false")}return t.prototype.onSelect=function(t,e){this.blot=t,this.createResizeBox(e)},t.prototype.onUnselect=function(){this.removeResizeBox()},t.prototype.createResizeBox=function(t){var e=document.createElement("div");e.classList.add("ql-embed-resize-square"),this.resizeBox=document.createElement("div"),this.resizeBox.classList.add("ql-embed-resize-box"),this.resizeBox.appendChild(e),h.a.isTouchSupportedAndNotDesktop&&this.resizeBox.classList.add("ql-embed-resize-box--touch-device"),this.resizeBox.addEventListener("mousedown",this.onMouseDownWrapper),this.resizeBox.addEventListener("touchstart",this.onMouseDownWrapper),t.appendChild(this.resizeBox)},t.prototype.removeResizeBox=function(){this.resizeBox&&(this.resizeBox.removeEventListener("mousedown",this.onMouseDownWrapper),this.resizeBox.removeEventListener("touchstart",this.onMouseDownWrapper),document.removeEventListener("mousemove",this.onMouseMoveWrapper),document.removeEventListener("touchmove",this.onMouseMoveWrapper),document.removeEventListener("mouseup",this.onMouseUpWrapper),document.removeEventListener("touchend",this.onMouseUpWrapper),this.resizeBox.parentNode.removeChild(this.resizeBox),this.resizeBox=void 0)},t.prototype.onMouseDown=function(t){t.preventDefault();var e=getComputedStyle(this.blot.getContentNode()),n=e.width,o=e.height;this.dragStartX=Object(H.a)(t).clientX,this.preDragWidth=parseInt(n,10),this.preDragHeight=parseInt(o,10),document.addEventListener("mousemove",this.onMouseMoveWrapper),document.addEventListener("touchmove",this.onMouseMoveWrapper),document.addEventListener("mouseup",this.onMouseUpWrapper),document.addEventListener("touchend",this.onMouseUpWrapper)},t.prototype.onMouseMove=function(t){if(this.blot){var e=this.embedProcessor.noteEditor.getMaxWidthEditorContent(),n=Object(H.a)(t).clientX-this.dragStartX;this.newDragWidth=Math.min(Math.max(Math.round(this.preDragWidth+n),C.g),e),this.newDragHeight=Math.round(this.preDragHeight*this.newDragWidth/this.preDragWidth),this.blot.format("width",this.newDragWidth),this.blot.format("height",this.newDragHeight),this.embedProcessor.setOverlayPosition()}},t.prototype.onMouseUp=function(){if(document.removeEventListener("mousemove",this.onMouseMoveWrapper),document.removeEventListener("touchmove",this.onMouseMoveWrapper),document.removeEventListener("mouseup",this.onMouseUpWrapper),document.removeEventListener("touchend",this.onMouseUpWrapper),this.newDragWidth&&this.newDragHeight){var t=this.editorInstance.getIndex(this.blot),e=this.editorInstance.getLine(t)[1];u.a.noteFormatted({content_type:this.blot instanceof m?"widgets":"image",action_type:"resized",previous_value:this.preDragWidth+"x"+this.preDragHeight,new_value:this.newDragWidth+"x"+this.newDragHeight,text_symbols:1,count_objects:1,lines_formatted:1,index:t,line_number:e,widget_id:this.blot.widgetsRefId,source:"resizer"}),this.newDragWidth=void 0,this.newDragHeight=void 0}},t}(),F=function(t,e){void 0===e&&(e=!0);var n=w.a.find(t.scroll.domNode.parentNode),o=w.a.sources.USER;e||(o=w.a.sources.API);var i=t.offset(t.scroll);n.setSelection(i+1,o),n.focus(),n.deleteText(i,t.length(),o)},$=function(t,e,n,o,i,r){void 0===i&&(i=w.a.sources.USER),void 0===r&&(r=!0),1!==t.getLine(e)[0].length()&&t.insertText(e,"\n",i),t.removeFormat(e,0,i),t.insertEmbed(e,n,o,i),r&&(t.focus(),t.setSelection(e+1,i))},V=n(199),Z=n(43),G=n(359),Y=n(345),K=n(746),Q=function(){function t(t){var e=this;this.keydownWrapper=this.onKeydown.bind(this),this.buttons=[],this.handleButtonClick=function(t){e.buttons.forEach((function(n){n.element==t.target&&(n.handler(e.blot,n.element),u.a.embedActionsMenuUsed(e.blot instanceof m?"widgets":"image",n.actionName))}))},this.onClickDelete=function(){var t=e.blot.offset(e.blot.scroll);F(e.blot),e.embedProcessor.hide(),e.embedProcessor.editorInstance.setSelection(t)},this.embedProcessor=t}return t.prototype.onSelect=function(t,e){this.blot=t,this.showActionsMenu(e),document.addEventListener("keydown",this.keydownWrapper)},t.prototype.onUnselect=function(){this.hideActionsMenu(),document.removeEventListener("keydown",this.keydownWrapper)},t.prototype.onSetOverlayPosition=function(){this.setLeftOffset()},t.prototype.onKeydown=function(t){if(Object(G.a)().getFocus()==Y.a.NOTES){var e=t.keyCode;e!=V.a.DELETE&&e!=V.a.BACKSPACE||Object(Z.p)()||(t.stopPropagation(),t.preventDefault(),this.onClickDelete())}},t.prototype.createButton=function(t,e,n){var o=document.createElement("button");o.classList.add("ql-embed-actions-menu__button"),e&&o.classList.add(e);var i=new K.a(o,this.handleButtonClick);return this.actionsMenu.appendChild(o),{element:o,handler:t,tapProcessor:i,actionName:n}},t.prototype.showActionsMenu=function(t){var e=this;this.buttons=[],this.actionsMenu=document.createElement("div"),this.actionsMenu.classList.add("ql-embed-actions-menu"),this.blot.menuItems&&this.blot.menuItems.length&&this.blot.menuItems.forEach((function(t){e.buttons.push(e.createButton(t.handler,t.buttonCssClass,t.actionName))})),this.embedProcessor.noteEditor.commonEmbedActions.forEach((function(t){e.buttons.push(e.createButton(t.handler,t.buttonCssClass,t.actionName))})),this.buttons.push(this.createButton(this.onClickDelete,"ql-embed-actions-menu__button--delete","delete")),t.appendChild(this.actionsMenu),this.setLeftOffset()},t.prototype.setLeftOffset=function(){if(this.actionsMenu){var t=this.actionsMenu.offsetWidth,e=this.embedProcessor.overlayWidth,n=Math.max((e+2-t)/2,-1);this.actionsMenu.style.left=n+"px"}},t.prototype.hideActionsMenu=function(){this.actionsMenu&&(this.buttons.forEach((function(t){t.tapProcessor.destroy()})),this.actionsMenu.parentNode&&this.actionsMenu.parentNode.removeChild(this.actionsMenu),this.buttons=[])},t}(),J=n(239),X=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",tt=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.blot=void 0,o.modules=[],o.keydownWrapper=o.onKeydown.bind(o),o.setOverlayPosition=function(){if(o.overlay){if(!o.blot||!o.blot.domNode)return void o.hide();var t=o.blot.getContentNode().getBoundingClientRect(),e=o.quill.root.getBoundingClientRect();o.overlay.style.top=t.top-e.top-1+"px",o.overlay.style.left=t.left-e.left-1+"px",o.overlay.style.width=t.width+2+"px",o.overlay.style.height=t.height+2+"px"}o.modules.forEach((function(t){return t.onSetOverlayPosition&&t.onSetOverlayPosition()}))},o.editor=n.editor,o.supportedBlots=n.supportedBlots,o.__quillTapListener=new K.a(o.quill.root,o.handleTap.bind(o)),o.editor.noteTextChanged.add(o.onTextChange,o),Object(J.a)().rightSidebar.resized.add(o.onEditorResize,o),h.a.msie&&document.body.addEventListener("mscontrolselect",(function(t){t.preventDefault()})),o.initModules(),o}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"editorInstance",{get:function(){return this.quill},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteEditor",{get:function(){return this.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlayWidth",{get:function(){return this.overlay?this.overlay.offsetWidth:0},enumerable:!1,configurable:!0}),e.prototype.onEditorResize=function(){this.setOverlayPosition()},e.prototype.onTextChange=function(){this.setOverlayPosition()},e.prototype.initModules=function(){this.modules.push(new W(this),new Q(this))},e.prototype.handleTap=function(t){if(t.target&&t.target instanceof Element&&"edit"==this.editor.editorMode){var e=this.quill.scroll.query(t.target).blotName,n=x.a.findBlot(t.target);if(n&&n.getContentNode&&n.getContentNode()!==t.target)return void(this.overlay&&this.hide());if(-1==this.supportedBlots.indexOf(e)||n.isDataFetching)this.blot&&this.hide();else{if(this.blot===n)return void this.quill.setSelection(null);this.blot&&this.hide(),this.show(n)}}},e.prototype.show=function(t){var e=this;this.blot=t,this.quill.setSelection(null),this.createOverlay(),this.modules.forEach((function(t){t.onSelect(e.blot,e.overlay)})),this.noteEditor.addToHiddableElements({el:this.overlay,callback:this.setOverlayPosition}),document.addEventListener("keydown",this.keydownWrapper)},e.prototype.hide=function(){this.blot=void 0,this.modules.forEach((function(t){t.onUnselect()})),this.noteEditor.removeFromHiddableElements(this.overlay),document.removeEventListener("keydown",this.keydownWrapper),this.removeOverlay()},e.prototype.createOverlay=function(){this.overlay&&this.removeOverlay(),this.overlay=document.createElement("div"),this.overlay.classList.add("ql-embed-selected"),this.setOverlayPosition(),this.quill.root.parentNode.appendChild(this.overlay)},e.prototype.removeOverlay=function(){this.overlay&&(this.quill.root.parentNode.removeChild(this.overlay),this.overlay=void 0)},e.prototype.onKeydown=function(t){Object(G.a)().getFocus()==Y.a.NOTES&&(t.which==V.a.PAGE_UP||t.which==V.a.PAGE_DOWN||t.which==V.a.UP_ARROW||t.which==V.a.DOWN_ARROW||t.ctrlKey&&t.which==V.a.HOME||t.ctrlKey&&t.which==V.a.END?this.editor.scrollProcessor.onKeyDown(t):t.which==V.a.Z&&t[X]&&(t.shiftKey?this.editor.editor.history.redo():this.editor.editor.history.undo()))},e}(k.a),et=n(7621),nt=n(4475),ot=n(1023),it=n(547),rt=n(1908),st=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;if(i.onResObjLoaded=function(t){i.resourceObjectId===t.id&&(i.showPlaceholder(),i.notesModuleInstance.notesObjects.objectLoaded.remove(i.onResObjLoaded,i),t.getData().resource&&i.updateContentNodeSrc(i.getImageUrl(t.getData().resource)),t.dataChanged.add(i.onResourceObjectUpdated,i))},i.onResourceObjectUpdated=function(t,e){if(e.resource){var n=i.getImageUrl(e.resource),o=new Image;o.onload=function(){i.updateContentNodeSrc(n)},o.src=n}},i.onSuccessUploading=function(t){t.generated?(i.updateResourceAfterGeneration(i.getResourceObjectById(i.domNode.dataset.resourceId),t),i.updateContentNodeSrc(i.getImageUrl(t.id))):i.onUploadError()},i.onErrorUploading=function(){i.onUploadError()},i.contentNode.onload=function(){i.contentImageOnLoad(),i.normalizeLocalImageSize()},"string"===typeof o)if(-1!=o.indexOf(";base64,")){i.setInitImage(o),i.createResourceObj();var r=i.notesModuleInstance.collab.documentId,s=Object(ot.a)(o);nt.a.uploadBlob(r,s).then(i.onSuccessUploading,i.onErrorUploading)}else if(Object(T.i)(o)){i.setInitImage(o),i.createResourceObj();r=i.notesModuleInstance.collab.documentId;nt.a.uploadUrl(r,o).then(i.onSuccessUploading,i.onErrorUploading)}else{i.resourceObjectId=o,n.dataset.resourceId=o;var a=i.getResourceObjectById(o);a?a.getData().resource?i.updateContentNodeSrc(i.getImageUrl(a.getData().resource)):i.onResObjLoaded(a):i.notesModuleInstance.notesObjects.objectLoaded.add(i.onResObjLoaded,i)}else if(o instanceof Blob){i.setInitImage(URL.createObjectURL(o)),i.createResourceObj();r=i.notesModuleInstance.collab.documentId;nt.a.uploadBlob(r,o).then(i.onSuccessUploading,i.onErrorUploading)}return i}return Object(r.d)(e,t),e.prototype.createResourceObj=function(){var t=this.notesModuleInstance.notesObjects.create({resource:null},"images");return this.domNode.dataset.resourceId=t.id,t},e.prototype.getResourceObjectById=function(t){return s.objectsRegistry.getGameObject(t)},e.prototype.updateResourceAfterGeneration=function(t,e){t&&e&&this.notesModuleInstance.notesObjects.update(t,{resource:e.id})},e.prototype.setInitImage=function(t){var e=this;this.showPlaceholder();var n=new Image;n.onload=function(){var t=n.width,o=n.height;e.setBlotSize(t,o),e.hidePlaceholder()},n.src=t,this.updateContentNodeSrc(t)},e.prototype.onUploadError=function(){var t=Object(rt.a)("resourceGeneration");it.a.instance.panelController.showNotesNotification(t,!0),F(this)},e.value=function(t){return t.dataset.resourceId},e.blotName="image",e.className="ql-image",e.tagName="div",e}(a.b),at=n(244),lt=n(889),dt=n(235),ct={"ql-header":{1:Object(dt.k)("%@%\xa0%altOrOpt%\xa01"),2:Object(dt.k)("%@%\xa0%altOrOpt%\xa02")},"ql-list":{check:"[\xa0]\xa0Space",bullet:"-\xa0Space",ordered:"1.\xa0Space"},"ql-bold":"%@%\xa0B","ql-italic":"%@%\xa0I","ql-underline":"%@%\xa0U","ql-strike":Object(dt.k)("%@%\xa0%altOrOpt%\xa0S"),"ql-link":"%@%\xa0K","ql-comment":Object(dt.k)("%@%\xa0%altOrOpt%\xa0C")},pt=function(t,e){var n=Object.keys(ct).find((function(e){return t.contains(e)}));if(!n)return null;var o=ct[n];return"string"===typeof o?o:e&&o instanceof Object&&o[e]?o[e]:null},ut=n(2935),ht=n(1095),mt=n(4478),gt=n(1895),ft=n(27),bt=w.a.import("ui/icons"),vt=n(7625),xt=n(7626),yt=n(7627),wt=function(t){function e(e,n,o,i){void 0===i&&(i=e.container);var r=t.call(this,e,n,o,i)||this;return"newLine"==o?(r.addBindings(),r.pickerElement.classList.add("ql-newline-format-picker")):r.pickerElement.classList.add("ql-inline-format-picker"),r.widgetPicker=new gt.a,r}return Object(r.d)(e,t),e.prototype.setExternalButton=function(t){this.externalButton&&(t.innerHTML=this.externalButton.innerHTML),this.externalButton=t,this.container=t},e.prototype.addControls=function(){var t=this;this.getToolbarConfig().forEach((function(e){var n=document.createElement("div");n.classList.add("ql-format-picker__group"),e.forEach((function(e){t.addButton(n,e)})),n.childNodes.length&&t.pickerElement.appendChild(n)})),this.pickerBounds=this.pickerElement.getBoundingClientRect()},e.prototype.addButton=function(t,e){var n=this;if(!("newLine"==this.type&&"inline"==e.showType||"inline"==this.type&&"newLine"==e.showType)){var o=document.createElement("div");o.classList.add(mt.a+"-"+this.type.toLowerCase()+"-"+e.selector),o.classList.add("ql-format-picker-button"),o.classList.add("ql-format-picker-button-picker");var i=document.createElement("div");i.classList.add("ql-format-picker-button_icon"),i.innerHTML=e.icon,o.appendChild(i);var r=document.createElement("div");r.classList.add("ql-format-picker-button_text"),r.innerText=e.name,o.appendChild(r),this.buttons.push({el:o,def:e}),t.appendChild(o),this.tapListeners.push(new K.a(o,(function(t){n.onButtonClick(e,o,t)})))}},e.prototype.getToolbarConfig=function(){return[[{name:"Text",icon:Object(ut.a)(vt),callback:this.dropFormat.bind(this),showType:"inline",selector:"text"},{name:"Heading 1",icon:bt.header[1],format:"header",value:"1",showType:"both",selector:"header-1"},{name:"Heading 2",icon:bt.header[2],format:"header",value:"2",showType:"both",selector:"header-2"},{name:"Heading 3",icon:Object(ut.a)(xt),format:"header",value:"3",showType:"both",selector:"header-3"}],[{name:"Checklist",icon:bt.list.check,format:"list",value:"check",showType:"both",selector:"checklist"},{name:"Bulleted list",icon:bt.list.bullet,format:"list",value:"bullet",showType:"both",selector:"bulleted-list"},{name:"Numbered list",icon:bt.list.ordered,format:"list",value:"ordered",showType:"both",selector:"numbered-list"}],[{name:"Image",icon:bt.image,showType:"newLine",callback:this.onImageClick.bind(this),selector:"image"},{name:"Board object",icon:Object(ut.a)(yt),showType:"newLine",callback:this.onWidgetFromCanvasClick.bind(this),selector:"board-object"}]]},e.prototype.addBindings=function(){var t=this,e={up:{key:h.a.msie?"Up":"ArrowUp",handler:function(){return!t.isVisible||(t.highlightItem("left"),!1)}},down:{key:h.a.msie?"Down":"ArrowDown",handler:function(){return!t.isVisible||(t.highlightItem("right"),!1)}},"embed right":{key:"ArrowRight",handler:function(e){return!e.length||(t.quill.setSelection(e.index+e.length),!1)}},enter:{key:V.a.ENTER,handler:function(){return!t.isVisible||-1==t.selectedItemIndex||(t.selectItem(),!1)}}};Object.keys(e).forEach((function(n){t.quill.keyboard.addBinding(e[n])})),this.quill.keyboard.bindings[V.a.ENTER].unshift(this.quill.keyboard.bindings[V.a.ENTER].pop()),this.quill.keyboard.bindings.ArrowRight.unshift(this.quill.keyboard.bindings.ArrowRight.pop())},e.prototype.highlightItem=function(t){var e=this.buttons.length,n=this.selectedItemIndex;-1===n?n="right"===t?0:e-1:"right"===t?++n===e&&(n=-1):--n<0&&(n=-1),this.selectedItemIndex=n,this.markButtons()},e.prototype.markButtons=function(){this.buttons.forEach((function(t){t.el.classList.remove("ql-format-picker-button-selected")})),-1!=this.selectedItemIndex&&this.buttons[this.selectedItemIndex].el.classList.add("ql-format-picker-button-selected")},e.prototype.selectItem=function(){-1!=this.selectedItemIndex&&this.selectedItemIndex<this.buttons.length&&this.onButtonClick(this.buttons[this.selectedItemIndex].def,this.buttons[this.selectedItemIndex].el)},e.prototype.dropFormat=function(){var t=this.quill.getSelection();if(t){var e=this.quill.getFormat(t),n=x.a.dropFormats(e,{},C.e);Object.keys(n).length>0&&this.quill.formatLine(t.index,t.length,n,w.a.sources.USER),this.close()}},e.prototype.close=function(){t.prototype.close.call(this),this.markButtons()},e.prototype.onImageClick=function(){var t=this;Object(ht.a)("image/*",void 0,ft.j).then((function(e){var n=t.quill.getSelection().index;$(t.quill,n,"image",e,w.a.sources.USER),u.a.noteFormatPickerUsed("FormatPickerUpload")}))},e.prototype.onWidgetFromCanvasClick=function(){var t=this,e=this.quill.getSelection().index;this.widgetPicker.select({modalText:"Choose an object on the board to embed its preview to the Note"}).then((function(n){Object(it.a)().then((function(o){var i=o.notesDragAndDrop.createObjects(n);$(t.quill,e,m.blotName,i.id,w.a.sources.USER);var r=t.quill.getLeaf(e)[0];r&&r.setBlotSize&&(r.setBlotSize(i.width,i.height),r.showPlaceholder()),u.a.noteFormatPickerUsed("FormatPickerFromBoard")}))})).catch((function(){}))},e}(mt.b),Ct=w.a.import("ui/icons"),kt=n(7628),Et=function(t){function e(e,n,o,i){void 0===o&&(o="all"),void 0===i&&(i=e.container);var r=t.call(this,e,n,o,i)||this;return r.updateExternalButton=!1,r}return Object(r.d)(e,t),e.prototype.setExternalButton=function(t){t.innerHTML=Object(ut.a)(kt),this.externalButton=t,this.container=t},e.prototype.addControls=function(){var t=this;this.pickerElement.classList.add("ql-format-picker-row"),this.pickerElement.classList.add("ql-format-picker-bui"),this.getToolbarConfig().forEach((function(e){var n=document.createElement("div");n.classList.add("ql-format-picker__group","ql-format-picker__group-bui"),e.forEach((function(e){t.addButton(n,e)})),n.childNodes.length&&t.pickerElement.appendChild(n)})),this.pickerBounds=this.pickerElement.getBoundingClientRect()},e.prototype.addButton=function(t,e){var n=this,o=document.createElement("div");o.classList.add(mt.a+"-"+e.selector),o.classList.add("ql-format-picker-button"),o.classList.add("ql-format-picker-button-bui"),o.classList.add("ql-"+e.format);var i=document.createElement("div");i.classList.add("ql-format-picker-button_icon"),i.innerHTML=e.icon,o.appendChild(i),this.buttons.push({el:o,def:e}),t.appendChild(o),h.a.msie?o.addEventListener("mousedown",(function(t){n.onButtonClick(e,o,t)})):this.tapListeners.push(new K.a(o,(function(t){n.onButtonClick(e,o,t)})))},e.prototype.getToolbarConfig=function(){return[[{name:"Bold",icon:Ct.bold,format:"bold",showType:"both",selector:"bold"},{name:"Italic",icon:Ct.italic,format:"italic",showType:"both",selector:"italic"},{name:"Underline",icon:Ct.underline,format:"underline",showType:"both",selector:"underline"},{name:"Strike",icon:Ct.strike,format:"strike",showType:"both",selector:"strike"}]]},e.prototype.position=function(){if(t.prototype.position.call(this),this.externalButton){var e=this.externalButton.getBoundingClientRect(),n=this.quill.container.getBoundingClientRect();this.pickerElement.style.left=e.left+e.width/2-this.pickerBounds.width/2-n.left+"px"}},e}(mt.b),St=w.a.import("modules/toolbar"),Mt=w.a.import("ui/snowtooltip"),It=function(t){function e(e,n){var o=n.editor,i=t.call(this,e,Object(r.a)(Object(r.a)({},St.DEFAULTS),{container:C.o[C.n.EDIT]}))||this;return i.toolbarTapProcessors=[],i.editor=o,o.quillInstanceCreated.add(i.onQuillInstanceCreated,i),o.editorModeChanged.add(i.updateToolbar,i),i.formatPicker=new wt(i.quill,i.editor,"inline"),i.formatPicker.afterFormat.add(i.afterFormatByPicker,i),i.buiPicker=new Et(i.quill,i.editor),i.buiPicker.afterFormat.add(i.afterFormatByPicker,i),i.initLinkEditor(i.quill.container),i.quill.on(w.a.events.EDITOR_CHANGE,(function(t,e){t===w.a.events.SELECTION_CHANGE&&(e&&e.length?(i.formatPicker.highlightCurrentFormat(e),i.buiPicker.highlightCurrentFormat(e)):(i.formatPicker.close(),i.buiPicker.close()))})),i.quill.on(w.a.events.SCROLL_OPTIMIZE,(function(){var t=i.quill.selection.getRange()[0];t&&t.length&&(i.formatPicker.highlightCurrentFormat(t),i.buiPicker.highlightCurrentFormat(t))})),i}return Object(r.d)(e,t),e.prototype.afterFormatByPicker=function(){var t=this.quill.selection.getRange()[0];this.toolbar.update(t)},e.prototype.toggleFormatPicker=function(){this.formatPicker.toggle(this.quill.theme.tooltip.root)},e.prototype.toggleBuiPicker=function(){this.buiPicker.toggle(this.quill.theme.tooltip.root)},e.prototype.onQuillInstanceCreated=function(t,e){this.toolbar=this.quill.getModule("toolbar"),this.updateToolbar(C.n.EDIT)},e.prototype.initLinkEditor=function(t){this.linkEditor=new Mt(this.quill,t),this.linkEditor.root.classList.add("ql-link-editor"),this.linkEditor.root.querySelector("a.ql-preview").classList.add(lt.a)},e.prototype.updateToolbar=function(t){this.toolbar.recreateToolbar(C.o[t]),this.toolbar.addHandler("link",this.toolbarLinkHandler.bind(this)),this.quill.theme.extendToolbar(this.toolbar),this.initToolbarStatisticsListeners(),this.addTooltips(),this.setPopupScrollable();var e=this.container.querySelector(".ql-formatpicker");e&&(this.toolbarTapProcessors.push(new K.a(e,this.toggleFormatPicker.bind(this))),this.formatPicker.setExternalButton(e));var n=this.container.querySelector(".ql-bui");n&&(this.toolbarTapProcessors.push(new K.a(n,this.toggleBuiPicker.bind(this))),this.buiPicker.setExternalButton(n))},e.prototype.addTooltips=function(){var t=Array.from(this.toolbar.container.querySelectorAll("button"));(t=t.concat(Array.from(this.buiPicker.pickerElement.querySelectorAll(".ql-format-picker-button-bui"))))&&t.forEach&&(t.forEach((function(t){var e;t instanceof HTMLButtonElement?e=pt(t.classList,t.value):t instanceof HTMLDivElement&&(e=pt(t.classList)),e&&(t.setAttribute("tooltip",e),t.setAttribute("tooltip-placement","bottom"),t.setAttribute("tooltip-append-to-body","true"))})),this.scope=Object(at.a)().$rootScope.$new(),Object(at.a)().$compile(this.toolbar.container)(this.scope),Object(at.a)().$compile(this.buiPicker.pickerElement)(this.scope))},e.prototype.setPopupScrollable=function(){var t=Array.from(this.toolbar.container.querySelectorAll(".ql-picker-options"));t&&t.forEach&&t.forEach((function(t){return t.setAttribute("no-prevent-default","true")}))},e.prototype.toolbarLinkHandler=function(t){t?this.quill.theme.tooltip.edit():(this.quill.theme.tooltip.hide(),this.linkEditor.show())},e.prototype.initToolbarStatisticsListeners=function(){var t=this;this.toolbarTapProcessors=[],this.toolbar.controls.forEach((function(e){var n=e[0],o=e[1];t.toolbarTapProcessors.push(new K.a(o,(function(){u.a.noteToolbarUsed(n)})))}))},e}(St),_t=n(7629),qt=n(7630),Ot=n(1942),jt=w.a.import("blots/block"),Tt=function(t){function e(e,n){var o=t.call(this,e,n)||this;return n.editor.noteTextChanged.add(o.onTextChange,o),o}return Object(r.d)(e,t),e.prototype.onTextChange=function(t,e,n){var o=this;n==w.a.sources.USER&&t.ops&&x.a.getAffectedLinesFromDelta(this.quill,t).forEach((function(t){o.processLine(t)}))},e.prototype.processLine=function(t){if(t instanceof jt){var e=this.getLineText(t)[0];if(!e)return;var n=t.formats().direction,o=Ot.a.getDirStr(Ot.a.getDir(e));o===n||!n&&"ltr"===o||(t.format("direction","rtl"===o?o:null),t.format("align","rtl"===o?"right":null),this.quill.update(w.a.sources.USER))}},e.prototype.getLineText=function(t){return t.delta().filter((function(t){return"string"===typeof t.insert})).map((function(t){return t.insert})).join("").trim()},e}(k.a),At=w.a.import("delta"),Lt=w.a.import("blots/block"),Dt=function(){function t(t){this.quill=t,this.addBindings(),this.quill.clipboard.addMatcher(Node.ELEMENT_NODE,this.onPaste.bind(this))}return t.prototype.onPaste=function(t,e,n){var o=n.query(t);if(null==o)return e;if(o.prototype instanceof a.b||"image"==o.blotName){var i={},r=o.value(t);null!=r&&(i[o.blotName]=r);var s=this.quill.getSelection(),l=this.quill.getFormat(s),d=this.getCleanEmbedFormats(o.formats(t,n),l);if(t.previousSibling||t.nextSibling)return(new At).insert(i,d);var c=this.quill.getLine(s.index),p=c[0],u=c[1],h=x.a.dropFormats(l);1===p.length()?e=(new At).insert(i,d):0===u?e=(new At).insert(i,d).insert("\n",h):u===p.length()-1?e=(new At).insert("\n",l).insert(i,d).retain(1,h):u>=0&&u<p.length()-1&&p instanceof Lt&&(e=(new At).insert("\n",l).insert(i,d).insert("\n",h))}return e},t.prototype.getCleanEmbedFormats=function(t,e){var n=Object.keys(t).reduce((function(e,n){return-1!=a.a.indexOf(n)&&(e[n]=t[n]),e}),{});return x.a.dropFormats(e,n,a.a)},t.prototype.addBindings=function(){var t=this;this.quill.keyboard.addBinding({key:V.a.DELETE,collapsed:!0,handler:function(e,n){var o=t.quill.getLine(e.index)[0];if(o&&n.offset>=o.length()-1){var i=t.quill.getLine(e.index+1)[0];if(i){if(x.a.isEmbedLine(i)&&o.length()>1)return t.quill.setSelection(e.index+1,w.a.sources.USER),!1;if(x.a.isEmbedLine(o)&&i.length()>1)return t.quill.setSelection(e.index+1,w.a.sources.USER),!1}}return!0}}),this.quill.keyboard.addBinding({key:V.a.BACKSPACE,collapsed:!0,handler:function(e,n){if(0===e.index||t.quill.getLength()<=1)return n.format.header&&0===e.index&&t.quill.getLength()<=1&&t.quill.format("header",null,w.a.sources.USER),!0;var o=t.quill.getLine(e.index)[0];if(o&&0===n.offset){var i=t.quill.getLine(e.index-1)[0];if(i){if(x.a.isEmbedLine(i)&&o.length()>1)return t.quill.setSelection(e.index-1,0,w.a.sources.USER),!1;if(x.a.isEmbedLine(o)&&i.length()>1)return t.quill.setSelection(e.index-1,0,w.a.sources.USER),!1}}return!0}}),this.quill.keyboard.bindings[V.a.BACKSPACE].unshift(this.quill.keyboard.bindings[V.a.BACKSPACE].pop()),this.quill.keyboard.bindings[V.a.DELETE].unshift(this.quill.keyboard.bindings[V.a.DELETE].pop()),this.quill.keyboard.addBinding({key:V.a.BACKSPACE,collapsed:!0,handler:function(e,n){if(0===e.index||t.quill.getLength()<=1)return!0;var o=t.quill.getLine(e.index)[0];if(o&&0===n.offset){var i=t.quill.getLine(e.index-1)[0];i&&x.a.isEmbedLine(i)&&1===o.length()&&(t.quill.focus(),t.quill.setSelection(e.index-2,0),t.quill.setSelection(e.index-1,0,w.a.sources.USER))}return!0}})},t}(),Nt=n(188),zt=n.n(Nt),Pt=w.a.import("delta"),Rt=w.a.import("formats/list"),Bt=function(){function t(t,e){this.mouseMoveWrapper=this.onMouseMove.bind(this),this.onMouseUpWrapper=this.onMouseUp.bind(this),this.quill=t,this.editor=e.editor,this.createDropLine(),this.quill.on("scroll-blot-mount",this.onBlotMount.bind(this))}return t.prototype.onBlotMount=function(t){if(t instanceof a.b&&this.processDraggableBlot(t,t.domNode),t instanceof Rt){var e=document.createElement("span");e.classList.add("ql-drag-button"),e.classList.add("notes-dnd-hide"),t.attachUIElement(e,"dnd"),this.processDraggableBlot(t,e)}},t.prototype.processDraggableBlot=function(t,e){var n=this;e.addEventListener("mousedown",(function(e){n.editor.editorMode==C.n.EDIT&&(e.stopPropagation(),e.preventDefault(),n.addListeners(),n.draggingBlot=t,n.onDragStart())}))},t.prototype.addListeners=function(){document.addEventListener("mousemove",this.mouseMoveWrapper),document.addEventListener("mouseup",this.onMouseUpWrapper)},t.prototype.removeListeners=function(){document.removeEventListener("mousemove",this.mouseMoveWrapper),document.removeEventListener("mouseup",this.onMouseUpWrapper)},t.prototype.onMouseMove=function(t){this.onDragMove(new zt.a.Point(t.clientX,t.clientY))},t.prototype.onMouseUp=function(t){this.draggingBlot&&(this.draggingBlot.domNode.style.opacity="1"),this.onDragEnd(),this.removeListeners(),this.dropProperties()},t.prototype.dropProperties=function(){this.draggingBlot=null},t.prototype.createDropLine=function(){this.dropLineElement=document.createElement("div"),this.dropLineElement.classList.add("ql-drop-line"),this.quill.root.parentNode.appendChild(this.dropLineElement),this.hideDropLine()},t.prototype.showDropLine=function(){if(void 0!==this.computedIndex){var t=this.quill.getLine(this.computedIndex)[0].domNode.getBoundingClientRect(),e=t.left,n=t.top,o=t.width,i=t.height,r=this.quill.container.getBoundingClientRect(),s=r.left,a=r.top;this.dropLineElement.style.left=e-s+"px",this.dropLineElement.style.width=o+"px",this.computedIndex===this.quill.getLength()?this.dropLineElement.style.top=n-a+i+"px":this.dropLineElement.style.top=n-a+"px",this.dropLineElement.classList.remove("ql-hidden"),this.draggingBlot&&(this.draggingBlot.domNode.style.opacity="0.3")}},t.prototype.hideDropLine=function(){this.dropLineElement.classList.add("ql-hidden")},t.prototype.calcComputedIndex=function(t){var e=t.x,n=t.y,o=document.elementFromPoint(e,n),i=o&&x.a.findBlot(o);if(i&&"edit"===this.editor.editorMode){var r=i.domNode===this.quill.root,s=this.quill.root.getBoundingClientRect(),a=s.x,l=s.width,d=document.elementFromPoint(a+l/2,n),c=x.a.getTopLevelBlot(r?x.a.findBlot(d):i,this.quill);if(!c||!c.domNode)return void(this.computedIndex=void 0);var p=c.domNode.getBoundingClientRect(),u=p.top,h=p.height;this.computedIndex=n>=u&&n<u+h/2?this.quill.getIndex(c):this.quill.getIndex(c)+c.length()}else this.computedIndex=void 0},t.prototype.onDragStart=function(){this.disabledElements=Array.from(document.querySelectorAll(".notes-dnd-ignore")),this.hiddenElements=Array.from(document.querySelectorAll(".notes-dnd-hide")),this.setPointerEvents(!1),this.setElementsVisibility(!1),this.computedIndex=void 0,this.quill.setSelection(null)},t.prototype.onDragMove=function(t){this.calcComputedIndex(t),void 0!==this.computedIndex?this.showDropLine():this.hideDropLine()},t.prototype.onDragEnd=function(t){this.hideDropLine(),this.setPointerEvents(!0),this.setElementsVisibility(!0),t&&this.insertEmbedWidgets(t),!t&&this.draggingBlot&&void 0!==this.computedIndex&&this.moveBlot(this.draggingBlot,this.computedIndex)},t.prototype.moveBlot=function(t,e){t instanceof a.b&&(t=t.parent);var n={index:t.offset(t.scroll),length:t.length()};if(e<n.index||e>n.index+n.length){var o=e<n.index?e:e-1,i=this.quill.root.scrollTop,r=this.quill.getContents(n.index,n.length);r=x.a.removeDefaultBlockAttributes(r),this.quill.insertText(e,"\n",w.a.sources.USER),this.quill.setSelection(e-1||0,0,w.a.sources.SILENT),this.quill.removeFormat(e,0,w.a.sources.USER);var s=(new Pt).retain(e).concat(r).delete("\n".length);this.quill.updateContents(s,w.a.sources.USER),t.remove(),this.quill.setSelection(o,0,w.a.sources.SILENT),this.quill.root.scrollTop=i}},t.prototype.insertEmbedWidgets=function(t){if(void 0!==this.computedIndex){$(this.quill,this.computedIndex,"widgetsRef",t.id,w.a.sources.USER,!1);var e=this.quill.getLeaf(this.computedIndex)[0];e&&e.setBlotSize&&(e.setBlotSize(t.width,t.height),e.showPlaceholder())}},t.prototype.setPointerEvents=function(t){var e=t?"":"none";this.disabledElements.forEach((function(t){return t.style.pointerEvents=e}))},t.prototype.setElementsVisibility=function(t){var e=t?"visible":"hidden";this.hiddenElements.forEach((function(t){return t.style.visibility=e}))},t}(),Ut=w.a.import("modules/uploader"),Ht=w.a.import("delta"),Wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e}(Ut);Ut.DEFAULTS={mimetypes:C.s,handler:function(t,e){var n=this,o=e.map((function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}))}));Promise.all(o).then((function(e){1!==n.quill.getLine(t.index)[0].length()&&(n.quill.insertText(t.index,"\n\n",w.a.sources.USER),t.index+=1),n.quill.removeFormat(t.index,0,w.a.sources.USER);var o=e.reduce((function(t,e){return t.insert({image:e})}),(new Ht).retain(t.index).delete(t.length));n.quill.updateContents(o,w.a.sources.USER),n.quill.setSelection(t.index+e.length,w.a.sources.SILENT)}))}};var Ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.copyProcessors=[],e}return Object(r.d)(e,t),e.prototype.addOnCopyProcessor=function(t){this.copyProcessors.push(t)},e.prototype.onCopy=function(e,n){void 0===n&&(n=!1);var o=t.prototype.onCopy.call(this,e,n);return this.copyProcessors.forEach((function(t){o=t(e,o,n)})),{html:o.html,text:o.text}},e.prototype.onPaste=function(e,n){var o=n.text,i=n.html;i||(i="<p>"+o+"</p>"),t.prototype.onPaste.call(this,e,{text:o,html:i})},e}(w.a.import("modules/clipboard")),$t=n(811),Vt=n(224),Zt=n(460),Gt=n.n(Zt),Yt=n(7631),Kt=w.a.import("delta"),Qt=function(){function t(t){this.quill=t}return t.prototype.showExportingMessage=function(t){it.a.instance&&it.a.instance.panelController&&it.a.instance.panelController.showNotesNotification(Object(p.l)(t))},t.prototype.hideMessage=function(){it.a.instance&&it.a.instance.panelController&&it.a.instance.panelController.hideNotesNotification()},t.prototype.exportNote=function(t){var e=this;void 0===t&&(t="pdf");var n=function(){e.tempQuill=null,e.hideMessage()},o=function(){e.tempQuill=null,e.hideMessage(),e.onExportError()},i=Vt.a.getInfo().title,r=rtb.config.app.exportNotesServiceUrl+"?format="+t+"&title="+i,s=this.getHtmlData(),a=new XMLHttpRequest;a.open("POST",r,!0),a.setRequestHeader("Content-type","text/html; charset=utf-8"),a.onload=function(){if(a.status>=200&&a.status<400){var t=JSON.parse(a.response),i={urlOrBlob:rtb.config.app.pdfGenerationServiceDownloadUrl+t.document};$t.a.start(i,n,o)}else e.onExportError()},a.send(s),this.showExportingMessage(t)},t.prototype.onExportError=function(){it.a.instance&&it.a.instance.panelController&&it.a.instance.panelController.showNotesNotification(p.f,!0)},t.prototype.getHtmlData=function(){var t=document.createElement("div");this.tempQuill=new w.a(t,{debug:"error",bounds:t,formats:C.h});var e,n=this.quill.getContents();e=n&&n.ops?new Kt(n.ops.map((function(t){var e=Gt()(t),n=t.attributes;return n&&(e.attributes=Object.keys(n).filter((function(t){return C.h.indexOf(t)>=0})).reduce((function(t,e){return t[e]=n[e],t}),{})),e}))):new Kt,this.tempQuill.setContents([],w.a.sources.API),this.tempQuill.setContents(e,w.a.sources.API),this.tempQuill.root.classList.add("export-instance");var o=this.tempQuill.root.outerHTML;return"<html>\n\t\t\t\t\t<head>\n\t\t\t\t\t\t<meta charset=\"utf-8\">\n\t\t\t\t\t\t<style type='text/css'>"+Yt+'</style>\n\t\t\t\t\t</head>\n\t\t\t\t\t<body>\n\t\t\t\t\t\t<div class="miro-notes--editor">'+o+"</div>\n\t\t\t\t\t</body>\n\t\t\t\t</html>"},t}(),Jt=function(){function t(t){this.quill=t,this.addBindings()}return Object.defineProperty(t.prototype,"notesPanelController",{get:function(){return it.a.instance.panelController},enumerable:!1,configurable:!0}),t.prototype.addBindings=function(){var t=this,e=this.getShortcutsBindings();Object.keys(e).forEach((function(n){e[n]&&t.quill.keyboard.addBinding(e[n])}))},t.prototype.getShortcutsBindings=function(){var t=this;return{h1:{key:V.a.NUMBER_1,shortKey:!0,altKey:!0,handler:this.makeHeaderFormatHandler(1)},h2:{key:V.a.NUMBER_2,shortKey:!0,altKey:!0,handler:this.makeHeaderFormatHandler(2)},h3:{key:V.a.NUMBER_3,shortKey:!0,altKey:!0,handler:this.makeHeaderFormatHandler(3)},strike:{key:V.a.S,shortKey:!0,altKey:!0,handler:this.makeFormatHandler("strike")},linkShortcut:{key:V.a.K,shortKey:!0,handler:function(e,n){e.length>0&&t.quill.theme.tooltip.edit()}},commentShortcut:{key:V.a.C,shortKey:!0,altKey:!0,handler:function(e){var n=t.quill.getModule("comments");n&&n.addComment(e)}},zoomIn:{key:V.a.EQUAL,shortKey:!0,handler:function(){t.notesPanelController.fontSizeModule&&t.notesPanelController.fontSizeModule.zoomIn()}},zoomOut:{key:V.a.MINUS,shortKey:!0,handler:function(){t.notesPanelController.fontSizeModule&&t.notesPanelController.fontSizeModule.zoomOut()}},zoom100:{key:V.a.NUMBER_0,shortKey:!0,handler:function(){t.notesPanelController.fontSizeModule&&t.notesPanelController.fontSizeModule.zoom100()}},redoY:{key:V.a.Y,shortKey:!0,handler:function(){t.quill.history.redo()}}}},t.prototype.makeHeaderFormatHandler=function(t){var e=this;return function(n,o){var i=t;o.format.header&&o.format.header==t&&(i=null),e.quill.format("header",i,w.a.sources.USER)}},t.prototype.makeFormatHandler=function(t){var e=this;return function(n,o){e.quill.format(t,!o.format[t],w.a.sources.USER)}},t}(),Xt=w.a.import("delta"),te={" --":" \u2014","--\x3e":"\u2192","\u2014>":"\u2192","<\u2014":"\u2190","<--":"\u2190","==>":"\u21d2","<==":"\u21d0","<=>":"\u21d4"},ee=function(t){Object.keys(te).sort((function(t,e){return e.length-t.length})).forEach((function(e){t.keyboard.addBinding({key:" "},{collapsed:!0,shiftKey:null,prefix:new RegExp(e+"$"),format:{"code-block":!1,blockquote:!1}},(function(n){t.insertText(n.index," ",w.a.sources.USER),t.history.cutoff();var o=(new Xt).retain(n.index-e.length).delete(e.length).insert(te[e]);return t.updateContents(o,w.a.sources.USER),t.history.cutoff(),t.setSelection(n.index+te[e].length-2,0,w.a.sources.SILENT),!1}))})),t.history.addAfterUndoProcessor((function(e){var n=Object.keys(te);e&&e.ops&&(e.ops[0]&&n.indexOf(e.ops[0].insert)>-1||e.ops[1]&&n.indexOf(e.ops[1].insert)>-1)&&t.setSelection(t.getSelection().index+1,0,w.a.sources.SILENT)}))},ne=w.a.import("modules/keyboard"),oe=w.a.import("delta"),ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.handleDeleteRange=function(t){var e=this.quill.getLines(t),n={};if(e.length>1){var o=e[0].formats(),i=e[e.length-1].formats();n=oe.AttributeMap.diff(i,o)||{},t.length+1==this.quill.getLength()&&(n=x.a.dropFormats(n))}this.quill.deleteText(t,w.a.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,w.a.sources.USER),this.quill.setSelection(t.index,w.a.sources.SILENT),this.quill.focus()},e}(ne),re=w.a.import("blots/block"),se=w.a.import("formats/header"),ae=w.a.import("formats/list"),le="in-composition",de=function(t){function e(e,n){var o=t.call(this,e,n)||this;return n.editor.noteTextChanged.add(o.onTextChange,o),o.quill.scroll.domNode.addEventListener("compositionstart",(function(){o.onCompositionStart()})),o.quill.scroll.domNode.addEventListener("compositionend",(function(){o.onCompositionEnd()})),o}return Object(r.d)(e,t),e.prototype.onCompositionStart=function(){this.quill.root.classList.add(le)},e.prototype.onCompositionEnd=function(){this.quill.root.classList.remove(le)},e.prototype.onTextChange=function(t){var e=x.a.getAffectedLinesFromDelta(this.quill,t);this.processLines(e)},e.prototype.processLines=function(t){t.forEach((function(t){(t instanceof re||t instanceof se||t instanceof ae)&&(t.domNode.classList.toggle("empty-line",1==t.length()),0===t.domNode.classList.length&&t.domNode.removeAttribute("class"))}))},e}(k.a),ce=n(228),pe=n(7632),ue=w.a.import("blots/block"),he=w.a.import("blots/block/embed"),me=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.tapProcessors=[],o.keydownWrapper=o.onKeydown.bind(o),o.isRegularUser=Object(f.a)().userType===ce.a.REGULAR,o.node=null,o.isComposing=!1,o.quill=e,o.editor=n.editor,o.editor.noteEditorChanged.add(o.updatePicker,o),o.formatPicker=new wt(e,o.editor,"newLine"),o.formatPicker.beforeFormat.add(o.removeOpeningChar,o),document.addEventListener("keydown",o.keydownWrapper),o.editor.editorModeChanged.add(o.hide,o),o.createPickerPlaceholder(),o.quill.scroll.domNode.addEventListener("compositionstart",(function(){o.isComposing=!0,o.hide()})),o.quill.scroll.domNode.addEventListener("compositionend",(function(){o.isComposing=!1,o.updatePicker()})),o}return Object(r.d)(e,t),e.prototype.createPickerPlaceholder=function(){var t=this,e=document.createElement("div");e.classList.add("new-line-picker-placeholder"),this.root.appendChild(e);var n=document.createElement("span");n.classList.add("new-line-picker-placeholder-text"),n.innerHTML="Type \u201c / \u201d to format or add blocks",e.appendChild(n);var o=document.createElement("span");o.classList.add("ql-format-picker-plus"),o.innerHTML=Object(ut.a)(pe),e.appendChild(o),this.tapProcessors.push(new K.a(o,(function(e){t.onPlusClick(e)}))),this.editor.addToHiddableElements({el:this.root,callback:this.updatePicker.bind(this)})},e.prototype.onKeydown=function(t){Object(G.a)().getFocus()==Y.a.NOTES&&t.keyCode==V.a.ESCAPE&&this.hide()},e.prototype.onPlusClick=function(t){t.stopPropagation(),t.preventDefault(),this.showPicker(this.node)},e.prototype.removeOpeningChar=function(){this.quill.focus();var t=this.quill.getSelection();if(t){var e=t.index,n=this.quill.scroll.descendant(ue,e)[0];this.isBlockBlot(n)&&this.isTextMatchForOpen(n)&&this.quill.deleteText(e-1,1,w.a.sources.USER)}else this.hide()},e.prototype.getLineText=function(t){return this.quill.getText(t.offset(t.scroll),t.length()).trim()},e.prototype.isTextMatchForOpen=function(t){return"/"==this.getLineText(t)},e.prototype.setDirection=function(t){var e=t.formats().direction;this.direction="rtl"==e?"rtl":"ltr",this.root.style.direction=this.direction},e.prototype.updatePicker=function(t,e,n,o){var i=this.quill.getSelection();if(i){var r=i.index,s=this.quill.scroll.descendant(ue,r)[0];this.isBlockBlot(s)&&!this.isComposing?x.a.isEmptyLine(s)?(this.hide(),this.setDirection(s),this.show(s.domNode),this.position(this.quill.getBounds(r),s)):this.isTextMatchForOpen(s)?t&&"text-change"==t&&o==w.a.sources.USER?(this.hide(),this.showPicker(this.node)):s.domNode!=this.node&&this.hide():this.hide():this.hide()}else this.hide()},e.prototype.isBlockBlot=function(t){return null!=t&&!(t instanceof he)&&!(t.domNode instanceof HTMLLIElement)&&!(t.domNode instanceof HTMLQuoteElement)&&!(t.domNode instanceof HTMLHeadingElement)},e.prototype.hide=function(){t.prototype.hide.call(this),this.direction=null,this.root.style.direction="",this.hidePicker()},e.prototype.show=function(e){this.quill.isEnabled()&&this.isRegularUser&&(t.prototype.show.call(this),this.node=e)},e.prototype.showPicker=function(t){var e=this;this.formatPicker.show(t),this.hideOnTapProcessor=new K.a(this.quill.root,(function(){e.hidePicker()}))},e.prototype.hidePicker=function(){this.hideOnTapProcessor&&(this.hideOnTapProcessor.destroy(),this.hideOnTapProcessor=null),this.formatPicker&&this.formatPicker.close()},e.prototype.position=function(t,e){var n=Math.round((e.domNode.clientHeight-t.height)/2),o="left",i=t[o];"right"==e.formats().align&&(o="right",i=Math.round(this.quill.root.clientWidth-t.left)),this.root.style.width=e.domNode.clientWidth+"px",this.root.style[o]=i+"px",this.root.style.top=t.top-n+this.quill.root.scrollTop+"px"},e}(w.a.import("ui/tooltip")),ge=me;me.TEMPLATE=[].join("");var fe,be=w.a.import("themes/bubble"),ve=h.a.tablet||h.a.mobile?24:4,xe=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(r.d)(e,t),e.prototype.extendToolbar=function(e){this.toolbar=e,t.prototype.extendToolbar.call(this,e),this.tooltip.hide=this.hideTooltip.bind(this),this.tooltip.position=this.position.bind(this.tooltip),this.tooltip.show=this.show.bind(this.tooltip),this.toolbar.linkEditor.position=this.position.bind(this.toolbar.linkEditor)},e.prototype.hideTooltip=function(){this.tooltip.root.classList.add("ql-hidden"),this.toolbar.formatPicker.close(),this.toolbar.buiPicker.close()},e.prototype.buildPickers=function(e,n){t.prototype.buildPickers.call(this,e,n),this.pickers.push(this.toolbar.formatPicker),this.pickers.push(this.toolbar.buiPicker)},e.prototype.show=function(){var t=this.quill.getSelection();if(t&&"\n"!=this.quill.getText(t.index,t.length)){var e=this.quill.getLines(t.index,t.length);if(1!=e.length||1!=e[0].length())e.filter((function(t){return x.a.isEmbedLine(t)})).length!=e.length&&(this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden"))}},e.prototype.position=function(t){var e=this.quill.getSelection();if(e&&e.length>=1){var n=this.quill.getText(e.index,e.length);"\n"==n[n.length-1]&&(e.length-=1,t=this.quill.getBounds(e))}var o=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=o+"px",this.root.style.top=i+ve+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),a=0;if(s.right>r.right-C.l&&(a=r.right-C.l-s.right,this.root.style.left=o+a+"px"),s.left<r.left+C.l&&(a=r.left+C.l-s.left,this.root.style.left=o+a+"px"),s.bottom>r.bottom){var l=s.bottom-s.top,d=t.bottom-t.top+l;this.root.style.top=i-d-ve+"px",this.root.classList.add("ql-flip")}return a},e}(be);function ye(){o.c({name:fe.CURSORS,type:"modules",config:{hideDelay:3e3,hideSpeed:200},moduleClass:i.a,isQuillModule:!0}),o.c({name:fe.TEXT_STATISTICS,type:"modules",config:{},moduleClass:_t.a,isQuillModule:!0}),o.c({name:fe.AUTOLINK,type:"modules",config:{insertImages:!0},moduleClass:D,isQuillModule:!0}),o.c({name:fe.TOOLBAR,type:"modules",config:{},moduleClass:It,isQuillModule:!0}),o.c({name:fe.HISTORY,type:"modules",config:{userOnly:!0},moduleClass:qt.a,isQuillModule:!0}),o.c({name:fe.CLIPBOARD,type:"modules",config:{},moduleClass:Ft,isQuillModule:!0}),o.c({name:fe.UPLOADER,type:"modules",config:{},moduleClass:Wt,isQuillModule:!0}),o.c({name:fe.KEYBOARD,type:"modules",config:{},moduleClass:ie,isQuillModule:!0}),o.c({name:fe.COMMENTS,type:"modules",config:{},moduleClass:et.a,isQuillModule:!0}),o.c({name:fe.AUTHORSHIP,type:"modules",config:{},moduleClass:j,isQuillModule:!0}),o.c({name:fe.EMBED_PROCESSOR,type:"modules",config:{supportedBlots:["widgetsRef","image"]},moduleClass:tt,isQuillModule:!0}),o.c({name:fe.DRAG_AND_DROP,type:"modules",config:{},moduleClass:Bt,isQuillModule:!0}),o.c({name:fe.RTL,type:"modules",config:{},moduleClass:Tt,isQuillModule:!0}),o.c({name:fe.EMBEDS,type:"modules",config:{},moduleClass:Dt,isQuillModule:!0}),o.c({name:fe.TEXT_REPLACER,type:"modules",config:{},moduleClass:ee,isQuillModule:!0}),o.c({name:fe.PLACEHOLDERS,type:"modules",config:{},moduleClass:de,isQuillModule:!0}),o.c({name:fe.NEW_LINE_FORMAT_PICKER,type:"modules",config:{},moduleClass:ge,isQuillModule:!0}),o.c({name:"mention",type:"formats",moduleClass:B,isQuillModule:!0}),o.c({name:"object",type:"formats",moduleClass:m,isQuillModule:!0}),o.c({name:"image",type:"formats",moduleClass:st,isQuillModule:!0}),o.c({name:"block",type:"blots",moduleClass:U.a,isQuillModule:!0}),o.c({name:"miro",type:"themes",moduleClass:xe,isQuillModule:!0}),o.c({name:"bui-picker",type:"ui",moduleClass:Et,isQuillModule:!0}),o.c({name:fe.EXPORTER,type:"addons",moduleClass:Qt,isQuillModule:!1}),o.c({name:fe.SHORTCUTS,type:"addons",moduleClass:Jt,isQuillModule:!1})}!function(t){t.CURSORS="cursors",t.FORMAT_PICKER="picker",t.TEXT_STATISTICS="counter",t.AUTOLINK="autolink",t.TOOLBAR="toolbar",t.HISTORY="history",t.CLIPBOARD="clipboard",t.KEYBOARD="keyboard",t.UPLOADER="uploader",t.COMMENTS="comments",t.AUTHORSHIP="authorship",t.EMBED_PROCESSOR="embedProcessor",t.DRAG_AND_DROP="dnd",t.RTL="rtl",t.EMBEDS="embeds",t.EXPORTER="exporter",t.SHORTCUTS="shortcuts",t.TEXT_REPLACER="textReplacer",t.PLACEHOLDERS="placeholders",t.NEW_LINE_FORMAT_PICKER="newLineFormatPicker"}(fe||(fe={}))},11263:function(t,e,n){"use strict";var o=n(190),i=n(182),r=n(7617),s=n(7637),a=n(1285),l=n(440);function d(){return Object(o.a)({restrict:"E",template:n(7640),controller:s.a,controllerAs:"ctrl",scope:{users:"=",allUsersCount:"=",maxVisible:"<",showMore:"<",clicked:"&"}})}var c=n(3930),p=n(818),u=n(1404),h=n(7641);function m(){return Object(o.a)({restrict:"E",template:n(7644),controller:h.a,controllerAs:"ctrl"})}var g=n(2771),f=function(){function t(){this.value=void 0,this.comment=""}return t.prototype.getCaption=function(){return"Rate your Notes experience"},t.prototype.getParams=function(){return{type:"notes",value:this.value,comment:this.comment}},t}(),b=n(0),v=n(187),x=n(189);var y=n(1883),w=n(917),C=n(547),k=n(16),E=function(){function t(t){this.$scope=t,this._rateOptions=Object(w.a)(),this._rate=new f}return t.prototype.showRate=function(){this._rate=new f},t.prototype.rateClosed=function(){this.$scope.onClose()},Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateOptions",{get:function(){return this._rateOptions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTouchDevice",{get:function(){return k.a.isTouchSupportedAndNotDesktop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileApp",{get:function(){return k.a.mobileApp},enumerable:!1,configurable:!0}),t.prototype.getRateCaption=function(){return this._rate&&this._rate.getCaption()},t.prototype.rateSubmitted=function(){this._rate&&this._rate.value&&(!function(t){var e=Object(v.a)().myUserId;Object(x.rate)(Object(b.a)({user_id:e&&e.toString()||null},t))}(this._rate.getParams()),this.rateClosed(),Object(C.a)().then((function(t){t.panelController&&t.panelController.showNotesNotification(y.g,!0)})),this._rate=new f)},t.$inject=["$scope"],t}(),S=function(){return Object(o.a)({restrict:"E",template:n(7645),controller:E,controllerAs:"ctrl",scope:{onClose:"&"}})},M=function(){Object(g.a)(),n(7646),Object(i.b)().directive("notesRate",S)},I=n(330),_=n(214);function q(t){return Object(o.a)({restrict:"E",template:n(7650),link:function(e,n){T(e,n,t),A(e)}})}q.$inject=["$timeout"];var O=!0,j=function(t,e){t.collapsed=e,t.safeApply(),O=e},T=function(t,e,n){var o,i;j(t,!0);var r=function(){t.collapsed&&(j(t,!1),o=I.subscribeOnDown(null,(function(){j(t,!0)}),".notes-font-size"))},s=function(){j(t,!1),n.cancel(i)},a=function(){i=n((function(){j(t,!0)}),500)};_.a.deviceInput.allowPointers?e.on("pointerup",r):(e.on("touchend",r),e.on("mouseover",s),e.on("mouseout",a)),t.$on("$destroy",(function(){e.off("pointerup",r),e.off("touchend",r),e.off("mouseover",s),e.off("mouseout",a),o&&o.destroy()}))},A=function(t){var e=t.$parent;t.zoom100=function(){O||e.zoom100()},t.zoomOut=e.zoomOut,t.zoomIn=e.zoomIn;var n=function(){return t.scale=Math.round(100*e.fontScale)+"%"};n(),t.$parent.$watch("fontScale",n)},L=n(822),D=n(433);function N(){return Object(o.a)({restrict:"E",template:n(7653),scope:{onClose:"&"},link:function(t){t.onElementClick=function(t){L.a.noteFirstTimeBannerClick(t)}}})}var z=n(411),P=n.n(z),R=n(2935),B=P.a.import("delta"),U=n(7656),H=n(7657),W=n(7658),F=n(7659),$=n(7660),V=[];function Z(t){V.find((function(e){return e.name===t.name}))||V.push(t)}var G=n(239),Y=function(){function t(t,e,n){var o=this;this.$scope=t,this.$element=e,this.$sce=n,Z({name:"To do list",content:new B([{insert:"To do list"},{insert:"\n",attributes:{header:1}},{insert:"\n"},{insert:"[Describe the project you are working on here]"},{insert:"\n\n"},{insert:"Add an action item here"},{insert:"\n",attributes:{list:"checked"}},{insert:"Add an action item here"},{insert:"\n",attributes:{list:"unchecked"}}]),index:0,icon:Object(R.a)(U)}),Z({name:"Meeting agenda",content:new B([{insert:"Meeting agenda"},{attributes:{header:1},insert:"\n"},{insert:"Date: [Meeting date]"},{insert:"\n"},{insert:"Agenda details"},{attributes:{header:2},insert:"\n"},{insert:"Add agenda item"},{insert:"\n",attributes:{list:"ordered"}},{insert:"Add agenda details"},{insert:"\n",attributes:{list:"ordered",indent:1}},{insert:"Add agenda details"},{insert:"\n",attributes:{list:"ordered",indent:2}}]),index:1,icon:Object(R.a)(H)}),Z({name:"Project summary",content:new B([{insert:"Project summary"},{attributes:{header:1},insert:"\n"},{insert:"Product Description"},{attributes:{header:2},insert:"\n"},{insert:"[Give a high-level overview of the product / project you're working on, its goals, etc]\nTarget Audience"},{attributes:{header:2},insert:"\n"},{insert:"[Elaborate on the target audience of your project/product, link out to additional resources]\nCompetition"},{attributes:{header:2},insert:"\n"},{insert:"[List your competitors here and recommendations how to position your product against the competition & handle objections]\nCompetitor 1"},{attributes:{list:"bullet"},insert:"\n"},{insert:"Risk / Opportunity"},{attributes:{header:2},insert:"\n"},{insert:"[List the challenges and opportunities your product / project can encounter]\nAdd an opportunity here"},{attributes:{list:"ordered"},insert:"\n"},{insert:"Add a risk here "},{attributes:{list:"ordered"},insert:"\n"},{insert:"Conclusions "},{attributes:{header:2},insert:"\n"},{insert:"[Add your recommendations, suggestions, and next steps here] \nAdd an action item here "},{attributes:{list:"unchecked"},insert:"\n"},{insert:"\n"}]),index:2,icon:Object(R.a)(W)}),Z({name:"Workshop notes",content:new B([{insert:"Workshop notes"},{attributes:{header:1},insert:"\n"},{insert:"[Add date & time here]\n[Add presenter here]\n[Add topic here]\nNotes "},{attributes:{header:2},insert:"\n"},{insert:"Start typing your notes here\nKey takeaways"},{attributes:{header:2},insert:"\n"},{insert:"Add your takeaways here "},{attributes:{list:"ordered"},insert:"\n"},{insert:"Action items "},{attributes:{header:2},insert:"\n"},{insert:"Add an action item here"},{attributes:{list:"unchecked"},insert:"\n"},{insert:"\n"}]),index:3,icon:Object(R.a)(F)}),Z({name:"Board annotation",content:new B([{insert:"Board annotation"},{attributes:{header:1},insert:"\n"},{insert:"[Add text here to tell your team about the purpose of the board and explain how they should interact with it] \n"},{insert:"\n"},{insert:{image:"https://github.com/MultivitaminLLC/notes/blob/master/notes_explain_0.gif?raw=true"},attributes:{height:"270",width:"480"}},{insert:"\n"}]),index:4,icon:Object(R.a)($)}),this.templates=V,t.trustAsHtml=function(t){return o.$sce.trustAsHtml(t)},Object(G.a)().rightSidebar.resized.add(this.onResize,this),t.$on("$destroy",(function(){Object(G.a)().rightSidebar.resized.remove(o.onResize,o)}))}return t.prototype.onResize=function(){var t=C.a.instance;if(t&&t.panelController){var e=t.panelController.noteEditor.getContentSizeProcessor().getPaddingHoriz();this.$element[0].style.paddingLeft=this.$element[0].style.paddingRight=e+"px"}},t.prototype.onSelectTemplate=function(t){this.$scope.onSelect({$template:t})},t.$inject=["$scope","$element","$sce"],t}();function K(){return Object(o.a)({restrict:"E",template:n(7663),controller:Y,scope:{onSelect:"&"},controllerAs:"ctrl"})}var Q=n(235),J=P.a.import("ui/icons");J.history={},J.history.undo=n(7664),J.history.redo=n(7665);var X=function(){return Object(o.a)({restrict:"E",template:n(7666),controller:tt,controllerAs:"ctrl",link:function(t){t.isMobileApp=k.a.mobileApp,t.videoClicked=function(){return L.a.noteHelpInteracted("clicked_video")},t.learnMoreClicked=function(){return L.a.noteHelpInteracted("clicked_learn_more")},t.closed=function(){L.a.noteHelpInteracted("closed_window"),t.onClose()},t.shortcuts=[{icon:J.header[1],title:"Heading 1",shortcut:Q.k("%ctrlOrCmd% %altOrOpt% 1")},{icon:J.header[2],title:"Heading 2",shortcut:Q.k("%ctrlOrCmd% %altOrOpt% 2")},{icon:J.list.check,title:"Checklist",shortcut:"[] Space"},{icon:J.list.bullet,title:"Bullet list",shortcut:"- Space"},{icon:J.list.ordered,title:"Numbered list",shortcut:"1. Space"},{icon:J.bold,title:"Bold",shortcut:Q.k("%ctrlOrCmd% B")},{icon:J.italic,title:"Italic",shortcut:Q.k("%ctrlOrCmd% I")},{icon:J.underline,title:"Underline",shortcut:Q.k("%ctrlOrCmd% U")},{icon:J.strike,title:"Strikethrough",shortcut:Q.k("%ctrlOrCmd% %altOrOpt% S")},{icon:J.link,title:"Link",shortcut:Q.k("%ctrlOrCmd% K")},{icon:J.comment,title:"Comment",shortcut:Q.k("%ctrlOrCmd% %altOrOpt% C")},{icon:J.history.undo,title:"Undo",shortcut:Q.k("%ctrlOrCmd% Z")},{icon:J.history.redo,title:"Redo",shortcut:Q.k("%ctrlOrCmd% Shift Z")}]},scope:{onClose:"&"}})},tt=function(){function t(t){this.$sce=t}return t.prototype.getTrusted=function(t){return this.$sce.trustAsHtml(t)},t.$inject=["$sce"],t}(),et=n(386),nt=n(194),ot=n(1092),it=n(228),rt="Pinned",st="bottom",at="properties",lt="pinnedNote";function dt(t){return t?t.split(" ").filter((function(t,e){return e<3})).reduce((function(t,e){return t+e[0]}),""):""}function ct(){return Object(o.a)({restrict:"E",template:n(7671),link:function(t){t.isPinned=!1,t.canEdit=!1,t.pinnerName=rt,t.tooltipPlace=st;var e=Object(v.a)().userType===it.a.REGULAR,n=e?dt(Object(v.a)().userInfo.name):"",o=e?Object(v.a)().myUserId.toString():"",i=Object(ot.a)().documentJson,r=function(){return t.canEdit=Object(nt.a)().currentBoard.canCreateAndEditWidgets()};Object(nt.a)().currentBoard.permissionsChanged.add(r),r();var s=function(e){var i=e.delta&&e.delta[lt],r=i&&i.user;t.isPinned=!!r,t.pinnerName=rt,t.pinnerAbv="",r&&(r==o?(t.pinnerName="Pinned by me",t.pinnerAbv=n):et.a(r).then((function(e){t.isPinned&&(t.pinnerName="Pinned by "+e.name,t.pinnerAbv=dt(e.name),t.safeDigest())})).catch((function(t){}))),t.safeDigest()};i.subscribe(at,s),t.togglePin=function(){var e;if(t.canEdit){var n=!t.isPinned,r=n?{user:o}:null;i.jsonUpdate(at,((e={})[lt]=r,e)),L.a.notePinUsed(n?"pinned":"unpinned")}};var a=function(e){t.tooltipPlace=e?"right":st,t.safeDigest()};Object(G.a)().rightSidebar.fullscreenChanged.add(a),t.$on("$destroy",(function(){Object(nt.a)().currentBoard.permissionsChanged.remove(r),i.unsubscribe(at,s),Object(G.a)().rightSidebar.fullscreenChanged.remove(a)}))}})}e.a=function(){Object(l.a)(),n(7638),Object(a.b)(),Object(i.b)().directive("userIconsRow",d),Object(p.a)(),Object(u.a)(),n(7642),Object(i.b)().directive("notesComments",m),Object(c.a)(),M(),n(7648),Object(i.b)().directive("notesFontSize",q),Object(D.a)(),n(7651),Object(i.b)().directive("notesFirstTimeBanner",N),M(),n(7667),Object(i.b)().directive("notesHelpPopup",X),n(7661),Object(i.b)().directive("notesTemplates",K),n(7669),Object(i.b)().directive("notesPin",ct),n(7673),n(7675),Object(i.b)().directive("notesPanel",pt)};function pt(){return Object(o.a)({restrict:"E",template:n(7677),controller:r.a,controllerAs:"ctrl",link:function(t){t.module.init(t.ctrl)}})}},11363:function(t,e,n){"use strict";var o=n(1193),i=n(27),r=n(239),s=n(197),a=n(181),l=n(4494),d=n(618),c=n(0),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentScale=1,e}return Object(c.d)(e,t),e.prototype.detach=function(){this._contentScale=1;var e=this.editor.scrollContainer;e.style.transform="",e.style.width="",e.style.height="",t.prototype.detach.call(this)},e.prototype.onResize=function(t){var e=((t/=this._contentScale)-this.contentWidth)/2;this.paddingHoriz=e,this.paddingVert=d.v},e.prototype.setSizeScale=function(t,e,n,o){this._contentScale=o,this.contentWidth=t;var i=this.editor.scrollContainer;i.style.transform="scale("+o+")",i.style.width=e+"px",i.style.height=n+"px"},e}(n(4493).c),u=n(967),h=n(316),m=function(){function t(t,e){this.enabled=!1,this.module=t,this.screenVideoChatService=e,o.d.add(this.onScreenShareChanged,this),this.onScreenShareChanged(h.a.__getUntypedState("ui.board.screenvideochat.screenSharingState")),this.contentSizeProcessor=new p}return t.prototype.onScreenShareChanged=function(t){var e=t==i.v.WATCHER;e!=this.enabled&&(this.enabled=e,e?(this.screenVideoChatService.dataReceived.add(this.dataReceived,this),this.applyInitValue(l.c)):(this.screenVideoChatService.dataReceived.remove(this.dataReceived,this),this.closePanel()))},t.prototype.applyInitValue=function(t){var e=this.screenVideoChatService.getData(t);void 0!==e&&this.dataReceived(t,e)},t.prototype.dataReceived=function(t,e){t==l.c&&(e?this.openPanel():this.closePanel()),this.currentPanel&&(t==l.d&&this.scrollPanel(this.currentPanel,e),t==l.e&&this.scalePanel(this.currentPanel,e.width,e.height,e.percent),t==l.b&&this.changeFullscreen(this.currentPanel,e),t==l.a&&this.setFontSize(this.currentPanel,e))},t.prototype.openPanel=function(){this.currentPanel||(this.module.onPanelOpen.add(this.onPanelOpen,this),this.module.openPanel(u.a.SCREEN_SHARE_WATCH,{minWidth:0,resizeable:!1}))},t.prototype.closePanel=function(){Object(r.a)().rightSidebar.deactivate(s.a.NOTES),this.module.onPanelOpen.remove(this.onPanelOpen,this),this.currentPanel&&(this.restorePanelChanges(this.currentPanel),a.pixiCanvas.canvasResized.remove(this.onWindowResize,this),this.currentPanel=void 0)},t.prototype.onPanelOpen=function(t){var e=this;this.currentPanel=t,this.currentPanel.noteEditor.changeContentSizeProcessor(this.contentSizeProcessor),this.module.onPanelOpen.remove(this.onPanelOpen,this),a.pixiCanvas.canvasResized.add(this.onWindowResize,this,-100),setTimeout((function(){e.applyInitValue(l.b),e.applyInitValue(l.d),e.applyInitValue(l.a)}))},t.prototype.onWindowResize=function(){this.applyInitValue(l.e)},t.prototype.scrollPanel=function(t,e){t.noteEditor.scrollProcessor.scrollTo(e,!0)},t.prototype.changeFullscreen=function(t,e){Object(r.a)().rightSidebar.setFullscreen(e),this.onWindowResize()},t.prototype.scalePanel=function(t,e,n,o){var i=a.pixiCanvas.canvasWidth,s=a.pixiCanvas.canvasHeight,l=s/n,c=e*l,p=i*o;c>p&&(n=s/(l=(c=p)/e));var u=e;Object(r.a)().rightSidebar.fullscreen?(e=i/l,c=i):(e+=2*d.l,c+=2*d.l*l),this.contentSizeProcessor.setSizeScale(u,e,n,l),Object(r.a)().rightSidebar.resize(c)},t.prototype.setFontSize=function(t,e){t.noteEditor.fontSize=e},t.prototype.restorePanelChanges=function(t){t.noteEditor.restoreContentSizeProcessor(),t.fontSizeModule&&t.fontSizeModule.applySize()},t}();e.a=m},1281:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var o=n(5);function i(){return"EmojiPickerService"}e.a=o.a("EmojiPickerService")},1282:function(t,e,n){"use strict";(function(t,o){n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return N}));var i=n(0),r=n(189),s=n(199),a=n(235),l=n(194),d=n(28),c=n(187),p=n(363),u=n(181),h=n(584),m=n(228),g=n(2011),f=n(1030),b=n(43),v=n(222),x=n.n(v),y=n(182),w=n(252),C=n(280),k=n(589),E=n(329),S=n(224),M=n(288),I=n(290),_=n(16),q=c.b(),O=l.b(),j=_.a.mobile?48:40,T=function(){var t;return function(){return t||(t=_.a.isTouchSupportedAndNotDesktop?"touchstart":"click")}}();function A(){n(2660),Object(y.b)().directive("uiMentions",L)}function L(){return{replace:!0,restrict:"E",controller:D,template:n(2662),link:function(t,e,n,o){_.a.mobile&&e.addClass("mobile"),t.mentions=[],t.selection=0,t.opened=!1,t.isRegular=function(){return q().userType==m.a.REGULAR},t.isParticipant=function(){return S.a.getInfo().participant},t.allowMentions=function(){return g.c(S.a.getInfo())},t.onMouseMove=function(e){t.selection!=e&&(t.selection=e,t.safeApply())},t.onMentionClick=function(e,n){void 0===n&&(n=!1),t.selection=t.mentions.indexOf(e),o.selectionChanged.dispatch(e,n),o.close()},t.onShareClick=function(){o.close(),Object(w.a)((function(){return Object(C.a)()})).then((function(t){return t.showShareBoardModal({boardId:S.a.getInfo().id,from:"mentions"})}))},t.onLoginClick=function(){r.clickLoginMentionByGuest(),Object(M.a)().dispatch(Object(I.g)({openBoardId:O().getBoardId()}))},t.scrollToSelection=function(){t.mentions.length&&-1!=t.selection&&e.find(".mentions__mention").eq(t.selection).scrollIntoView({offset:8})}}}}var D=function(){function e(e,n){var o=this;this.waitEvent=!1,this.prevSearch={search:null,suggestions:null,withCustom:!1},this.onClickWrapper=this.onClick.bind(this),this.onKeyUpWrapper=this.onKeyUp.bind(this),this.onKeyDownWrapper=this.onKeyDown.bind(this),this.selectionChanged=new t.Signal,this.onTryShowSuggestions=x()((function(t,e,n){o.tryShowSuggestions(t,e,n)}),500),this.selectNext=function(){var t=o.$scope;++t.selection>=t.mentions.length&&(t.selection=0),t.safeApply(),t.scrollToSelection()},this.selectPrev=function(){var t=o.$scope;--t.selection<0&&(t.selection=t.mentions.length-1),t.safeApply(),t.scrollToSelection()},this.$scope=e,this.$element=n}return e.prototype.showMentions=function(t,e,n,o){void 0===o&&(o="top"),this.offset=e,this.location=n,this.openingDirection=o,this.search(t)},e.prototype.search=function(t){var e=this;if(!this.$scope.isRegular())return this.open();t=t.toLowerCase();var n=q().myUserId.toString();this.onTryShowSuggestions(t,!0,(function(i){var r=i.data.map((function(t){return t.id==n?null:o.extend({},t,{picture:t.picture.size44||d.o})})).filter((function(t){return!!t})),s=!t.length&&!r.length;return e.$scope.empty=s,Promise.resolve(r)}))},e.prototype.tryShowSuggestions=function(t,e,n){var o=this;Object(f.a)().getSuggestions(t,!0,n,Object(k.a)().activeMessage).then((function(e){var n=e.suggestions;n=Object(i.j)(e.custom,n);var r=o.$scope,s=n.length;o.prevSearch.withCustom=e.custom.length>0,r.selection=0,r.mentions=n,r.empty=!e.allCount,o.prevSearch.search=t,o.prevSearch.suggestions=s,r.empty||s?o.open():o.close()}))},e.prototype.close=function(){var t=this.$scope;t.opened&&(t.opened=!1,t.safeApply(),document.removeEventListener(T(),this.onClickWrapper,!0),document.removeEventListener("keydown",this.onKeyDownWrapper,!0),this.waitEvent||document.removeEventListener("keyup",this.onKeyUpWrapper,!0),u.onCanvasUnloaded.remove(this.close,this),u.canvasController.removeEventListener(h.a.VIEWPORT_UPDATED,this.close,this)),this.onTryShowSuggestions.cancel()},e.prototype.reopen=function(){this.$scope.opened&&this.open()},e.prototype.open=function(){var t=this,e=this.$scope;e.opened||(e.opened=!0,e.selection=0,e.safeApply(),document.addEventListener(T(),this.onClickWrapper,!0),document.addEventListener("keyup",this.onKeyUpWrapper,!0),document.addEventListener("keydown",this.onKeyDownWrapper,!0),u.onCanvasUnloaded.add(this.close,this),u.canvasController.addEventListener(h.a.VIEWPORT_UPDATED,this.close,this)),this.setPosition(Math.max(this.prevSearch.suggestions,1)),setTimeout((function(){return t.$element.scrollTop(0)}))},e.prototype.onClick=function(t){a.c(t.target,(function(t){return"mentions"==t.id||Object(b.m)(t,"ui-textarea__editing")}))||(this.close(),this.stopEvent(t))},e.prototype.onKeyUp=function(t){var e=t.keyCode;(p.p(e)||p.i(e)||e==s.a.ESCAPE||e==s.a.TAB)&&this.stopEvent(t),this.waitEvent&&(this.waitEvent=!1,document.removeEventListener("keyup",this.onKeyUpWrapper,!0))},e.prototype.onKeyDown=function(t){var e=t.keyCode,n=this.$scope;e==s.a.TAB?(1==n.mentions.length?n.onMentionClick(n.mentions[n.selection],!0):this.selectNext(),this.stopEvent(t)):p.p(e)?(t.keyCode===s.a.UP_ARROW?this.selectPrev():this.selectNext(),this.stopEvent(t)):p.k(e)||e==s.a.ESCAPE?(this.waitEvent=!0,this.close(),e==s.a.ESCAPE&&this.stopEvent(t)):p.i(e)&&(this.waitEvent=!0,this.stopEvent(t),n.mentions.length?n.onMentionClick(n.mentions[n.selection],!0):this.close())},e.prototype.stopEvent=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},e.prototype.setPosition=function(t){if(this.$scope.opened){var e=this.prevSearch.withCustom&&t>1?16:0,n=this.offset,o=this.location;if(n&&o){var i,r,s,a,l;if(_.a.mobile){var d=Math.min(t,8,~~((n.top-12)/j));i=n.top-j*d-12+1,r=d*j}else if("top"==this.openingDirection){d=Math.min(t,8,~~((n.top-15)/(j+16)));i=Math.max(n.top-15-e-(j*d+8),15),r=d*j+e}else{d=Math.min(t,8,~~((document.body.clientHeight-(n.top+15))/(j+16)));i=Math.max(n.top+15+16),r=d*j+e}switch(o){case"chat":s=20,a=0,l="mentions--chat";break;case"comment":s=20,a=n.left,l="mentions--comment";break;case"comment-reply":s=20,a=n.left,l="mentions--comment-reply";break;case"note":s=0,a=n.left,l="mentions--comment"}var c=this.$element;c.removeClass("mentions--chat mentions--comment mentions--comment-reply"),c.addClass(l),c.css({height:r,left:s,transform:"translate("+a+"px, "+i+"px)"}),this.$scope.safeApply()}}},e.$inject=["$scope","$element"],e}();function N(){return E.a.instance.getAngularStatic().element("#mentions").controller("uiMentions")}}).call(this,n(110),n(193))},1283:function(t,e){t.exports="#img__close-16-in-24"},1285:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return s}));var o=n(279),i=n(200),r=n(182);function s(){Object(r.b)().component("userPictureReact",Object(i.c)(t)(o.g,["pictureUrl","className","shouldHideBeforeImageLoad","size"]))}n.d(e,"a",(function(){return o.b}))}).call(this,n(111)(t))},1404:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(190),i=n(2673),r=n(182);function s(){n(2674),Object(r.b)().directive("emojiPicker",a)}function a(){return Object(o.a)({restrict:"E",template:n(2676),controller:i.a,controllerAs:"picker",bindToController:!0,scope:{visibility:"=",onSelected:"&"}})}},1454:function(t,e){t.exports="#img__notification-bell"},1516:function(t,e,n){"use strict";var o=function(t,e){this.quill=t,this.options=e};e.a=o},1706:function(t,e){t.exports="#img__help-question"},1840:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(194),i=n(1004),r=n(182),s=o.b();function a(){Object(r.b)().directive("uiTextareaMentions",l)}function l(){return{restrict:"A",require:"uiTextarea",link:function(t,e,n,o){s().canvasBoardInfo.template||(o.addClick(i.b),o.addChange(i.a));var r=function(t){return{execute:function(e){var n={hasMentions:!1,customMentionsSizes:{}};t.parseResult||(t.parseResult={});var o=i.d.execute(e,n);return t.parseResult.hasMentions=n.hasMentions,t.parseResult.customMentionsSizes=n.customMentionsSizes,o}}}(o);o.addParser(r),o.addFormatter(i.c)}}}},1841:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1005),i=n(182);function r(){Object(i.b)().directive("uiTextareaLinks",s)}function s(){return{restrict:"A",require:"uiTextarea",link:function(t,e,n,i){i.addClick(o.a,0)}}}},1842:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(1003),i=n(276),r=n(1004),s=n(1005);function a(t){var e=o.l.execute(Object(i.c)(t));return e=s.b.execute(e),e=o.f.execute(e),e=r.e.execute(e)}},1843:function(t,e,n){var o=n(1844);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},1844:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".ui-textarea {\n  position: relative;\n  display: block !important;\n  cursor: default;\n}\n.ui-textarea[edit-by-click='false'] .ui-textarea__view {\n  cursor: default;\n}\n.ui-textarea--editable {\n  cursor: text;\n}\n.ui-textarea__hidden {\n  display: none !important;\n}\n.ui-textarea__view,\n.ui-textarea__edit {\n  display: block;\n  padding: 5px 3px;\n  background: rgba(255, 255, 255, 1);\n  background: var(--white);\n  box-sizing: border-box;\n  word-wrap: break-word;\n  word-break: break-word;\n  margin: 0;\n}\n.ui-textarea__edit {\n  resize: none;\n  outline: none;\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n.ui-textarea__view {\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.ui-textarea__view .fade-background {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n}\n.ui-textarea__view > span > span {\n  white-space: pre-wrap;\n}\n.ui-textarea__placeholder,\n.ui-textarea__edit:-ms-input-placeholder {\n  color: rgba(205, 204, 215, 1);\n  color: var(--indigo400);\n  line-height: 17px;\n  opacity: 1;\n  font-size: 13px;\n}\n.ui-textarea__placeholder,\n.ui-textarea__edit::placeholder {\n  color: rgba(205, 204, 215, 1);\n  color: var(--indigo400);\n  line-height: 17px;\n  opacity: 1;\n  font-size: 13px;\n}\n.ui-textarea__placeholder {\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  pointer-events: none;\n}\n.ui-textarea__mentions {\n  background: rgba(245, 245, 247, 1);\n  background: var(--indigo50);\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n  width: 250px;\n  margin-left: -30px;\n  position: relative;\n  box-sizing: border-box;\n  padding: 20px 20px 15px;\n}\n.ui-textarea__mentions-message {\n  font-size: 13px;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  line-height: 16px;\n}\n.ui-textarea__mentions-action {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-flow: row nowrap;\n      flex-flow: row nowrap;\n  -ms-flex-pack: center;\n      justify-content: center;\n  margin-top: 10px;\n}\n.ui-textarea__mentions-action-cancel,\n.ui-textarea__mentions-action-invite {\n  margin: 0 10px;\n  cursor: pointer;\n  line-height: 18px;\n}\n.ui-textarea__mentions-action-cancel {\n  color: #b3b3b3;\n}\n.ui-textarea__mentions-action-cancel:hover {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n}\n.ui-textarea__mentions-action-invite {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.ui-textarea__mentions-action-invite:hover {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.comments-layer .ui-textarea .ui-textarea__mentions {\n  width: 290px;\n}\n",""])},1845:function(t,e){t.exports='<div class="ui-directive ui-textarea" ng-class="{\'ui-textarea--editable\': editable}" hm-tap="_onClick($event)">\n\t<div class="ui-textarea__view editable" ng-show="viewMode" no-prevent-default="true">\n\t\t<span ng-if="viewValue.length" ng-repeat="value in viewValue track by $index">\n\t\t\t<span ng-if="value.isHtml" ng-bind-html="value.text"></span>\n\t\t\t<span\n\t\t\t\tng-if="!value.isHtml"\n\t\t\t\tng-class="{\'fade-background\': value.isUnknownMention}"\n\t\t\t\ttooltip="{{value.isUnknownMention ? \'No longer has access to the board\' : \'\'}}"\n\t\t\t\ttooltip-append-to-body="true"\n\t\t\t\tng-bind="value.text"\n\t\t\t>\n\t\t\t</span>\n\t\t</span>\n\n\t\t<span ng-if="!viewValue.length && editValue" ng-bind="editValue"></span>\n\t\t<span ng-if="!viewValue.length && !editValue">&nbsp;</span>\n\t</div>\n\n\t<textarea\n\t\tclass="ui-textarea__edit editable"\n\t\tng-model="editValue"\n\t\tng-model-options="{allowInvalid: true}"\n\t\tfocus-if="!viewMode"\n\t\tng-class="{\'ui-textarea__hidden\': useInput, \'ui-textarea__editing\': !viewMode}"\n\t\tmaxlength="{{maxlength}}"\n\t\tng-trim="false"\n\t\trows="1"\n\t\tng-focus="_onFocus($event)"\n\t\tng-attr-placeholder="{{placeholder}}"\n\t\tng-keydown="_onKeyDown($event)"\n\t\tng-keyup="_onKeyUp($event)"\n\t\tng-change="_onChange()"\n\t\tno-prevent-default="true"\n\t></textarea>\n\n\t<input\n\t\ttype="text"\n\t\tclass="ui-textarea__edit editable"\n\t\tng-model="editValue"\n\t\tng-model-options="{allowInvalid: true}"\n\t\tfocus-if="!viewMode"\n\t\tng-class="{\'ui-textarea__hidden\': !useInput, \'ui-textarea__editing\': !viewMode}"\n\t\tmaxlength="{{maxlength}}"\n\t\tng-trim="false"\n\t\tng-focus="_onFocus($event)"\n\t\tng-attr-placeholder="{{placeholder}}"\n\t\tng-keydown="_onKeyDown($event)"\n\t\tng-keyup="_onKeyUp($event)"\n\t\tng-change="_onChange()"\n\t/>\n\n\t<div class="ui-textarea__placeholder" ng-bind="placeholder" ng-show="placeholder && viewMode && !editValue"></div>\n</div>\n'},1846:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(340),i=n(183),r=n(186),s=n(331),a=n(615),l=n(287);function d(t){return{isAllowed:Object(o.a)().allowFollow,isFollowed:function(){return Object(i.isSubscribed)(t.subscriptionMode)},click:function(e){var n=!Object(i.isSubscribed)(t.subscriptionMode);t.changeSubscriptionMode(n,e),n?(Object(r.a)().show("You'll get notified about new replies in this thread"),setTimeout((function(){Object(s.a)(a.a(l.a.FEED_THREAD_FOLLOWED))}),5e3)):Object(r.a)().show({text:"You won't get notified about new replies in this thread",actionText:"Undo",actionCallback:function(){t.changeSubscriptionMode(!0,"undo_notification")}})}}}},1883:function(t,e,n){"use strict";n.d(e,"l",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"j",(function(){return c})),n.d(e,"i",(function(){return p})),n.d(e,"a",(function(){return u})),n.d(e,"m",(function(){return h})),n.d(e,"g",(function(){return m})),n.d(e,"c",(function(){return g}));var o=function(t){return"Exporting to ."+t+"\u2026"},i="Sorry, export failed. Please try again.",r="Unable to zoom. Object deleted from the board.",s="Unable to update. Object deleted from the board.",a="View-only mode",l="Comment-only mode",d="Loading\u2026",c="Synchronizing. Please wait\u2026",p="Trying to reconnect\u2026",u="Sorry, comment does not exist";function h(t){return"Sorry, you can't paste more than "+t+" symbols"}var m="Thanks for your feedback!",g="Unable to upload. This file type is not supported."},2057:function(t,e){t.exports="#img__notification-bell-16"},2087:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var o=n(0),i=n(618),r=function(){function t(){}return t.processCommentClass=function(e,n,o,i){void 0===i&&(i=!0);if(o){var r=n+"-"+o;e.classList.add(r),i&&t.setCommentLengthAttr(e)}else{r=n+"-true";t.removeCommentClass(e,r,i)}return!0},t.processUpdateCommentClass=function(t,e,n){if(n)t.classList.add(i.u+"-"+n);else{var o=t.getAttribute("class")||"";(o=o.split(/\s+/).filter((function(t){return 0===t.indexOf(i.u+"-")}))).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}},t.removeCommentClass=function(e,n,o){void 0===o&&(o=!0),e&&(e.classList.remove(n),o&&t.setCommentLengthAttr(e))},t.setCommentLengthAttr=function(e){var n=t.getAllCommentsLengthForNode(e);n?e.dataset.commentsLength=n.toString():e.removeAttribute("data-comments-length")},t.getAllCommentsValue=function(t){return Array.from(t.classList).filter((function(t){return t.startsWith(i.d)})).map((function(t){return t.substring(0,t.indexOf("-",i.d.length))}))},t.getAllCommentsLengthForNode=function(e){return t.getAllCommentsValue(e).length},t}(),s=n(547),a=n(239),l=n(58),d=n(411),c=n.n(d),p=n(747),u=n(16),h=c.a.import("parchment").EmbedBlot,m=["height","width"],g=m.concat(i.e),f=c.a.import("blots/text"),b=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.notesModuleInstance=s.a.instance,i.showPlaceholder=function(){i.domNode.classList.add("ql-embed-object-placeholder")},i.hidePlaceholder=function(){i.domNode.classList.remove("ql-embed-object-placeholder")},i.normalizeLocalImageSize=function(){var t=i.getMaxAllowableContentSize(),e=t.width,n=t.height;i.contentNode.width=e,i.contentNode.height=n,i.domNode.style.width=e+"px",i.domNode.style.height=n+"px"},i.getMaxAllowableContentSize=function(){var t=i.notesModuleInstance.editor.getMaxWidthEditorContent(),e=i.domNode.dataset.width,n=i.domNode.dataset.height;return e>t?{width:t,height:Math.round(t/e*n)}:{width:e,height:n}},i.updateContentNodeSrc=function(t){i.contentNode.src=t},i.contentNode=new Image,i.contentNode.style.opacity="0",i.domNode.appendChild(i.contentNode),u.a.msie&&i.domNode.setAttribute("contenteditable","false"),s.a.instance.onPanelOpen.add((function(){Object(a.a)().rightSidebar.resized.add(i.normalizeLocalImageSize)})),s.a.instance.onPanelClose.add((function(){Object(a.a)().rightSidebar.resized.remove(i.normalizeLocalImageSize)})),i}return Object(o.d)(e,t),e.prototype.attach=function(){t.prototype.attach.call(this),this.scroll.emitMount(this)},e.prototype.contentImageOnLoad=function(){this.hidePlaceholder(),this.contentNode.style.opacity="1"},e.prototype.index=function(t,e){return e},e.prototype.position=function(t){return[this.domNode,t]},e.formats=function(t){var e=g.reduce((function(e,n){var i;return t.dataset[n]?Object(o.a)(Object(o.a)({},e),((i={})[n]=t.dataset[n],i)):e}),{});return r.getAllCommentsValue(t).forEach((function(t){e[t]="true"})),e},e.prototype.restore=function(t){var e,n,o=!0,i=t.data,r=p.a.getFirstLevelParent(this);return t.nextSibling?(n=document.createTextNode(i),this.scroll.insertBefore(this.scroll.create(n),r),e={startNode:n,startOffset:i.length}):t.previousSibling?(n=document.createTextNode(i),this.scroll.insertBefore(this.scroll.create(n),r.next||void 0),e={startNode:n,startOffset:i.length}):t.nextSibling||t.previousSibling||(this.next&&this.next instanceof f?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(n),this.next||void 0),e={startNode:n,startOffset:i.length}),o=!1,this.remove()),o&&t.parentNode.removeChild(t),e},e.prototype.update=function(t,e){var n=this,o=null;if(t.forEach((function(t){"characterData"===t.type?o=t.target:"childList"==t.type&&t.target==n.domNode&&(o=t.addedNodes[0])})),o){var i=this.restore(o);i&&(e.range=i)}},e.prototype.format=function(t,e){if(g.indexOf(t)>-1)e?(this.contentNode.setAttribute(t,e),this.domNode.dataset[t]=e,m.indexOf(t)>-1&&(this.domNode.style[t]=e+"px",this.normalizeLocalImageSize())):(this.contentNode.removeAttribute(t),delete this.domNode.dataset[t]);else if(-1!=t.indexOf(i.d))r.processCommentClass(this.domNode,t,e,!1),r.processCommentClass(this.contentNode,t,e);else{if("update"!=t)return;r.processUpdateCommentClass(this.domNode,t,e)}},e.prototype.getContentNode=function(){return this.contentNode},e.prototype.getImageUrl=function(t){var e=this.notesModuleInstance.collab.documentId;return Object(l.e)("/api/v1/documents/"+e+"/resources/"+t+"/files/original")},e.prototype.setBlotSize=function(t,e){this.format("width",Math.round(t)),this.format("height",Math.round(e))},e.register=function(){/Firefox/i.test(navigator.userAgent)&&setTimeout((function(){document.execCommand("enableObjectResizing",!1,!1)}),1)},e}(h);e.b=b},2659:function(t,e,n){"use strict";var o=n(235),i=n(274),r=n(28),s=n(263),a=n(607),l=n(490),d=n(276),c=n(563),p=n(386),u=n(340),h=n(43),m=n(1281),g=n(189),f=n(187),b=n(228),v=n(225),x=n(16),y=u.b(),w=Object(c.a)();e.a=function(t,e,n,c){var u=t.comment,C=t.message&&t.message.text||"",k=0,E=function(n){void 0===n&&(n=!0),t.editMode=!n,u.setCmtMode(!0),n&&(e.find(":focus").blur(),document.activeElement&&document.activeElement.blur()),_()},S=function(e){o.c(e.target,(function(e){return Object(h.m)(e,"stop-textarea-click-"+t.id)||Object(h.m)(e,"emoji-picker")||"mentions"==e.id}))||(t.editor.controller.save(),t.safeApply())},M=o.g(t.message.timestampData);function I(){var n=e.parents(".comment-body__messages"),o=n.scrollTop(),i=n.outerHeight(),r=e.outerHeight(),s=e.position().top,a=t.editor.controller.getScrollTop(),l=t.editor.controller.getLineHeight(),d=o+s;if(d<=o+2*l||d+r>=o+i-2*l){var c=r<i?d:d+a-i/2.5;n.scrollTop(c)}}function _(){document.removeEventListener("click",S,!0)}t.editMode=!1,t.id=i.b(),t.timestamp=M.getTime(),t.editor={},t.isAllowEdit=y().allowEdit,t.isTouchSupported=x.a.isTouchSupported,t.isGuest=function(){return Object(f.a)().userType==b.a.GUEST},t.showEmojiPicker=function(e){Object(m.a)().show(e.currentTarget.getBoundingClientRect()).then((function(e){e&&(t.editMode?t.addEmojiToMessage(e):t.addReactionToMessage(e))}))},t.addEmojiToMessage=function(e){var n=t.editor.controller.getEditor(),o=n.selectionStart,i=t.$parent.addEmojiToMessage(e,o,n.value);t.$parent.isAppleDevice?t.message.text=i:t.editor.controller.change(i),setTimeout((function(){n.focus(),t.editor.controller.scrollIntoView()}),300)},t.addReactionToMessage=function(e){e&&t.message.emojis&&t.message.emojis.some((function(t){return t.name===e.name}))||(u.replyToggleEmoji(t.message,e.name),v.a.comments.commentMessageReactionAdded(u,t.message.id,e.name,u.messages.length),t.scrollToLastMessage()),t.safeApply()},t.scrollToLastMessage=function(){var e=u.messages;e.findIndex((function(e){return e.id===t.message.id}))!=e.length-1||t.message.emojis&&0!==t.message.emojis.length||setTimeout(t.$parent.scrollToMessage,300)},t.toggleEmoji=function(e){u.replyToggleEmoji(t.message,e.name),v.a.comments.commentMessageReactionRemoved(u,t.message.id,e.name,u.messages.length)},t.saveMessage=function(){var e=t.message,n=e.text;C!==n&&(n?u.replyUpdate(e,C):t.$parent.messages.messages.length>1?t.canDelete?u.replyDelete(e):e.text=C:(e.text=C,u.commentDelete())),E()},t.applyMessage=function(){x.a.isTouchSupported&&t.editor.controller.save()},t.cancelMessage=function(e){e.preventDefault(),t.editor.controller.cancel(),E()},t.messageFocused=function(){return t.editor.controller.getEditor().selectionStart=999999,void(k=setTimeout(I,200))},t.messageChanged=function(){return I()},t.deleteMessage=function(){E(),g.deleteCommentMessage(),1==t.$parent.messages.messages.length?u.commentDelete():u.replyDelete(t.message)},t.edit=function(){C=t.message.text,E(!1),x.a.mobile||t.editor.controller.edit(),t.safeApply(),x.a.mobile||document.addEventListener("click",S,!0),g.editComment(),Object(m.a)().hide(),t.scrollToLastMessage()},p.a(t.message.senderId?t.message.senderId.toString():"0").then((function(e){var n=s.i(e.name);t.userName=n,t.userPicture=e.picture.medium||r.o,t.commentA11yText=function(t,e,n,o){var i=t.replace(l.e.unicode,(function(t){return s.i(t)})).replace(l.e.mentions,(function(t){if(-1!=t.search(l.e.userMention)){var e=t.substring(2,t.length-1),n=w.getMentionById(e);return n&&n.name?Object(d.e)(n.name):"unknown"}for(var o in l.b){var i=Object(l.c)(l.b[o]);if(-1!=t.search(i))return o}return"unknown"})),r=Object(a.a)(e,"DD MMM, HH:mm",", HH:mm")+", "+i;if(o&&!n)return o+", "+r;return r}(t.message.text,t.message.timestamp,t.repeat,n),t.safeApply()})).catch((function(){})),t.$on("$destroy",(function(){t.editor.controller&&t.editMode&&t.editor.controller.save(),_(),clearTimeout(k)}))}},2660:function(t,e,n){var o=n(2661);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},2661:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".mentions {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99999;\n  transform: translate(-400px, 0);\n  width: 310px;\n  overflow: auto;\n  padding: 10px 0;\n  min-height: 46px;\n  max-height: 384px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  box-shadow: 1px 4px 8px rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n}\n.mentions::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.mentions::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.mentions::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.mentions--empty {\n  overflow: hidden;\n}\n.mentions--empty .mentions__empty,\n.mentions--guest .mentions__guest,\n.mentions--not-participant .mentions__not-participant {\n  display: block;\n}\n.mentions--comment {\n  width: 270px;\n}\n.mentions--comment-reply {\n  width: 320px;\n}\n.mentions--chat {\n  width: 280px;\n  right: 20px;\n}\n.mentions--chat.mentions--not-participant {\n  top: -20px;\n  height: auto !important;\n}\n.mentions--mouseenter .mentions__mention--selection {\n  background-color: inherit;\n}\n.mentions--single .mentions__mention--custom {\n  padding: 15px 0;\n  margin-top: inherit;\n}\n.mentions--single .mentions__mention--custom:before {\n  content: '';\n}\n.mentions__mention {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  cursor: pointer;\n  padding: 8px 15px 8px 20px;\n  position: relative;\n  box-sizing: border-box;\n}\n.mentions__mention--selection .mentions__mention-name,\n.mentions__mention--selection .mentions__mention-email {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.mentions__mention--custom {\n  padding: 12px 15px 12px 0;\n}\n.mentions__mention--custom + .mentions__mention--normal {\n  margin-top: 16px;\n}\n.mentions__mention--custom + .mentions__mention--normal:before {\n  content: ' ';\n  height: 1px;\n  width: 100%;\n  background: rgba(245, 245, 247, 1);\n  background: var(--indigo50);\n  position: absolute;\n  top: -9px;\n  left: 0;\n}\n.mentions__mention--custom .mentions__mention-picture {\n  display: none;\n}\n.mentions__mention--custom .mentions__mention-name,\n.mentions__mention--custom .mentions__mention-email {\n  float: left;\n}\n.mentions__mention--custom .mentions__mention-name {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  padding-left: 20px;\n}\n.mentions__mention--custom .mentions__mention-email {\n  margin: 2px 0 0 6px;\n}\n.mentions__mention-picture {\n  width: 24px;\n  height: 24px;\n  margin-right: 15px;\n}\n.mentions__mention-picture img {\n  border: 0;\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n}\n.mentions__mention-name,\n.mentions__mention-email {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n}\n.mentions__mention-name {\n  -ms-flex-negative: 0.3;\n      flex-shrink: 0.3;\n}\n.mentions__mention-email {\n  margin-left: 8px;\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n  padding-left: 8px;\n  border-left: solid 1px rgba(235, 235, 239, 1);\n  border-left: solid 1px var(--indigo200);\n}\n.mentions__empty,\n.mentions__guest,\n.mentions__not-participant {\n  display: none;\n  padding: 5px 15px 0;\n  line-height: 20px;\n  text-align: center;\n}\n.mentions__guest {\n  padding-top: 15px;\n}\n.mentions.mobile {\n  left: -18px;\n  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);\n  max-height: calc(100vh - 100px);\n  padding: 0;\n}\n.mentions.mobile.mentions--empty {\n  display: none;\n}\n.mentions.mobile.mentions--comment-reply {\n  width: 100%;\n}\n.mentions.mobile .mentions__mention {\n  height: 48px;\n  background: none;\n  padding: 4px 10px 0 10px;\n}\n.mentions.mobile .mentions__mention-name,\n.mentions.mobile .mentions__mention-email {\n  line-height: 18px;\n}\n.mentions.mobile .mentions__mention-name {\n  font-size: 14px;\n  font-weight: bold;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.mentions.mobile .mentions__mention-email {\n  font-size: 14px;\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n}\n.mentions.mobile .mentions__mention-picture {\n  width: 38px;\n  height: 38px;\n}\n.mentions.mobile .mentions__mention-picture img {\n  width: 38px;\n  height: 38px;\n  min-width: 38px;\n  max-width: 38px;\n  min-height: 38px;\n  max-height: 38px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .mentions.mobile .mentions__mention-picture img {\n    width: auto;\n    height: auto;\n  }\n}\n.mentions.mobile .mentions__mention--custom {\n  padding: 0;\n  margin: 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  box-shadow: 0 -1px 0 0 #e5e5e5;\n}\n.mentions.mobile .mentions__mention--custom:before {\n  content: none;\n}\n.mentions.mobile .mentions__mention--custom .mentions__mention-name {\n  padding-left: 10px;\n}\n",""])},2662:function(t,e){t.exports='<div\n\tid="mentions"\n\tclass="mentions"\n\tng-show="opened"\n\tno-prevent-default="true"\n\tng-class="{\n            \'mentions--guest\': !isRegular(),\n            \'mentions--empty\': empty && isParticipant(),\n            \'mentions--single\': mentions.length == 1,\n            \'mentions--not-participant\': isRegular() && !allowMentions()\n        }"\n>\n\t<div\n\t\tclass="mentions__mention"\n\t\tng-repeat="mention in mentions track by $index"\n\t\thm-tap="onMentionClick(mention)"\n\t\tng-class="{\n            \'mentions__mention--selection\': selection == $index,\n            \'mentions__mention--custom\': mention.id == \'custom\',\n            \'mentions__mention--normal\': mention.id != \'custom\'\n         }"\n\t\tng-mousemove="onMouseMove($index)"\n\t>\n\t\t<div class="mentions__mention-picture">\n\t\t\t<img alt="" width="24" height="24" ng-src="{{mention.picture}}" />\n\t\t</div>\n\t\t<div\n\t\t\tclass="mentions__mention-name"\n\t\t\tng-bind-html="mention.id == \'custom\' ? \'@\' + mention.displayName : mention.name"\n\t\t></div>\n\t\t<div class="mentions__mention-email" ng-bind-html="mention.email"></div>\n\t</div>\n\n\t<div class="mentions__empty">\n\t\tTo mention someone,<br />\n\t\t<span class="btn-link" hm-tap="onShareClick()">invite</span> them to the board\n\t</div>\n\t<div class="mentions__guest">\n\t\t<span class="btn-link" hm-tap="onLoginClick()">Log in</span> to mention board participants.\n\t</div>\n\t<div\n\t\tclass="mentions__not-participant"\n\t\tng-bind-html="\'Sorry, guest users cannot mention others. Please ask the board owner to&nbsp;invite you.\'"\n\t></div>\n</div>\n'},2663:function(t,e,n){"use strict";(function(t){var o=n(0),i=n(16),r=n(235),s=n(187),a=n(228),l=n(359),d=n(345),c=n(211),p=n(1282),u=n(340),h=n(43),m=n(189),g=n(2770),f=n(209),b=n(2007),v=n(283),x=n(292),y=n(184),w=n(1298),C=n(240),k=n(27),E=n(589),S=n(753),M=n(224),I=n(252),_=n(280),q=n(337),O=n(490),j=n(225),T=n(231),A=n(1846),L=n(906),D=n(276),N=l.b(),z=s.b(),P=c.b(),R=u.b(),B=function(){function e(t,e,n){var o=this;function s(){t.denyScrollToMessage||n((function(){var e,n=t.messages.$element,o=t.comment.lastReadableMessage;-1!=o?(t.comment.clearLastReadableMessage(),e=n.find(".comment-message").eq(o)):e=i.a.mobile?n.find(".reply-button"):n.find(".comment-message:last"),e.length&&e[0].scrollIntoView(70)}))}this.$scope=t,this.ignoreReconnection=!1,this.isTipVisible=!1,this.addReplyInProgress=!1,this.replyTextareaClick=function(t){!r.c(t.target,(function(t){return Object(h.m)(t,"stop-reply-click")}))&&o.$scope.messages.any()&&(o.$scope.comment.lastReplyingMessage||o.$scope.cancelReplyMessage(),document.removeEventListener("click",o.replyTextareaClick,!0))},N().setFocus(d.a.COMMENT),this.initUserData(),this.initMessagesData(),this.initReplyData(),t.getPlaceholder=function(){return t.comment.resolved?i.a.mobile?"Reply will re-open the discussion":"Reply to re-open the discussion":i.a.mobile?t.messages.any()?"Leave a reply. Use @ to mention.":"Leave a comment":t.messages.any()?"Leave a reply. Use @ to mention.":"Add a comment. Use @ to mention."},t.getReplyBtnText=function(){return t.messages.any()?"Reply":"Leave a comment"},t.resolved=function(){return t.comment.resolved},t.canResolve=function(){return t.comment.canResolve()},t.toggleResolve=function(){t.comment.toggleResolved(),j.a.comments.commentStateChanged(t.comment)},t.setCommentColor=function(e){j.a.comments.commentColorChanged(t.comment,e),t.colors.click(e),R().setColor(e)},t.messages.messagesChanged=function(e){var n=!this.messages||this.messages.length!==e.length;this.format(e),t.safeApply(),t.fixScreenPosition&&t.fixScreenPosition(),n&&s()},t.comment.cmtMessagesChanged.add(t.messages.messagesChanged,t.messages),t.comment.cmtLastReadableMessageChanged.add(s),t.tip={visible:!1},this.tryToShowFirstUnreadThreadTip(t.comment),t.setReplyMode=function(){t.reply.replying=!0,document.addEventListener("click",o.replyTextareaClick,!0)},t.applyReplyMessage=function(){t.reply.controller.save()},t.onReplyMessageChanged=function(e){t.comment.lastReplyingMessage=e,t.reply.opened||(t.reply.opened=!!e.length,n((function(){t.fixScreenPosition&&t.fixScreenPosition(),p.b().reopen()}),115))},t.tryRemove=function(){t.messages.any()||t.comment.commentDelete(!1)},t.blurActiveElement=function(){document.activeElement&&document.activeElement.blur()},t.addReplyMessage=function(){if(!o.addReplyInProgress){o.addReplyInProgress=!0;var e=t.reply.message;o.checkMessage(e).then((function(){return o.checkAuth(e)})).catch((function(){return t.tryRemove(),Promise.reject()})).then((function(){return o.checkCustomMentionsSize()})).then((function(){return o.addReplyMessageStep2(e)})).then((function(){return t.comment.setCmtMode(!0)})).catch((function(){return o.$scope.focusComment()})).then((function(){o.addReplyInProgress=!1,t.comment.lastReplyingMessage=""}))}},t.addReplyMessageThroughButton=function(){var e=o.$scope.comment.lastReplyingMessage;o.$scope.reply.message=e,o.$scope.reply.opened=!!e,o.$scope.reply.replying=!!e,t.reply.controller.save()},t.focusComment=function(){setTimeout((function(){try{t.reply.controller.view(),t.reply.$element.find("textarea").click()}catch(t){}}),200)},t.cancelReplyMessage=function(){t.reply.controller&&t.reply.controller.cancel(),t.endReplyMessage(),t.tryRemove()},t.endReplyMessage=function(){t.reply.message="",t.reply.opened=!1,t.reply.replying=!0,t.comment.lastReplyingMessage="",t.safeApply()},t.followState=Object(A.a)(t.comment),t.$on("$destroy",(function(){t.reply.controller&&!o.ignoreReconnection&&t.reply.controller.save(!1),t.comment.lastReplyingMessage="",t.comment.cmtLastReadableMessageChanged.remove(t.scrollToMessage),t.comment.cmtMessagesChanged.remove(t.messages.messagesChanged,t.messages),t.comment.resolved&&!Object(E.a)().showResolved&&(Object(E.a)().tryShowCollaborationTools(),R().commentVisibilityChanged(t.comment,!1)),N().setFocus(d.a.CANVAS)})),t.scrollToMessage=s,t.isAppleDevice=i.a.ios||i.a.mac,t.addEmojiToMessage=function(t,e,n){var o=Object(D.j)(n,0,e),i=Object(D.j)(n,e);return Object(L.b)(o+":"+t.name+":"+i)}}return e.prototype.isNoNameUser=function(){var t=z().userInfo;return z().userType==a.a.GUEST||t.temporary&&!t.storedName},e.prototype.checkMessage=function(t){return t?Promise.resolve():Promise.reject(void 0)},e.prototype.checkAuth=function(t){var e=this;return this.isNoNameUser()?(this.ignoreReconnection=!0,this.authUser(t).then((function(){e.ignoreReconnection=!1}))):Promise.resolve()},e.prototype.checkCustomMentionsSize=function(){var t=this.$scope.reply.controller.getParseResult();if(t&&t.customMentionsSizes){var e=0,n=[];for(var o in t.customMentionsSizes){var i=t.customMentionsSizes[o]||0;i>0&&(e+=i,n.push(O.b[o]))}return e>5?new Promise((function(t,o){var i={title:e+" people will be notified",text:"By using <b>"+n.join(", ")+"</b> mention"+(n.length>0?"s":"")+" you are about to notify "+e+" people who have access to this board. Are you sure?",info:!0,submitButton:{caption:"Send it now"},cancelButton:{caption:"Edit message"},enableSubmitByEnter:!0},r=P().show(Object(q.a)(i));r.submitted.addOnce((function(){m.massMentionConfirmationModal(!0),t(void 0)})),r.canceled.addOnce((function(){m.massMentionConfirmationModal(!1),o()}))})):Promise.resolve()}return Promise.resolve()},e.prototype.addReplyMessageStep2=function(t){t?(this.$scope.messages.any()?this.$scope.comment.replyCreate(t):this.$scope.comment.commentCreateOnServer(t),this.$scope.focusComment(),this.tryShowReplyTips()):this.$scope.tryRemove(),this.$scope.endReplyMessage()},e.prototype.authUser=function(e){var n=t.Deferred();if(this.isNoNameUser()){var o=P().show(Object(g.a)());o.canceled.addOnce(n.reject),o.submitted.addOnce(n.resolve)}else n.resolve(e);return n.promise()},e.prototype.initUserData=function(){var t=z().myUserId;this.$scope.myUserIdStr=t&&t.toString()||""},e.prototype.initMessagesData=function(){this.$scope.messages={$element:null,messages:[],format:function(e){this.messages=e.map((function(e){return t.extend(e,{senderIdStr:e.senderId?e.senderId.toString():"0",fromNow:T(r.g(e.timestampData)).format("DD MMM HH:mm")})}))},any:function(){return!!this.messages.length}},this.$scope.messages.format(this.$scope.comment.messages)},e.prototype.initReplyData=function(){var t=this.$scope.comment.lastReplyingMessage;this.$scope.reply={message:t,opened:!!t,replying:!!t}},e.prototype.getSlackAppTipConfig=function(){var t=this;return{type:m.TipsStat.TipType.SlackApp,text:'<b>Quick Tip:</b> How to receive mentions in responses instantly? <span class="rtb-link rtb-link--primary">Get our Slack App</span>',icon:n(2667),onClick:function(){m.TipsStat.clickTip(m.TipsStat.TipType.SlackApp,m.TipsStat.TipContent.CommentWidget),Object(w.a)(!1)},onClose:function(){m.TipsStat.closeTip(m.TipsStat.TipType.SlackApp,m.TipsStat.TipContent.CommentWidget),t.$scope.tip.visible=!1}}},e.prototype.tryShowReplyTips=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.$scope.tip.visible=!1,[4,this.tryToShowInviteTriggerTip()];case 1:return t.sent()?[2]:[4,this.tryToShowFirstReplyTip()];case 2:return t.sent()?[2]:[4,this.tryToShowFirstMentionTip()];case 3:return t.sent()||this.tryToShowFirstAutoFollowTip(this.$scope.comment),[2]}}))}))},e.prototype.tryToShowFirstReplyTip=function(){return Object(o.b)(this,void 0,Promise,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.checkShouldShowSlackTip(f.a.COMMENT_CREATED)];case 1:return t.sent()?(this.showSlackTip(f.a.COMMENT_CREATED),[2,!0]):[2,!1]}}))}))},e.prototype.tryToShowInviteTriggerTip=function(){return Object(o.b)(this,void 0,Promise,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return[4,this.checkShouldShowInviteTriggerTip()];case 1:return t.sent()?(this.showInviteTriggerTip(),[2,!0]):[2,!1]}}))}))},e.prototype.tryToShowFirstMentionTip=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,e,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return t=!1,[4,this.checkShouldShowSlackTip(f.a.COMMENT_WITH_MENTION_CREATED)];case 1:return o.sent()&&(e=this.$scope.reply.controller,(n=e.getParseResult())&&n.hasMentions&&(this.showSlackTip(f.a.COMMENT_WITH_MENTION_CREATED),t=!0)),[2,t]}}))}))},e.prototype.tryToShowFirstUnreadThreadTip=function(t){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.e)(this,(function(n){switch(n.label){case 0:return[4,this.checkShouldShowSlackTip(f.a.UNREAD_THREAD_OPENED)];case 1:return n.sent()&&(e=z().userInfo.id,Object(b.c)(t.openTime,t.messages,e)>0&&this.showSlackTip(f.a.UNREAD_THREAD_OPENED)),[2]}}))}))},e.prototype.tryToShowFirstAutoFollowTip=function(t){return Object(o.b)(this,void 0,void 0,(function(){var e,i=this;return Object(o.e)(this,(function(o){return this.checkCanShowTip(f.a.EXISTING_THREAD_REPLY)&&t.creatorId.toString()!==z().userInfo.id&&(e={type:m.TipsStat.TipType.FollowThread,text:'You\'re following this thread and will get notified about new replies.\n\t\t\t\t\t\t<a class="rtb-link rtb-link--primary" href="https://help.miro.com/hc/en-us/articles/360017730873-Comments/?utm_source=tip&utm_medium=comment-widget&utm_campaign=follow-thread&utm_content=learn-more" target="_blank">Learn more</a>',icon:n(2057),iconClass:"comment-message__picture--small",onClick:function(){m.TipsStat.clickTip(m.TipsStat.TipType.FollowThread,m.TipsStat.TipContent.CommentWidget)},onClose:function(){m.TipsStat.closeTip(m.TipsStat.TipType.FollowThread,m.TipsStat.TipContent.CommentWidget),i.$scope.tip.visible=!1}},this.showTip(e,f.a.EXISTING_THREAD_REPLY)),[2]}))}))},e.prototype.checkShouldShowSlackTip=function(t){return Object(o.b)(this,void 0,Promise,(function(){var e;return Object(o.e)(this,(function(n){switch(n.label){case 0:return(e=this.checkCanShowTip(t))?[4,y.a.integrations.get()]:[3,4];case 1:return n.sent().SLACK?(z().achievements.open(t),e=!1,[3,4]):[3,2];case 2:return[4,y.a.boards.selectById(M.a.getInfo().id).get({fields:"account{usersNumber}"}).then((function(t){t.account.usersNumber<2&&(e=!1)})).catch((function(){return e=!1}))];case 3:n.sent(),n.label=4;case 4:return[2,e]}}))}))},e.prototype.showSlackTip=function(t){var e=this.getSlackAppTipConfig();this.showTip(e,t),m.TipsStat.showTip(e.type,m.TipsStat.TipContent.CommentWidget)},e.prototype.checkShouldShowInviteTriggerTip=function(){return Object(o.b)(this,void 0,Promise,(function(){return Object(o.e)(this,(function(t){switch(t.label){case 0:return this.checkCanShowTip(f.a.INVITE_TO_ACCOUNT_COMMENT_TIP)?[4,Object(S.b)({showWithTutorials:!0,showAfterTimeGap:!1})]:[2,!1];case 1:return[2,t.sent()]}}))}))},e.prototype.getInviteTriggerTipConfig=function(){var t=this;return{type:m.TipsStat.TipType.InviteTrigger,text:'<span class="rtb-link rtb-link--primary">Invite teammates</span> to discuss ideas and work on your board together.',icon:n(2668),onClick:function(){Object(I.a)((function(){return Object(_.a)()})).then((function(t){return t.showShareBoardModal({boardId:M.a.getInfo().id,from:"comment"})})),m.clickSharingTip("comment","invite",M.a.getInfo().account.id,M.a.getInfo().id)},onClose:function(){t.$scope.tip.visible=!1,m.clickSharingTip("comment","cross",M.a.getInfo().account.id,M.a.getInfo().id)}}},e.prototype.showInviteTriggerTip=function(){var t=this.getInviteTriggerTipConfig();this.showTip(t,f.a.INVITE_TO_ACCOUNT_COMMENT_TIP),m.showSharingTip("comment",M.a.getInfo().account.id,M.a.getInfo().id)},e.prototype.checkCanShowTip=function(t){return Object(C.a)().getMode()!==k.g.EMBED&&i.a.desktop&&z().userType===a.a.REGULAR&&!z().achievements.isOpened(t)&&Object(x.a)(v.b.lastCommentWidgetTipCloseDate)},e.prototype.showTip=function(t,e){this.$scope.tip=t,this.$scope.tip.visible=!0,this.$scope.safeDigest(),this.$scope.scrollToMessage(),Object(x.O)(v.b.lastCommentWidgetTipCloseDate),z().achievements.open(e)},e.$inject=["$scope","$element","$timeout"],e}();e.a=B}).call(this,n(193))},2664:function(t,e,n){var o=n(2665);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},2665:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".login-or-enter-name-modal .enter-name {\n  width: 100%;\n  padding-left: 34px;\n}\n.login-or-enter-name-modal .icon {\n  float: left;\n  margin: -32px 0 0 10px;\n  opacity: 0.2;\n}\n",""])},2666:function(t,e){t.exports='<rtb-modal class="rtb-modal--center rtb-modal--medium login-or-enter-name-modal">\n\t<rtb-modal-close-button hm-tap="modal.cancel()"></rtb-modal-close-button>\n\t<div class="rtb-modal-container__content rtb-modal-content">\n\t\t<div class="rtb-modal-content__header rtb-modal-header">\n\t\t\tPlease <span class="rtb-link rtb-link--primary" hm-tap="modal.login()">log in</span> or enter your name\n\t\t</div>\n\t\t<div class="rtb-modal-content__body rtb-modal-body">\n\t\t\t<div class="rtb-modal-body__row">\n\t\t\t\t<input\n\t\t\t\t\tclass="rtb-input rtb-input--primary enter-name focus-target"\n\t\t\t\t\tplaceholder="Enter name"\n\t\t\t\t\tng-model="modal.name"\n\t\t\t\t/>\n\t\t\t\t<icon icon-name="\'application--profile\'"></icon>\n\t\t\t</div>\n\t\t\t<div class="rtb-modal-body__row">\n\t\t\t\t<rtb-checkbox\n\t\t\t\t\tlabel="\'Remember me\'"\n\t\t\t\t\tname="\'rememberMeAfterRegCb\'"\n\t\t\t\t\tchecked="modal.rememberMe"\n\t\t\t\t\tng-if="modal.isGuest"\n\t\t\t\t></rtb-checkbox>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="rtb-modal-content__actions rtb-modal-actions">\n\t\t\t<button\n\t\t\t\tclass="rtb-btn rtb-btn--primary rtb-btn--medium"\n\t\t\t\tng-disabled="modal.waiting || modal.name.trim() == \'\'"\n\t\t\t\thm-tap="modal.submit()"\n\t\t\t>\n\t\t\t\tDone\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</rtb-modal>\n'},2667:function(t,e){t.exports="#application__slack-18"},2668:function(t,e){t.exports="#application__share-to-other"},2673:function(t,e,n){"use strict";(function(t){var o=n(242),i=n(853),r=n(16),s="rtb-recent-emoji",a=function(){function e(e,n){this.$scope=e,this.$element=n,this.onDestroyWrapper=this.onDestroy.bind(this),this.loadEmojiAsyncWrapper=this.loadEmojiAsync.bind(this),this.onVisibilityChangedWrapper=this.onVisibilityChanged.bind(this),this.categories=[],this.searchValue="",this.recentChanged=!1,this.asyncId=0,t.log("emoji","[EmojiPickerController] constructor",this),this.loadEmoji(),this.loadRecent(),e.$on("$destroy",this.onDestroyWrapper),e.$watch("picker.visibility",this.onVisibilityChangedWrapper)}return e.prototype.onItemClicked=function(t){this.clicked||(this.clicked=!0,this.addRecent(t),this.onSelected({emoji:t}))},e.prototype.clearSearch=function(){this.searchValue="",this.categories.forEach((function(t){t.items.forEach((function(t){t.hidden=!1})),t.hidden=!1}))},e.prototype.onSearchChanged=function(){var t=this.searchValue.trim().toLowerCase();this.categories.forEach((function(e){var n=!0;e.items.forEach((function(e){var o=-1==e.words.indexOf(t);e.hidden=o,n=n&&o})),e.hidden=n}))},e.prototype.loadEmoji=function(){t.log("emoji","[EmojiPickerController] loadEmoji"),this.categories=[i.a[0],i.a[1]],this.asyncId=setTimeout(this.loadEmojiAsyncWrapper,0,2)},e.prototype.loadEmojiAsync=function(e){t.log("emoji","[EmojiPickerController] loadEmojiAsync",e),e<i.a.length&&(this.categories.push(i.a[e]),this.asyncId=setTimeout(this.loadEmojiAsyncWrapper,0,++e),this.$scope.$digest())},e.prototype.addRecent=function(t){var e=this.categories[0].items,n=e.indexOf(t);-1!=n&&e.splice(n,1),e.length>=35&&e.pop(),e.unshift(t),this.recentChanged=!0},e.prototype.loadRecent=function(){t.log("emoji","[EmojiPickerController] loadRecent");var e=o.getItem(s);if(e){var n=e.split(","),r=Math.min(n.length,35);this.categories[0].items=[];for(var a=0;a<r;a++){var l=i.b(n[a]);l&&this.categories[0].items.push(l)}}},e.prototype.saveRecent=function(){t.log("emoji","[EmojiPickerController] saveRecent"),this.recentChanged&&o.isSupported()&&(this.recentChanged=!1,o.setItem(s,this.categories[0].items.map((function(t){return t.name})).join()))},e.prototype.onVisibilityChanged=function(e){t.log("emoji","[EmojiPickerController] onVisibilityChanged",e),e?(this.clearSearch(),this.scrollIntoView(),this.setSearchFocus()):void 0!==e&&this.saveRecent(),this.clicked=!1},e.prototype.onDestroy=function(){t.log("emoji","[EmojiPickerController] onDestroy"),this.saveRecent(),this.asyncId&&clearTimeout(this.asyncId)},e.prototype.scrollIntoView=function(){t.log("emoji","[EmojiPickerController] scrollIntoView"),this.$element.find("#emoji-picker-input").scrollIntoView({duration:0})},e.prototype.setSearchFocus=function(){t.log("emoji","[EmojiPickerController] setSearchFocus"),r.a.mobile||r.a.winDesktopAppWithTouch||setTimeout((function(){document.getElementById("emoji-picker-search").focus()}),50)},e.$inject=["$scope","$element"],e}();e.a=a}).call(this,n(54))},2674:function(t,e,n){var o=n(2675);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},2675:function(t,e,n){var o=n(229);(t.exports=n(177)(!1)).push([t.i,".emoji-icon {\n  image-rendering: optimizeQuality;\n  font-size: inherit;\n  position: relative;\n  display: inline-block;\n  line-height: normal;\n  vertical-align: middle;\n  background-image: url("+o(n(1468))+");\n  background-repeat: no-repeat;\n  background-size: 4100%;\n  width: 24px;\n  height: 24px;\n}\n.emoji-icon--16 {\n  width: 16px;\n  height: 16px;\n  margin-right: 3px;\n}\n.emoji-icon--offset-top {\n  margin-top: -2px;\n}\n.emoji-icon--offset-left {\n  margin-left: 6px;\n}\n.emoji-picker {\n  height: 420px;\n  position: relative;\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  background-color: #fff;\n  box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.12);\n  z-index: 100000;\n}\n.emoji-picker .emoji-input-container {\n  display: -ms-flexbox;\n  display: flex;\n  height: 40px;\n  padding-top: 10px;\n  margin-right: 16px;\n}\n.emoji-picker .emoji-input-container .emoji-search-input {\n  width: 100%;\n  border-width: 0;\n  border-bottom: solid 1px #dddddd;\n}\n.emoji-picker .emoji-input-container .emoji-search-input:focus {\n  border-color: #6396ff;\n}\n.emoji-picker .emoji-input-container .emoji-input-clear {\n  width: 32px;\n  font-size: 18px;\n  height: 40px;\n  margin-left: -22px;\n  margin-right: -10px;\n  text-align: center;\n  line-height: 40px;\n}\n.emoji-picker .emoji-icons-list {\n  max-height: 400px;\n  width: 300px;\n  padding: 0 0 20px 20px;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n}\n.emoji-picker .emoji-icons-list::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.emoji-picker .emoji-icons-list::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.emoji-picker .emoji-icons-list::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.emoji-picker .emoji-icons-list .emoji-cat-container .emoji-cat-name-title {\n  padding: 12px 0 4px 0;\n  width: 100%;\n}\n.emoji-picker .emoji-icons-list .emoji-cat-container .emoji-icon-container {\n  width: 40px;\n  height: 40px;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n  cursor: pointer;\n}\n.emoji-picker .emoji-icons-list .emoji-cat-container .emoji-icon-container:hover {\n  background: #eeeeee;\n}\n.emoji-picker .emoji-cats {\n  display: none;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  padding: 0 8px;\n  border-bottom: solid 1px #e5e5e5;\n}\n.emoji-picker .emoji-cats .emoji-cat-name {\n  padding: 0 8px;\n  height: 46px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  margin-bottom: -1px;\n  border: solid transparent;\n  border-width: 2px 0;\n}\n.emoji-picker .emoji-cats .emoji-cat-name .emoji-cat-icon {\n  opacity: 0.4;\n}\n.emoji-picker .emoji-cats .catCurrent {\n  border-bottom-color: #6396ff;\n}\n",""])},2676:function(t,e){t.exports='<div class="emoji-picker" no-prevent-default="true" data-autotest-id="emoji-picker">\n\t<div class="emoji-icons-list" no-prevent-default="true">\n\t\t<div class="emoji-input-container" id="emoji-picker-input">\n\t\t\t<input\n\t\t\t\tclass="emoji-search-input"\n\t\t\t\tid="emoji-picker-search"\n\t\t\t\tplaceholder="Search"\n\t\t\t\tng-model="picker.searchValue"\n\t\t\t\tng-change="picker.onSearchChanged()"\n\t\t\t/>\n\n\t\t\t<div class="emoji-input-clear" hm-tap="picker.clearSearch()" ng-show="picker.searchValue">\xd7</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass="emoji-cat-container"\n\t\t\tng-repeat="category in picker.categories track by category.name"\n\t\t\tng-hide="category.hidden"\n\t\t>\n\t\t\t<div class="emoji-cat-name-title" ng-bind="category.nameUpper"></div>\n\n\t\t\t<div\n\t\t\t\tclass="emoji-icon-container"\n\t\t\t\tng-repeat="item in category.items track by item.name"\n\t\t\t\thm-tap="picker.onItemClicked(item)"\n\t\t\t\tng-hide="item.hidden"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass="emoji-icon"\n\t\t\t\t\tng-style="{\'background-position\': (-item.bgX * 0.375) + \'px \' + (-item.bgY * 0.375)+ \'px\'}"\n\t\t\t\t\tdata-autotest-id="emoji-picker__emoji-icon"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},2701:function(t,e,n){t.exports=n.p+"src/components/web/common/rate/img/emoji-rate.b0607b.png"},2770:function(t,e,n){"use strict";var o=n(0),i=n(206),r=n(187),s=n(189),a=n(194),l=n(181),d=n(261),c=n(228),p=n(184),u=n(288),h=n(290),m=r.b(),g=a.b(),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rememberMe=!0,e.name="",e.waiting=!1,e.isGuest=m().userType===c.a.GUEST,e}return Object(o.d)(e,t),e.prototype.login=function(){s.clickedLoginInComment(),Object(u.a)().dispatch(Object(h.g)({openBoardId:g().getBoardId()}))},e.prototype.submit=function(){var e=this;this.name.trim()&&(this.waiting=!0,this.isGuest?(m().registerAsTemporaryUser(this.name,this.rememberMe).then((function(){return g().disconnect(),g().reconnect(),new Promise((function(t){l.onCanvasLoaded.addOnce((function(){t()}))}))})).then((function(){return t.prototype.submit.call(e)})).catch((function(){return t.prototype.cancel.call(e)})),s.addGuestName()):m().userInfo.temporary&&p.a.profile.set({name:this.name}).then((function(){return m().updateProfile()})).then((function(){return t.prototype.submit.call(e)})).catch((function(){return t.prototype.cancel.call(e)})))},Object(o.c)([Object(d.a)("LoginOrEnterNameMC.submit")],e.prototype,"submit",null),e}(i.b),b=n(205),v=n(202),x=n(217),y=n(230),w=n(433),C=n(317);e.a=function(t){return void 0===t&&(t={}),Object(C.a)(),Object(x.a)(),Object(y.a)(),Object(w.a)(),n(2664),b.b(v.a.LOGIN_OR_ENTER_NAME,f,n(2666),Object(o.a)({enableSubmitByEnter:!0},t))}},2771:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(190),i=n(43),r=function(){function t(t){var e=this;this.showMore=!1,this.scope=t,this.options=this.scope.options.slice(),this.options.filter((function(t){return t.value===e.scope.rate.value})).forEach((function(t){return t.checked=!0})),this.scope.rating=this.options.find((function(t){return t.checked})),this.scope.$watch("rating",this.rateChanged.bind(this))}return Object.defineProperty(t.prototype,"placeholder",{get:function(){return"Tell us more..."},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.scope.showGratitude?"Thank you!":this.scope.header},enumerable:!1,configurable:!0}),t.prototype.initDomElements=function(t){var e=this,n=this.onCommentChange.bind(this);this.$textarea=t.find(".rate-input-wrapper textarea"),this.$textarea.on("input",n),this.scope.$on("$destroy",(function(){return e.$textarea.off("input",n)})),this.$textarea.val(""),this.baseScrollHeight=this.$textarea.prop("scrollHeight"),this.$textarea.val(this.scope.rate.comment),this.fitTextAreaHeight()},t.prototype.rateChanged=function(t,e){var n=this;t&&(t!==e&&(this.scope.rate.value=this.scope.rating.value),this.showMore=!0,setTimeout((function(){return n.$textarea.focus()}),20))},t.prototype.submit=function(t){t.preventDefault(),t.stopPropagation(),this.scope.submitted()},t.prototype.onCommentChange=function(t){this.fitTextAreaHeight()},t.prototype.fitTextAreaHeight=function(){Object(i.e)(this.$textarea.get(0),this.baseScrollHeight)},t.$inject=["$scope"],t}(),s=n(182),a=n(3799),l=n(2701);function d(){return(new Image).src=l,n(3800),Object(s.b)().directive("rating",c),a}function c(){return Object(o.a)({restrict:"E",template:a,controllerAs:"ctrl",controller:r,scope:{header:"@",options:"<",showGratitude:"<?",rate:"=",submitted:"&",closed:"&?"},link:function(t,e,n,o){o.initDomElements(e)}})}},279:function(t,e,n){"use strict";n.d(e,"g",(function(){return u})),n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return y})),n.d(e,"f",(function(){return k})),n.d(e,"e",(function(){return S})),n.d(e,"b",(function(){return v.a})),n.d(e,"c",(function(){return v.b}));var o=n(0),i=n(180),r=n.n(i),s=n(185),a=n.n(s),l=n(308),d=n(630),c=n.n(d),p=n(298),u=r.a.memo((function(t){var e=t.className;return r.a.createElement(l.a,Object(o.a)({},t,{className:a()(c.a.userPictureClass,e),fallbackPictureUrl:p}))})),h=n(201),m=n(16),g=n(298);n(632);var f=0,b=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isErrorLoading:!1,isDoubleError:!1,svgId:f+=1},n}return Object(o.d)(e,t),e.prototype.onError=function(){this.setState((function(t){return{isErrorLoading:!0,isDoubleError:t.isErrorLoading}}))},e.prototype.render=function(){var t=this.props,e=t.dataAutoTestId,n=t.pictureUrl,o=t.pictureOpacity,i=void 0===o?1:o,s=t.color,a=t.colorOverlayOpacity,l=void 0===a?0:a,d=t.clipPathId,c=this.state,p=c.isErrorLoading,u=c.isDoubleError,h=.4613*100+"%",f=.0387*100+"%",b="84.52%",v="colorUserPicture__image-"+c.svgId,x=p?g:n;return r.a.createElement("div",{className:"color-user-picture","data-auto-test-id":e,"data-autotest-id":e},r.a.createElement("svg",null,r.a.createElement("defs",null,r.a.createElement("pattern",{id:v,x:"0",y:"0",width:"1",height:"1"},r.a.createElement("image",{onError:this.onError,href:x,xlinkHref:m.a.safari?x:void 0,x:f,y:f,width:b,height:b,opacity:i}))),r.a.createElement("g",{clipPath:d?"url(#"+d+")":void 0},r.a.createElement("circle",{cx:"50%",cy:"50%",r:h,fill:u?"#cdccd7":"url(#"+v+")",stroke:s,strokeWidth:"8.6%"}),l>0?r.a.createElement("circle",{cx:"50%",cy:"50%",r:h,fill:s,stroke:"transparent",opacity:l,strokeWidth:"8.6%"}):null)))},Object(o.c)([h.a],e.prototype,"onError",null),e}(r.a.PureComponent),v=n(322),x=(n(634),n(298)),y=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isHidden:!!e.shouldHideBeforeImageLoad,isErrorLoading:!1,isDoubleError:!1},n}return Object(o.d)(e,t),e.prototype.onLoad=function(){this.setState({isHidden:!1})},e.prototype.onError=function(){this.setState((function(t){return{isErrorLoading:!0,isDoubleError:t.isErrorLoading,isHidden:!1}}))},e.prototype.render=function(){var t=this.props,e=t.pictureSize,n=void 0===e?v.b.Size30:e,o=t.pictureUrl,i=t.iconSize,s=void 0===i?v.b.Size12:i,d=t.iconUrl,c=t.fallbackIconUrl,p=t.iconBorderWidth,u=void 0===p?3:p,h=t.className,m=t.shouldHideBeforeImageLoad,g=n-(s+u),f=this.state,b=f.isHidden,y=f.isErrorLoading,w=f.isDoubleError;return r.a.createElement("div",{className:a()("picture-with-icon",h,{"picture-with-icon--collapsed":b})},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:n,height:n,viewBox:"0 0 "+n+" "+n},r.a.createElement("defs",null,r.a.createElement("rect",{id:"rect",x:g,y:g,width:n/2,height:n/2,rx:4}),r.a.createElement("rect",{id:"circle",x:0,y:0,width:n,height:n,rx:n/2}),r.a.createElement("mask",{id:"mask"},r.a.createElement("use",{xlinkHref:"#circle"}),r.a.createElement("use",{xlinkHref:"#rect"}))),r.a.createElement("image",{className:"picture-with-icon__picture",href:y?x:o,width:n,height:n,mask:"url(#mask)",onLoad:this.onLoad,onError:this.onError,key:"try"+y})),r.a.createElement(l.a,{className:"picture-with-icon__icon",pictureUrl:d,size:v.c[s],fallbackPictureUrl:c,shouldHideBeforeImageLoad:m}),w?r.a.createElement("div",{className:"picture-with-icon--cover"}):null)},Object(o.c)([h.a],e.prototype,"onLoad",null),Object(o.c)([h.a],e.prototype,"onError",null),e}(r.a.PureComponent),w=n(636),C=n(298),k=function(t){var e=t.className;return r.a.createElement(l.a,Object(o.a)({},t,{className:a()(w.teamPicture,e),fallbackPictureUrl:C}))},E=n(298),S=function(t){return r.a.createElement(l.a,Object(o.a)({},t,{fallbackPictureUrl:E}))}},2935:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t,e,n){return void 0===e&&(e=24),void 0===n&&(n=24),"<svg width="+e+" height="+n+">\n\t\t<use xlink:href='"+t+"' />\n\t</svg>"}},2936:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTExIDNWMmExIDEgMCAxIDEgMiAwdjFoN2ExIDEgMCAxIDEgMCAySDRhMSAxIDAgMCAxIDAtMmg3em0wIDR2OWExIDEgMCAxIDEtMiAwVjdhMSAxIDAgMCAxIDIgMHptNCAwdjlhMSAxIDAgMSAxLTIgMFY3YTEgMSAwIDEgMSAyIDB6TTYgNmExIDEgMCAwIDEgMSAxdjEyaDEwVjdhMSAxIDAgMSAxIDIgMHYxM2ExIDEgMCAwIDEtMSAxSDZhMSAxIDAgMCAxLTEtMVY3YTEgMSAwIDAgMSAxLTF6Ii8+Cjwvc3ZnPgo="},298:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjgiIGhlaWdodD0iNjgiIHZpZXdCb3g9IjAgMCA2OCA2OCI+Cgk8ZGVmcz4KCQk8cmVjdCBpZD0iYSIgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4Ii8+Cgk8L2RlZnM+Cgk8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgoJCTxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj4KCQkJPHVzZSB4bGluazpocmVmPSIjYSIvPgoJCTwvbWFzaz4KCQk8dXNlIGZpbGw9IiNDQ0MiIGZpbGwtcnVsZT0ibm9uemVybyIgeGxpbms6aHJlZj0iI2EiLz4KCQk8cGF0aCBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zNCAzNWE4IDggMCAxIDAgMC0xNiA4IDggMCAwIDAgMCAxNnptLTcuMjg2IDEuNTM2QTExLjk4IDExLjk4IDAgMCAxIDIyIDI3YzAtNi42MjcgNS4zNzMtMTIgMTItMTJzMTIgNS4zNzMgMTIgMTJhMTEuOTggMTEuOTggMCAwIDEtNC43MTQgOS41MzZDNDcuNTk3IDM5LjMzMyA1MiA0NS42NTIgNTIgNTNoLTRjMC03LjczMi02LjI2OC0xNC0xNC0xNHMtMTQgNi4yNjgtMTQgMTRoLTRjMC03LjM0OCA0LjQwMy0xMy42NjcgMTAuNzE0LTE2LjQ2NHoiIG1hc2s9InVybCgjYikiLz4KCTwvZz4KPC9zdmc+Cg=="},308:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var o=n(0),i=n(201),r=n(180),s=n(185),a=n.n(s),l=n(322),d=(n(628),function(t){function e(e){var n=t.call(this,e)||this;return n.state={isHidden:!!e.shouldHideBeforeImageLoad,isErrorLoading:!1,isDoubleError:!1},n}return Object(o.d)(e,t),e.prototype.onLoad=function(){this.setState({isHidden:!1})},e.prototype.onError=function(){this.setState((function(t){return{isErrorLoading:!0,isDoubleError:t.isErrorLoading,isHidden:!1}}))},e.prototype.render=function(){var t=this.props,e=t.alt,n=void 0===e?"":e,o=t.className,i=t.pictureUrl,s=t.fallbackPictureUrl,d=t.size,c=void 0===d?l.a.Size30:d,p=t.style,u=t.forwardedRef,h=t.dataAutoTestId,m=this.state,g=m.isHidden,f=m.isErrorLoading,b=m.isDoubleError;return r.createElement("div",{"data-autotest-id":h,style:p,className:a()("base-picture",o,c,{"base-picture--collapsed":g}),ref:u},r.createElement("img",{alt:n,src:f?s:i,onLoad:this.onLoad,onError:this.onError,key:"try"+f}),b?r.createElement("div",{className:"base-picture--cover"}):null)},Object(o.c)([i.a],e.prototype,"onLoad",null),Object(o.c)([i.a],e.prototype,"onError",null),e}(r.PureComponent));var c,p=(c=d,r.forwardRef((function(t,e){return r.createElement(c,Object(o.a)({},t,{forwardedRef:e}))})))},310:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return l}));var o,i=n(180),r=n(185),s=n.n(r),a=n(466);!function(t){t.YELLOW="yellow",t.BLUE="blue",t.GRAY="gray",t.INDIGO="indigo"}(o||(o={}));var l=function(t){var e=t.type,n=void 0===e?o.YELLOW:e,r=t.className,l=t.children,d=function(t){switch(t){case o.YELLOW:return"tag_yellow";case o.BLUE:return"tag_blue";case o.GRAY:return"tag_gray";case o.INDIGO:return"tag_indigo";default:throw new Error("expected TagType, received "+t)}}(n);return i.createElement("span",{className:s()(a.tag,d,r)},l)}},322:function(t,e,n){"use strict";var o,i,r,s;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),function(t){t.Size12="base-picture--size12",t.Size16="base-picture--size16",t.Size24="base-picture--size24",t.Size30="base-picture--size30",t.Size32="base-picture--size32",t.Size36="base-picture--size36",t.Size74="base-picture--size74",t.Size140="base-picture--size140",t.Size180="base-picture--size180",t.Size100Percent="base-picture--size100percent"}(r||(r={})),function(t){t[t.Size12=12]="Size12",t[t.Size16=16]="Size16",t[t.Size24=24]="Size24",t[t.Size30=30]="Size30",t[t.Size32=32]="Size32",t[t.Size36=36]="Size36",t[t.Size74=74]="Size74",t[t.Size140=140]="Size140",t[t.Size180=180]="Size180"}(s||(s={}));(o={})[r.Size12]=s.Size12,o[r.Size16]=s.Size16,o[r.Size24]=s.Size24,o[r.Size30]=s.Size30,o[r.Size32]=s.Size32,o[r.Size36]=s.Size36,o[r.Size74]=s.Size74,o[r.Size140]=s.Size140,o[r.Size180]=s.Size180;var a=((i={})[s.Size12]=r.Size12,i[s.Size16]=r.Size16,i[s.Size24]=r.Size24,i[s.Size30]=r.Size30,i[s.Size32]=r.Size32,i[s.Size36]=r.Size36,i[s.Size74]=r.Size74,i[s.Size140]=r.Size140,i[s.Size180]=r.Size180,i)},3699:function(t,e){t.exports='<div\n\tclass="comment-message__emoji"\n\tng-class="{\'comment-message__emoji--highlighted\': highlighted, \'comment-message__emoji--readonly\': readonly}"\n\ttooltip="{{users.join(\', \')}}"\n\ttooltip-append-to-body="true"\n>\n\t<div>\n\t\t<div\n\t\t\tclass="emoji-icon emoji-icon--16 emoji-icon--offset-left"\n\t\t\tng-style="{\'background-position\': (-item.bgX * 0.25) + \'px \' + (-item.bgY * 0.25)+ \'px\'}"\n\t\t></div>\n\t\t<div class="emoji-users">{{emoji.users.length}}</div>\n\t</div>\n</div>\n'},370:function(t,e,n){"use strict";var o=n(310);n.d(e,"a",(function(){return o.a})),n.d(e,"b",(function(){return o.b}))},3700:function(t,e,n){t.exports='<div class="comment-message" id="comment-message-{{id}}">\n\t<div class="comment-message__a11y-content-wrapper" role="listitem" aria-label="{{::commentA11yText}}" tabindex="-1">\n\t\t<div class="comment-message__content-wrapper" tabindex="-1" aria-hidden="true">\n\t\t\t<div class="comment-message__content" ng-class="{\'comment-message__content--edit-mode\': editMode}">\n\t\t\t\t<div class="comment-message__content-header">\n\t\t\t\t\t<div class="comment-message__content-picture">\n\t\t\t\t\t\t<img ng-src="{{::userPicture}}" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="comment-message__content-name" title="{{::userName}}">{{::userName}}</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="comment-message__content-time"\n\t\t\t\t\t\ttitle="{{timestamp | date:\'MMMM dd, yyyy \\\'at\\\' hh:mma\'}}"\n\t\t\t\t\t\tng-class="{\'comment-message__content-time--hidden\': !(!editMode && message.id)}"\n\t\t\t\t\t>\n\t\t\t\t\t\t<relativedate value="timestamp" absolute-format="\'DD MMM, HH:mm\'" relative-format="\', HH:mm\'"></relativedate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="clear"></div>\n\n\t\t\t\t<div\n\t\t\t\t\tng-if="isAllowEdit && !editMode && !isGuest()"\n\t\t\t\t\thm-tap="showEmojiPicker($event)"\n\t\t\t\t\tclass="comment-message__reaction comment-message__reaction--reply-16 thread-container__reaction--first-ticket btn"\n\t\t\t\t\tng-class="{\'comment-message__reaction--touch\': isTouchSupported}"\n\t\t\t\t>\n\t\t\t\t\t<svg  class="reaction-icon"    role="none" ><use xlink:href="'+n(3701)+'"></use></svg>\n\t\t\t\t</div>\n\n\t\t\t\t<ui-textarea\n\t\t\t\t\tclass="stop-textarea-click-{{id}} {{isAllowEdit && editMode ? \'comment-text-edit-emoji\' : \'\'}}"\n\t\t\t\t\tui-textarea-links\n\t\t\t\t\tui-textarea-mentions\n\t\t\t\t\tng-model="message.text"\n\t\t\t\t\teditable="editable"\n\t\t\t\t\ton-enter="saveMessage()"\n\t\t\t\t\ton-focus="edit()"\n\t\t\t\t\ton-change="messageChanged()"\n\t\t\t\t\tcontroller="editor.controller"\n\t\t\t\t\tdata-mentions-position="comment"\n\t\t\t\t\tedit-as-html="true"\n\t\t\t\t></ui-textarea>\n\n\t\t\t\t<div\n\t\t\t\t\tng-show="isAllowEdit && editMode"\n\t\t\t\t\thm-tap="showEmojiPicker($event)"\n\t\t\t\t\tclass="stop-textarea-click-{{id}} comment-message__reaction comment-message__reaction--reply-16 btn"\n\t\t\t\t\tng-class="{\'comment-message__reaction--touch\': isTouchSupported}"\n\t\t\t\t>\n\t\t\t\t\t<svg  class="reaction-icon"    role="none" ><use xlink:href="'+n(3702)+'"></use></svg>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="comment-message__content-buttons use-ng-animate" ng-if="editMode">\n\t\t\t\t\t<button class="comment-message__content-buttons-save btn" hm-tap="applyMessage()">Save</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass="comment-message__content-buttons-cancel btn stop-textarea-click-{{id}}"\n\t\t\t\t\t\thm-tap="cancelMessage($event)"\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass="comment-message__content-buttons-delete btn stop-textarea-click-{{id}}"\n\t\t\t\t\t\tng-if="canDelete"\n\t\t\t\t\t\tng-class="{\'comment-text-edit-emoji\':isAllowEdit && editMode}"\n\t\t\t\t\t\thm-tap="deleteMessage()"\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="comment-message__emojis">\n\t\t\t\t\t<comment-emoji\n\t\t\t\t\t\thm-tap="toggleEmoji(emoji)"\n\t\t\t\t\t\tng-repeat="emoji in message.emojis"\n\t\t\t\t\t\temoji="emoji"\n\t\t\t\t\t\treadonly="isGuest()"\n\t\t\t\t\t\ttooltip-placement="top"\n\t\t\t\t\t>\n\t\t\t\t\t</comment-emoji>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},3701:function(t,e){t.exports="#img__reaction"},3702:function(t,e){t.exports="#img__smile-16"},3703:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var o=n(182),i=n(200),r=n(3704);function s(){Object(o.b)().component("commentMenuReact",Object(i.c)(t)(r.a,["comment","allowPin","onOpened","onClosed"]))}}).call(this,n(111)(t))},3704:function(t,e,n){"use strict";var o,i=n(0),r=n(191),s=n(179),a=n(474),l=n(1846),d=n(225),c=n(456),p=n(58),u=n(293),h=n.n(u),m=n(189);!function(t){t[t.PIN=0]="PIN",t[t.FOLLOW=1]="FOLLOW",t[t.COPY_LINK=2]="COPY_LINK",t[t.DELETE=3]="DELETE"}(o||(o={}));var g=[{key:"Follow thread",value:o.FOLLOW,icon:n(1454),className:"comment-menu__item--follow"},{key:"Pin",value:o.PIN,icon:n(3705),className:"comment-menu__item--pin"},{key:"Copy link",value:o.COPY_LINK,icon:n(812),className:"comment-menu__item--link"},{key:"Delete",value:o.DELETE,icon:n(868),className:"comment-menu__item--remove"}],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e}return Object(i.d)(e,t),e.prototype.onSelectOption=function(t){var e=this.props,n=e.comment,i=e.onClosed;switch(t.value){case o.FOLLOW:this.clickFollow(n);break;case o.PIN:this.clickPin(n);break;case o.COPY_LINK:this.clickCopyLink(n);break;case o.DELETE:this.clickDelete(n)}i&&i()},e.prototype.clickFollow=function(t){Object(l.a)(t).click("comment_menu")},e.prototype.clickPin=function(t){t.cmtPinned=!t.cmtPinned,d.a.comments.commentPinningChanged(t)},e.prototype.clickCopyLink=function(t){Object(c.a)(Object(p.c)()+"?"+t.commentGetOpenCommand()+"="+t.tokenizer.id.toString(),{notifications:{successMessage:"Link copied to clipboard"}}),d.a.comments.commentLinkCopied(t)},e.prototype.clickDelete=function(t){t.commentDelete()},e.prototype.menuOpen=function(){var t=this.props,e=t.comment,n=t.onOpened,o=t.allowPin,i=Object(l.a)(e);this.setState({pinned:e.cmtPinned,pinAllowed:o,followed:i.isFollowed(),followAllowed:i.isAllowed,removeAllowed:e.canRemove()}),n&&n(),m.commentMenuOpened()},e.prototype.render=function(){var t=this.props.onClosed,e=h()(g);return e[0].checked=this.state.followed,e[0].hidden=!this.state.followAllowed,e[1].checked=this.state.pinned,e[1].hidden=!this.state.pinAllowed,e[3].hidden=!this.state.removeAllowed,s.d.createElement(a.a,{className:"comment-menu-all rtb-select--menu comment-move-stop",listClassName:"comment-menu",hideOnScroll:!0,onOpened:this.menuOpen,onClosed:t,menuPlacement:"bottom-end",options:e,onChange:this.onSelectOption},s.d.createElement("svg",{className:"comment-body__settings-menu btn comment-move-stop",role:"none"},s.d.createElement("use",{xlinkHref:n(405)})))},Object(i.c)([r.a],e.prototype,"onSelectOption",null),Object(i.c)([r.a],e.prototype,"menuOpen",null),e}(s.d.Component);e.a=f},3705:function(t,e){t.exports="#img__pin"},3706:function(t,e,n){t.exports='<div class="comment-body">\n\t\x3c!-- height 55 --\x3e\n\t<div ng-if="comment.created" class="comment-body__settings" aria-hidden="true">\n\t\t<rtb-toggle\n\t\t\tng-if="allowResolve"\n\t\t\tlabel="comment.resolved ? \'Resolved\' : \'Resolve\'"\n\t\t\tchecked="comment.resolved"\n\t\t\ton-change="toggleResolve()"\n\t\t\tclass="comment-move-stop rtb-toggle--medium {{comment.resolved ? \'rtb-toggle--checked\': \'\'}}"\n\t\t></rtb-toggle>\n\n\t\t<div ng-if="comment.highlightedText" class="comment-menu__highlighted-text">{{comment.highlightedText}}</div>\n\n\t\t<comment-menu-react comment="comment" allow-pin="allowPin" ng-show="comment.created"></comment-menu-react>\n\n\t\t<button\n\t\t\tng-if="followState.isAllowed"\n\t\t\thm-tap="followState.click(\'comment_widget\')"\n\t\t\tclass="comment-body__follow-thread comment-move-stop"\n\t\t\tng-class="{\'comment-body__follow-thread--is-followed\': followState.isFollowed()}"\n\t\t\ttooltip="{{followState.isFollowed() ? \'Unfollow thread\' : \'Follow thread\'}}"\n\t\t\ttooltip-placement="top"\n\t\t\ttooltip-append-to-body="true"\n\t\t>\n\t\t\t<svg  class="icon"    role="none" ><use xlink:href="'+n(1454)+'"></use></svg>\n\t\t</button>\n\n\t\t<div class="comment-menu__colors comment-move-stop" ng-if="allowColors">\n\t\t\t<div\n\t\t\t\tclass="comment-menu__colors-color-wrap"\n\t\t\t\thm-tap="setCommentColor(color.state)"\n\t\t\t\tng-repeat="color in colors.colors"\n\t\t\t>\n\t\t\t\t<div class="comment-menu__colors-color comment-menu__colors-color--{{color.name}} btn">\n\t\t\t\t\t<div class="comment-menu__colors-selected" ng-show="color.state == colors.selected"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<scrollable on-scroll="messages.onScroll()">\n\t\t<div class="comment-body__messages" ng-show="messages.any()" aria-label="Comments" role="list">\n\t\t\t<comment-message\n\t\t\t\tcomment="comment"\n\t\t\t\tclass="comment-move-stop thread-container"\n\t\t\t\tng-repeat="message in messages.messages track by message.id"\n\t\t\t\tng-if="!message.hidden"\n\t\t\t\tmessage="message"\n\t\t\t\tcan-delete="!!$index"\n\t\t\t\teditable="myUserIdStr == message.senderIdStr"\n\t\t\t\trepeat="message.senderIdStr == messages.messages[$index - 1].senderIdStr"\n\t\t\t\tng-class="{\n                                \'comment-message--editable\': myUserIdStr == message.senderIdStr,\n                                \'comment-message--repeat\': message.senderIdStr == messages.messages[$index - 1].senderIdStr\n                             }"\n\t\t\t>\n\t\t\t</comment-message>\n\t\t</div>\n\n\t\t<div ng-if="tip.visible" aria-hidden="true" class="comment-message comment-message--tip">\n\t\t\t<div class="comment-message__picture" ng-class="tip.iconClass">\n\t\t\t\t<svg>\n\t\t\t\t\t<use xlink:href="" ng-attr-xlink:href="{{tip.icon}}"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<div class="comment-message__content">\n\t\t\t\t<div hm-tap="tip.onClick()" class="comment-message__content-text" ng-bind-html="tip.text"></div>\n\n\t\t\t\t<div\n\t\t\t\t\thm-tap="tip.onClose()"\n\t\t\t\t\tclass="comment-message__reaction btn"\n\t\t\t\t\tng-class="{\'comment-message__reaction--touch\': isTouchSupported}"\n\t\t\t\t>\n\t\t\t\t\t<svg  class="reaction-icon"    role="none" ><use xlink:href="'+n(1283)+'"></use></svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</scrollable>\n\n\t<div\n\t\tclass="comment-body__reply comment-container"\n\t\taria-hidden="true"\n\t\tng-class="{\n            \'comment-body__reply--first\': !messages.any(),\n            \'comment-body__reply--replying\': messages.any() && reply.replying && reply.opened\n        }"\n\t>\n\t\t<div class="comment-move-stop">\n\t\t\t<ui-textarea\n\t\t\t\tclass="stop-reply-click"\n\t\t\t\tui-textarea-mentions\n\t\t\t\tng-model="reply.message"\n\t\t\t\tcontroller="reply.controller"\n\t\t\t\tplaceholder="getPlaceholder()"\n\t\t\t\ton-enter="addReplyMessage()"\n\t\t\t\ton-focus="setReplyMode()"\n\t\t\t\ton-esc="endReplyMessage()"\n\t\t\t\ton-change="onReplyMessageChanged(value)"\n\t\t\t\tautofocus="!messages.any() || reply.message"\n\t\t\t\tdata-mentions-position="comment-reply"\n\t\t\t\tedit-as-html="true"\n\t\t\t\tdata-auto-test-id="comment__textarea"\n\t\t\t></ui-textarea>\n\n\t\t\t<div\n\t\t\t\thm-tap="showEmojiPicker($event)"\n\t\t\t\tclass="comment-message__reaction comment-message__reaction--reply btn"\n\t\t\t\tng-class="{\'comment-message__reaction--touch\': isTouchSupported}"\n\t\t\t>\n\t\t\t\t<svg  class="reaction-icon"    role="none" ><use xlink:href="'+n(3707)+'"></use></svg>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\thm-tap="addReplyMessageThroughButton()"\n\t\t\t\tclass="comment-message__reaction comment-message__reaction--plane btn"\n\t\t\t>\n\t\t\t\t<svg \n\t\t\t\t\tclass="plane-icon"\n\t\t\t\t\tng-class="{\'plane-icon--theme-active\': !!comment.lastReplyingMessage}"\n\t\t\t\t\t \n\t\t\t\t role="none" ><use xlink:href="'+n(3708)+'"></use></svg>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},3707:function(t,e){t.exports="#img__smile"},3708:function(t,e){t.exports="#img__plane"},3711:function(t,e){t.exports="#minimap__map-fullscreen"},3712:function(t,e){t.exports="#minimap__map-fullscreen-back"},3799:function(t,e,n){t.exports='<div class="rate" ng-class="{\'rate-float--gratitude\': showGratitude}">\n\t<div class="rate-value">\n\t\t<div class="rate-head">\n\t\t\t<h1 class="rate-caption" ng-switch="showGratitude">{{ctrl.header}}</h1>\n\t\t\t<button ng-show="closed" hm-tap="closed($event)">\n\t\t\t\t<svg     role="none" ><use xlink:href="'+n(221)+'"></use></svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="rates" ng-show="!showGratitude">\n\t\t\t<label\n\t\t\t\tclass="rate-option rate-option--{{option.className}}"\n\t\t\t\tng-class="{\'rate-option--checked\': option.value === $parent.rating.value}"\n\t\t\t\tng-repeat="option in ctrl.options track by $index"\n\t\t\t\ttitle="{{option.text}}"\n\t\t\t>\n\t\t\t\t<span class="rate-option-ico"></span>\n\t\t\t\t<input type="radio" ng-value="option" ng-model="$parent.rating" />\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\t<form\n\t\tname="rate-form"\n\t\tclass="rate-comment-form"\n\t\tng-show="ctrl.showMore && !showGratitude"\n\t\tng-submit="ctrl.submit($event)"\n\t\tenctype="application/x-www-form-urlencoded"\n\t>\n\t\t<div class="rate-input-wrapper" no-prevent-default="true">\n\t\t\t<textarea ng-model="rate.comment" rows="1" placeholder="Tell us more..."></textarea>\n\t\t</div>\n\t\t<div>\n\t\t\t<button\n\t\t\t\tname="template-rate-submit-button"\n\t\t\t\tclass="rtb-btn rtb-btn--primary rtb-btn--mini"\n\t\t\t\ttype="submit"\n\t\t\t\tno-prevent-ios-touchstart="true"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</button>\n\t\t</div>\n\t</form>\n\t<div class="use-ng-animate rate-closebar rate-closebar--countdown" ng-show="showGratitude"></div>\n</div>\n'},3800:function(t,e,n){var o=n(3801);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},3801:function(t,e,n){var o=n(229);(t.exports=n(177)(!1)).push([t.i,".rate {\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  letter-spacing: normal;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  padding: 11px 0 0 0;\n  background: rgba(255, 255, 255, 1);\n  background: var(--white);\n  position: relative;\n}\n.rate-left-side-bar {\n  border: solid 1px rgba(205, 204, 215, 1);\n  border: solid 1px var(--indigo400);\n}\n.rate-template {\n  position: absolute;\n  background-color: #ffffff;\n  left: 10px;\n  bottom: 10px;\n  z-index: 2;\n  width: 324px;\n  min-height: 97px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n}\n.rate-float {\n  width: 324px;\n  padding: 12px 0 0 0;\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n}\n.rate-float .rate-comment-form {\n  padding: 0 16px 16px 16px;\n}\n.rate-float--gratitude {\n  padding: 12px 0 12px 0;\n}\n.rate-value {\n  padding: 0 15px 0 15px;\n}\n.rate-value .rate-head {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.rate-value .rate-head h1 {\n  -ms-flex: 1 0 auto;\n      flex: 1 0 auto;\n  width: 260px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n.rate-value .rate-head button {\n  height: 24px;\n  padding: 0;\n  margin-left: 13px;\n}\n.rate-value .rate-head button svg {\n  width: 24px;\n  height: 24px;\n  -ms-flex: 0 0 auto;\n      flex: 0 0 auto;\n  cursor: pointer;\n}\nh1.rate-caption {\n  font-size: 14px;\n  line-height: 1.71;\n  padding: 0;\n  margin: 0;\n}\n.rates {\n  padding: 12px 0;\n  text-align: center;\n  font-size: 0;\n}\n.rates .rate-option {\n  display: inline-block;\n  position: relative;\n  width: 32px;\n  height: 32px;\n  cursor: pointer;\n  padding: 8px 8px 8px 8px;\n}\n.rates .rate-option .rate-option-ico {\n  display: inline-block;\n  width: 32px;\n  height: 32px;\n  background-image: url("+o(n(2701))+");\n  background-size: cover;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n.rates .rate-option input {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n  padding: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.rates .do-hovers .rate-option--awfull:hover span,\n.rates .rate-option--awfull.rate-option--checked span {\n  background-position: -160px 0;\n}\n.rates .rate-option--bad span {\n  background-position: -32px 0;\n}\n.rates .do-hovers .rate-option--bad:hover span,\n.rates .rate-option--bad.rate-option--checked span {\n  background-position: -192px 0;\n}\n.rates .rate-option--neutral span {\n  background-position: -64px 0;\n}\n.rates .do-hovers .rate-option--neutral:hover span,\n.rates .rate-option--neutral.rate-option--checked span {\n  background-position: -224px 0;\n}\n.rates .rate-option--good span {\n  background-position: -96px 0;\n}\n.rates .do-hovers .rate-option--good:hover span,\n.rates .rate-option--good.rate-option--checked span {\n  background-position: -256px 0;\n}\n.rates .rate-option--awesome span {\n  background-position: -128px 0;\n}\n.rates .do-hovers .rate-option--awesome:hover span,\n.rates .rate-option--awesome.rate-option--checked span {\n  background-position: -288px 0;\n}\n.rate-comment-form {\n  padding: 0 15px 15px 15px;\n  border-top: solid 1px rgba(235, 235, 239, 1);\n  border-top: solid 1px var(--indigo200);\n  text-align: right;\n  font-size: 0;\n}\n.rate-comment-form .rate-input-wrapper {\n  position: relative;\n  z-index: 1;\n  text-align: left;\n  max-height: 140px;\n  margin: 8px 0 8px 0;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n}\n.rate-comment-form .rate-input-wrapper::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.rate-comment-form .rate-input-wrapper::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.rate-comment-form .rate-input-wrapper::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.rate-comment-form .rate-input-wrapper textarea {\n  width: 100%;\n  font-size: 14px;\n  line-height: 1.43;\n  resize: none;\n  padding: 0;\n  overflow: hidden;\n}\n.rate-closebar {\n  position: absolute;\n  height: 2px;\n  background-color: #2b79ff;\n  bottom: 0;\n  width: 0;\n}\n.rate-closebar--countdown.ng-hide {\n  width: 100%;\n}\n.rate-closebar--countdown.ng-hide-add {\n  transition: width linear 0s;\n}\n.rate-closebar--countdown.ng-hide-remove {\n  transition: width linear 3s;\n}\n.rate-head .rate-close--hover {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  width: 24px;\n  height: 24px;\n  border-radius: 3px;\n  background-color: #c3c2cf;\n  visibility: hidden;\n}\n.rate-head .rate-close--hover:hover {\n  cursor: pointer;\n  background-color: rgba(5, 0, 56, 0.5);\n}\n.rate:hover .rate-head .rate-close--hover {\n  visibility: visible;\n}\n.rate-head .rate-close--hover svg.rate-close__cross--hover {\n  margin-top: 4px;\n  width: 16px;\n  height: 16px;\n}\n.rate-head .rate-close--static {\n  position: absolute;\n  right: 11px;\n  top: 11px;\n  width: 24px;\n  height: 24px;\n}\n.rate-head .rate-close--static svg.rate-close__cross--static {\n  width: 24px;\n  height: 24px;\n}\n.rate-head .rate-close--touch-device {\n  visibility: visible;\n}\n",""])},3875:function(t,e,n){"use strict";n.r(e),function(t){var o=n(11263),i=n(7682),r=n(7684),s=n(239),a=n(197),l=n(7685),d=n(7686),c=n(7687),p=n(7688),u=n(181),h=n(822),m=n(7689),g=n(11363),f=n(1193),b=n(27),v=n(7690),x=n(7691),y=n(44),w=n(7692),C=n(1062),k=n(297),E=n(16);Object(o.a)();var S=function(){function e(){this.onPanelOpen=new t.Signal,this.onPanelClose=new t.Signal,this.onEditorDestroy=new t.Signal,this.connection=new l.a(this),this.onlineUsers=new v.a(this),this.collab=new r.a(this),this.comments=new i.a(this),this.notesObjects=new d.a(this),this.screenSharingBroadcast=new m.a(this),f.d.add(this.createScreenSharingWatchIfIAmWatcher,this),this.createScreenSharingWatchIfIAmWatcher(),E.a.mobile||Object(k.a)()||Object(w.a)(this),Object(x.a)(this),this.notesDragAndDrop=new c.a(this),this.notesDesktopDragAndDrop=new p.a(this),u.onScopeDestroyed.add(this.onScopeDestroyed,this),this.collab.deltaFlushedToServer.add(h.a.noteEdited,this)}return e.prototype.openPanelAfterContentLoad=function(t,e){var n=this;if(this.openPanelDfd)return this.openPanelDfd.promise;var o=Object(y.b)();this.openPanelDfd=o;var i=function(){return n.openPanel(t,e)};return u.widgetController.isAllWidgetsLoaded()?i():u.widgetController.allWidgetsLoaded.addOnce(i),o.promise},e.prototype.openPanel=function(t,e){void 0===e&&(e={minWidth:480,resizeable:!0});var n=Object(s.a)().rightSidebar.isPluginActive(a.a.NOTES);this.activatedFromSource=t,this.editor&&!n&&h.a.noteOpened(),Object(s.a)().rightSidebar.activate(a.a.NOTES,e),this.openPanelDfd&&(this.openPanelDfd.resolve(),this.openPanelDfd=void 0)},e.prototype.closePanel=function(t){this.deactivatedFromSource=t,Object(s.a)().rightSidebar.isPluginActive(a.a.NOTES)&&h.a.noteClosed(),Object(s.a)().rightSidebar.deactivate(a.a.NOTES)},e.prototype.init=function(t){this.panelController=t,this.onPanelOpen.memorize=!0,this.onPanelOpen.dispatch(t),Object(s.a)().rightSidebar.activePluginsChanged.add(this.pluginChanged,this)},e.prototype.deinit=function(){this.onPanelClose.dispatch(),this.panelController=void 0,this.onPanelOpen.memorize=!1,this.onPanelOpen.forget(),Object(s.a)().rightSidebar.activePluginsChanged.remove(this.pluginChanged,this)},e.prototype.pluginChanged=function(t,e){e!=t&&e===a.a.NOTES&&this.deinit()},e.prototype.onScopeDestroyed=function(){this.onEditorDestroy.dispatch(),this.editor=void 0},e.prototype.createScreenSharingWatchIfIAmWatcher=function(){var t=this;this.screenSharingWatch||Object(f.a)()!==b.v.WATCHER||Object(C.a)().then((function(e){t.screenSharingWatch=new g.a(t,e.screenVideoChatService)}))},e}();e.default=new S}.call(this,n(110))},3876:function(t,e){t.exports="#img__close-doc"},3930:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var o=n(2659),i=n(853),r=n(386),s=n(187),a=function(){function t(t){this.$scope=t,t.item=i.b(t.emoji.name);var e=function(){t.highlighted=!!t.emoji.users.find((function(t){return t.toString()===Object(s.a)().userInfo.id}));var e=[];t.users=e,t.emoji.users.forEach((function(t){r.a(t.toString(),!0).then((function(t){return e.push(t.name)}))}))};this.$scope.$watchCollection("emoji.users",e),e()}return t.$inject=["$scope"],t}(),l=n(182);function d(){return{replace:!0,restrict:"E",template:n(3699),scope:{emoji:"<",readonly:"="},controller:a}}var c=n(818),p=n(727);function u(){Object(c.a)(),Object(p.a)(),Object(l.b)().directive("commentMessage",h),Object(l.b)().directive("commentEmoji",d)}function h(){return{replace:!0,restrict:"E",template:n(3700),scope:{message:"=",repeat:"=",comment:"=",editable:"=",canDelete:"=",canShowMenu:"="},link:o.a}}var m=n(3703),g=n(2663),f=n(1281),b=n(612),v=n(1717),x=n(440);function y(){Object(x.a)(),Object(c.a)(),Object(b.a)(),Object(m.a)(),Object(l.b)().directive("commentBody",C),u()}var w=[{state:v.a.YELLOW,name:v.a[v.a.YELLOW].toLowerCase()},{state:v.a.GREEN,name:v.a[v.a.GREEN].toLowerCase()},{state:v.a.RED,name:v.a[v.a.RED].toLowerCase()},{state:v.a.BLUE,name:v.a[v.a.BLUE].toLowerCase()},{state:v.a.BLACK,name:v.a[v.a.BLACK].toLowerCase()}];function C(t){return{replace:!0,restrict:"E",transclude:!0,scope:{comment:"=",allowResolve:"=",allowColors:"=",allowPin:"=",denyScrollToMessage:"=",wrapped:"="},controller:g.a,template:n(3706),link:function(e,n,o,i,r){r(e,(function(t,e){n.append(t)})),e.closeComment=function(t){t.preventDefault(),e.cancelReplyMessage(),e.comment.setCmtMode(!1)},t((function(){e.messages.$element=n.find(".comment-body__messages"),e.reply.$element=n.find(".comment-body__reply"),e.scrollToMessage()})),e.showEmojiPicker=function(t){Object(f.a)().show(t.currentTarget.getBoundingClientRect()).then((function(t){if(t){e.reply.controller.edit();var n=e.reply.controller.getEditor(),o=n.selectionStart,i=e.addEmojiToMessage(t,o,n.value);e.isAppleDevice?e.reply.message=i:e.reply.controller.change(i),e.comment.lastReplyingMessage=i,setTimeout((function(){n.focus(),e.reply.controller.scrollIntoView()}),300)}}))};var s=e.comment;e.colors={colors:w,selected:s.color,click:function(t){s.color=t,e.focusComment()},colorChanged:function(t){this.selected=t,e.safeApply()}},s.cmtColorChanged.add(e.colors.colorChanged,e.colors),e.$on("$destroy",(function(){s.cmtColorChanged.remove(e.colors.colorChanged,e.colors)}))}}}C.$inject=["$timeout"]},394:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var o=n(0),i=n(179),r=n(351),s={flip:{enabled:!0,behavior:["bottom","top","bottom"],boundariesElement:"viewport"},preventOverflow:{enabled:!0,escapeWithReference:!0,boundariesElement:"viewport",padding:20}},a=Object(o.a)(Object(o.a)({},s),{sameWidth:{enabled:!0,fn:function(t){var e=t.instance.popper,n=t.instance.reference,o=Math.abs(parseInt(getComputedStyle(e).marginLeft,10));return e.style.width=n.offsetWidth+2*o+"px",t}}}),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.render=function(){var t=this.props.modifiers;return i.d.createElement(r.a,Object(o.a)({},this.props,{placement:this.props.placement||"bottom",modifiers:t||s}))},e}(i.d.PureComponent)},433:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));var o=n(190),i=n(182),r=n(200),s=n(259),a=n(543);function l(){return n(320),Object(i.b)().directive("rtbCheckbox",d),Object(i.b)().component("rtbCheckboxReact",Object(r.c)(t)(s.a,["name","label","checked","isDisabled","onChange","className"])),a}function d(){return Object(o.a)({restrict:"E",template:a,transclude:!0,scope:{name:"=",checked:"=",label:"=",off:"=",onChange:"&",square:"=",modelOptions:"="}})}}).call(this,n(111)(t))},4474:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var o=n(411),i=n.n(o),r=[];function s(t){t.isQuillModule&&t.type&&t.moduleClass&&i.a.register(t.type+"/"+t.name,t.moduleClass,!0),"modules"!==t.type&&"addons"!==t.type||r.push(t)}function a(t){return r.reduce((function(e,n){return n.isQuillModule&&(e[n.name]=n.config,e[n.name].editor=t),e}),{})}function l(t){return r.reduce((function(e,n){return n.isQuillModule?e[n.name]=t.getModule(n.name):e[n.name]=new n.moduleClass(t),e}),{})}},4475:function(t,e,n){"use strict";var o=n(184),i=n(16),r=function(){function t(){}return t.uploadBlob=function(t,e){return new Promise((function(n,r){var s;s=i.a.safari||i.a.ios||i.a.msedge||i.a.msie?e:new File([e],e.name||"image.png"),o.a.documents.selectById(t).upload(s).then((function(t){t.generated?n(t):r(null)}),(function(){r(null)}))}))},t.uploadUrl=function(t,e){return new Promise((function(n,i){var r={url:e};o.a.documents.selectById(t).uploadResource(r).then((function(t){t.generated?n(t):i(null)}),(function(){i(null)}))}))},t}();e.a=r},4476:function(t,e,n){"use strict";var o=n(0),i=n(411),r=n.n(i),s=n(747),a=n(618),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.format=function(e,n){s.a.isEmbedLine(this)&&-1==a.e.indexOf(e)||t.prototype.format.call(this,e,n)},e}(r.a.import("blots/block"));e.a=l},4477:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){var e=t instanceof MouseEvent?t:t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}},4478:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var o=n(822),i="ql-picker-hidden",r="ql-format-picker",s=function(){function e(e,n,o,i){void 0===o&&(o="all"),void 0===i&&(i=e.container),this.quill=e,this.editor=n,this.type=o,this.pickerContainer=i,this.buttons=[],this.isVisible=!1,this.selectedItemIndex=-1,this.tapListeners=[],this.updateExternalButton=!0,this.beforeFormat=new t.Signal,this.afterFormat=new t.Signal,this.pickerElement=document.createElement("div"),this.pickerElement.classList.add("ql-format-picker"),i.appendChild(this.pickerElement),this.addControls(),this.close(),n.addToHiddableElements({el:this.pickerElement,callback:this.position.bind(this)})}return e.prototype.setExternalButton=function(t){},e.prototype.addControls=function(){},e.prototype.onButtonClick=function(t,e,n){if(n&&(n.stopPropagation(),n.preventDefault()),this.beforeFormat.dispatch(),t.callback)t.callback();else if(t.format){var i=void 0;i=!e.classList.contains("ql-format-picker-current")&&(t.value||!0),this.formatText(t.format,i)}o.a.noteFormatPickerUsed(t.format||t.name),this.highlightCurrentFormat(),this.afterFormat.dispatch()},e.prototype.formatText=function(t,e){"check"===e&&(e="unchecked"),this.quill.format(t,e,"user"),this.close()},e.prototype.toggle=function(t){this.isVisible?this.close():this.show(t)},e.prototype.show=function(t,e){void 0===e&&(e=!0),this.quill.isEnabled()&&(e&&(this.__node=t,this.position()),this.pickerElement.classList.remove(i),this.isVisible=!0,this.highlightCurrentFormat())},e.prototype.close=function(){this.pickerElement.classList.add(i),this.isVisible=!1,this.selectedItemIndex=-1,this.__node=null},e.prototype.highlightCurrentFormat=function(t){var e=this;if(void 0===t&&(t=this.quill.selection.getRange()[0]),this.dropCurrentFormatHighlight(),t){var n=this.quill.getFormat(t),o=!1;Object.keys(n).length>0&&Object.keys(n).forEach((function(t){e.buttons.forEach((function(i){i.def.format&&i.def.format===t&&("list"!==t||"checked"!==n[t]&&"unchecked"!==n[t]||(n[t]="check"),i.def.value?i.def.value==n[t]&&(i.el.classList.add("ql-format-picker-current"),e.externalButton&&e.updateExternalButton&&(e.externalButton.innerHTML=i.def.icon),o=!0):(i.el.classList.add("ql-format-picker-current"),e.externalButton&&e.updateExternalButton&&(e.externalButton.innerHTML=i.def.icon),o=!0))}))}));var i=this.buttons.find((function(t){return"Text"===t.def.name}));!o&&i&&(i.el.classList.add("ql-format-picker-current"),this.externalButton&&this.updateExternalButton&&(this.externalButton.innerHTML=i.def.icon))}},e.prototype.dropCurrentFormatHighlight=function(){this.buttons.forEach((function(t){t.el.classList.remove("ql-format-picker-current")})),this.externalButton&&this.updateExternalButton&&(this.externalButton.innerHTML="")},e.prototype.position=function(){if(this.pickerElement.style.top="auto",this.pickerElement.style.left="auto",this.pickerElement.style.bottom="auto",this.pickerElement.style.right="auto",this.__node){var t=this.quill.container.getBoundingClientRect(),e=this.__node.getBoundingClientRect(),n=t.height<e.bottom+this.pickerBounds.height+4;this.pickerElement.style.left=e.left-t.left+"px",n?this.pickerElement.style.bottom=t.height-(e.top-t.top-4)+"px":this.pickerElement.style.top=e.bottom-t.top+4+"px"}},e.prototype.update=function(){},e}();e.b=s}).call(this,n(110))},4479:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGNpcmNsZSBmaWxsPSJjdXJyZW50Q29sb3IiIGN4PSIxMiIgY3k9IjEyIiByPSIzLjUiPjwvY2lyY2xlPgogICAgPC9nPgo8L3N2Zz4="},4480:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNCA0KSI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSIjNDI2MkZGIiByeD0iNCIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQuMjc4IDcuMjIybC0uMDYyLjA2MmExIDEgMCAwIDAgLjAwOSAxLjQyM0w3IDExLjQxNGw1LTVBMSAxIDAgMCAwIDEwLjU4NiA1TDcgOC41ODYgNS43MDcgNy4yMzdhMSAxIDAgMCAwLTEuNDMtLjAxNXoiLz4KICAgIDwvZz4KPC9zdmc+"},4481:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0xOC43MDggNkw1Ljk5OSAxOC43MDdBOSA5IDAgMCAwIDE4LjcwNyA2ek0xOCA1LjI5MUE5IDkgMCAwIDAgNS4yOTMgMThMMTggNS4yOTN6TTEyIDIyQzYuNDc3IDIyIDIgMTcuNTIzIDIgMTJTNi40NzcgMiAxMiAyczEwIDQuNDc3IDEwIDEwLTQuNDc3IDEwLTEwIDEweiIvPgo8L3N2Zz4="},4482:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTIyLjA4NiA0LjU4NmEyIDIgMCAwIDEgMCAyLjgyOEw5LjkxNCAxOS41ODZsLTUuNDMgMS4xMWExIDEgMCAwIDEtMS4xOC0xLjE4bDEuMTEtNS40M0wxNi41ODYgMS45MTRhMiAyIDAgMCAxIDIuODI4IDBsMi42NzIgMi42NzJ6bS03LjU5MyAyLjI1bC04LjI0IDguMjQtLjY4NyAzLjM1OCAzLjM1OS0uNjg3IDguMjQtOC4yNC0yLjY3Mi0yLjY3MXptMS40MTQtMS40MTRsMi42NzEgMi42NzFMMjAuNjcyIDYgMTggMy4zMjhsLTIuMDkzIDIuMDk0eiIvPgo8L3N2Zz4K"},4483:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTcuNDE0IDE2bDMuMjkzIDMuMjkzYTEgMSAwIDAgMS0xLjQxNCAxLjQxNEwzLjU4NiAxNWw1LjcwNy01LjcwN2ExIDEgMCAwIDEgMS40MTQgMS40MTRMNy40MTQgMTRIMThWNmgtM2ExIDEgMCAwIDEgMC0yaDNhMiAyIDAgMCAxIDIgMnY4YTIgMiAwIDAgMS0yIDJINy40MTR6Ii8+Cjwvc3ZnPgo="},4484:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHg9IjMiIHk9IjQiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iY3VycmVudENvbG9yIi8+CiAgICA8cmVjdCB4PSIzIiB5PSIxMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KPC9zdmc+Cg=="},4485:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiMwNTAwMzgiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE3IDZWNGExIDEgMCAwIDEgMiAwdjJoMmExIDEgMCAwIDEgMCAyaC0ydjJhMSAxIDAgMCAxLTIgMFY4aC0yYTEgMSAwIDAgMSAwLTJoMnptLjk5NiA3SDE4YTEgMSAwIDAgMSAxIDF2MWEyIDIgMCAwIDEtMiAyaC0ybC0zIDMtMy0zSDdhMiAyIDAgMCAxLTItMlY4YTIgMiAwIDAgMSAyLTJoNGExIDEgMCAwIDEgMCAySDd2Ny4wMDZMOS44MjggMTUgMTIgMTcuMTcyIDE0LjE3MiAxNWgyLjgyMmwuMDAyLTEuMDAyYTEgMSAwIDAgMSAxLS45OTh6Ii8+Cjwvc3ZnPg=="},4486:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iI0NDQyIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTcuOTk2IDEzQTEgMSAwIDAgMSAxOSAxNHYxYTIgMiAwIDAgMS0yIDJoLTJsLTMgMy0zLTNIN2EyIDIgMCAwIDEtMi0yVjhhMiAyIDAgMCAxIDItMmg1YTEgMSAwIDAgMSAwIDJIN3Y3LjAwNkw5LjgyOCAxNSAxMiAxNy4xNzIgMTQuMTcyIDE1aDIuODIybC4wMDItMS4wMDJhMSAxIDAgMCAxIDEtLjk5OHoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjMkE3OUZGIiBkPSJNMTggMTBhMyAzIDAgMSAxIDAtNiAzIDMgMCAwIDEgMCA2eiIvPgogICAgPC9nPgo8L3N2Zz4K"},4487:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiMwNTAwMzgiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE3IDZWNGExIDEgMCAwIDEgMiAwdjJoMmExIDEgMCAwIDEgMCAyaC0ydjJhMSAxIDAgMCAxLTIgMFY4aC0yYTEgMSAwIDAgMSAwLTJoMnptLjk5NiA3SDE4YTEgMSAwIDAgMSAxIDF2MWEyIDIgMCAwIDEtMiAyaC0ybC0zIDMtMy0zSDdhMiAyIDAgMCAxLTItMlY4YTIgMiAwIDAgMSAyLTJoNGExIDEgMCAwIDEgMCAySDd2Ny4wMDZMOS44MjggMTUgMTIgMTcuMTcyIDE0LjE3MiAxNWgyLjgyMmwuMDAyLTEuMDAyYTEgMSAwIDAgMSAxLS45OTh6Ii8+Cjwvc3ZnPg=="},4488:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iIzA1MDAzOCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTcuOTk2IDEzQTEgMSAwIDAgMSAxOSAxNHYxYTIgMiAwIDAgMS0yIDJoLTJsLTMgMy0zLTNIN2EyIDIgMCAwIDEtMi0yVjhhMiAyIDAgMCAxIDItMmg1YTEgMSAwIDAgMSAwIDJIN3Y3LjAwNkw5LjgyOCAxNSAxMiAxNy4xNzIgMTQuMTcyIDE1aDIuODIybC4wMDItMS4wMDJhMSAxIDAgMCAxIDEtLjk5OHoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjMDUwMDM4IiBkPSJNMTggMTBhMyAzIDAgMSAxIDAtNiAzIDMgMCAwIDEgMCA2eiIvPgogICAgPC9nPgo8L3N2Zz4="},4489:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTkuNzM0IDE0LjI2NmwtOC4xMTUtMy4zNDFhMSAxIDAgMCAxIC4wMzUtMS44NjNsMTktN2ExIDEgMCAwIDEgMS4yODQgMS4yODRsLTcgMTlhMSAxIDAgMCAxLTEuODYzLjAzNWwtMy4zNDEtOC4xMTV6bS00Ljk4Mi00LjIxNGw2LjUxNCAyLjY4MiAyLjY4MiA2LjUxNCA1LjM2NS0xNC41Ni0xNC41NiA1LjM2NHoiLz4KPC9zdmc+Cg=="},4490:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE5LDEyLjU4NTc4NjQgTDE5LDEyIEMxOSw4LjEzNDAwNjc1IDE1Ljg2NTk5MzIsNSAxMiw1IEM4LjEzNDAwNjc1LDUgNSw4LjEzNDAwNjc1IDUsMTIgQzUsMTUuODY1OTkzMiA4LjEzNDAwNjc1LDE5IDEyLDE5IEMxMi41NTIyODQ3LDE5IDEzLDE5LjQ0NzcxNTMgMTMsMjAgQzEzLDIwLjU1MjI4NDcgMTIuNTUyMjg0NywyMSAxMiwyMSBDNy4wMjk0MzcyNSwyMSAzLDE2Ljk3MDU2MjcgMywxMiBDMyw3LjAyOTQzNzI1IDcuMDI5NDM3MjUsMyAxMiwzIEMxNi45NzA1NjI3LDMgMjEsNy4wMjk0MzcyNSAyMSwxMiBMMjEsMTIuNTg1Nzg2NCBMMjIuMjkyODkzMiwxMS4yOTI4OTMyIEMyMi42ODM0MTc1LDEwLjkwMjM2ODkgMjMuMzE2NTgyNSwxMC45MDIzNjg5IDIzLjcwNzEwNjgsMTEuMjkyODkzMiBDMjQuMDk3NjMxMSwxMS42ODM0MTc1IDI0LjA5NzYzMTEsMTIuMzE2NTgyNSAyMy43MDcxMDY4LDEyLjcwNzEwNjggTDIwLDE2LjQxNDIxMzYgTDE2LjI5Mjg5MzIsMTIuNzA3MTA2OCBDMTUuOTAyMzY4OSwxMi4zMTY1ODI1IDE1LjkwMjM2ODksMTEuNjgzNDE3NSAxNi4yOTI4OTMyLDExLjI5Mjg5MzIgQzE2LjY4MzQxNzUsMTAuOTAyMzY4OSAxNy4zMTY1ODI1LDEwLjkwMjM2ODkgMTcuNzA3MTA2OCwxMS4yOTI4OTMyIEwxOSwxMi41ODU3ODY0IFoiPjwvcGF0aD4KPC9zdmc+"},4491:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQgNnYxMi4wMDZMOS44MjggMTggMTIgMjAuMTcyIDE0LjE3MiAxOGg1LjgyMkwyMCA2SDR6bTAtMmgxNmEyIDIgMCAwIDEgMiAydjEyYTIgMiAwIDAgMS0yIDJoLTVsLTMgMy0zLTNINGEyIDIgMCAwIDEtMi0yVjZhMiAyIDAgMCAxIDItMnptNCA1YTEgMSAwIDEgMCAwIDJoOGExIDEgMCAwIDAgMC0ySDh6bTAgNGExIDEgMCAwIDAgMCAyaDhhMSAxIDAgMCAwIDAtMkg4eiIvPgo8L3N2Zz4K"},4492:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(1717),s=n(296),a=n(1718),l=n(563),d=n(181),c=n(362),p=n(447),u=n(847),h=n(235),m=n(187),g=n(2007),f=n(2078),b=n(2081),v=n(4264),x=n(53),y=n(485),w=n(276),C=n(822),k=n(2008),E=n(224),S=n(258),M=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.log.apply(t,Object(i.j)(["notes-cmt"],e))},I=function(e){function n(t,n,i,a){var l=e.call(this,t,c.a.COMMENT,S.a.NOT_A_JSON)||this;return l.cmtPositionChanged=new o.Signal,l.cmtLinkerChanged=new o.Signal,l.cmtColorChanged=new o.Signal,l.cmtOpenTimeChanged=new o.Signal,l.cmtMessagesChanged=new o.Signal,l.cmtLastReadableMessageChanged=new o.Signal,l.cmtResolveChanged=new o.Signal,l.viewChanged=new o.Signal,l.onMessagesReady=new o.Signal,l._lastReadableMessage=-1,l.lastReplyingMessage="",l.color=r.a.YELLOW,l.resolved=!1,l.searchResultType=p.a.COMMENT,l.isOpened=!1,l.created=!1,l.confirmed=!1,l.range={index:0,range:1},l._messages=[],l._openTime=s.a.getLong(0,0),l.controller=a,l.created=i,l.confirmed=i,l.onMessagesReady.memorize=!0,i?a.getReplies(l.tokenizer):l.setMessagesReady(),M("comment",t,n),l.setData(n),l}return Object(i.d)(n,e),n.prototype.destroy=function(){this.controller=void 0,this._messages=[],e.prototype.destroy.call(this)},n.prototype.objectCreated=function(){this.confirmed=!0,this.controller.commentConfirmed(this)},n.prototype.setData=function(t,e){void 0===e&&(e=!1),M("setData. has time",t.lastOpenTime),t.lastOpenTime&&(this.openTime=t.lastOpenTime),t.message&&(this._messages[0]=t.message,this.messages=this.messages),this._subscriptionMode=t.subscriptionMode},n.prototype.setMessagesReady=function(){this.onMessagesReady.dispatch()},n.prototype.getRepliesResponse=function(t){t.ok&&(this.messages=t.replies),this.setMessagesReady()},Object.defineProperty(n.prototype,"messages",{get:function(){return this._messages},set:function(t){t.forEach((function(t){t.__tk||(t.__tk=d.objectsRegistry.getTokenizerById(t.id))})),this._messages=t,this.isOpened?this.controller.markAsRead(this):this.hasUnreadMessages()&&this.controller.commentGotUpdates(this),Object(l.a)().setMentions(t),this.cmtMessagesChanged.dispatch(t)},enumerable:!1,configurable:!0}),n.prototype.hasUnreadMessages=function(){M("get unread",this.tokenizer);var t=Object(m.a)().myUserId;return Object(g.c)(this.openTime,this._messages,t)>0},n.prototype.updateMessage=function(t){if(this._messages)for(var e=0,n=this._messages.length;e<n;e++){var o=this._messages[e];if(t.__tk&&o.__tk==t.__tk){t.text&&(o.text=t.text),t.emojis&&(o.emojis=t.emojis),t.mentions&&Object(l.a)().setMentions(this._messages),this.cmtMessagesChanged.dispatch(this._messages);break}}},n.prototype.removeMessage=function(t,e){if(void 0===e&&(e=!0),this._messages)for(var n=0,o=this._messages.length;n<o;n++){var i=this._messages[n];if(i.__tk==t){e?this._messages.splice(n,1):i.hidden=!0,Object(l.a)().setMentions(this._messages),this.cmtMessagesChanged.dispatch(this._messages);break}}},n.prototype.clearLastReadableMessage=function(){this._lastReadableMessage=-1},n.prototype.setCmtMode=function(e){t.log("cmm","[Comment] setCmtMode",this,e,this.isOpened),e!=this.isOpened&&this.changeCommentMode(e)},n.prototype.changeCommentMode=function(t){t&&this.controller.markAsRead(this),this.isOpened=t,this.viewChanged.dispatch(this)},n.prototype.markAsReadLocal=function(){var t=d.canvasHistory.getLastTime().getNumber();this.messages.forEach((function(e){var n=h.g(e.timestampData).getTime();n>t&&(t=n)})),this.openTime=s.a.fromString(t.toString())},Object.defineProperty(n.prototype,"openTime",{get:function(){return this._openTime},set:function(t){this._openTime.compare(t)<0&&(M("update time"),this._openTime=t,this.cmtOpenTimeChanged.dispatch(t))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastReadableMessage",{get:function(){return this._lastReadableMessage},set:function(t){this._lastReadableMessage=t,this.cmtLastReadableMessageChanged.dispatch()},enumerable:!1,configurable:!0}),n.prototype.getData=function(){return new f.e(this._messages[0],0,!1,!1,this._openTime)},Object.defineProperty(n.prototype,"creatorId",{get:function(){return this._messages[0]?this._messages[0].senderId:s.a.getLong(0,0)},enumerable:!1,configurable:!0}),n.prototype.getTextsForSearch=function(){return this.messages.map((function(t,e){return new u.a(Object(k.a)(Object(w.c)(t.text)),+h.g(t.timestampData),t.id.toString())}))},n.prototype.toggleResolved=function(){this.resolved=!this.resolved},n.prototype.canRemove=function(){return this.canDeleteOrMoveThisComment()},n.prototype.canResolve=function(){return this.canDeleteOrMoveThisComment()},n.prototype.canDeleteOrMoveThisComment=function(){var t=E.a.getInfo().currentUserContext.role;return t==x.D.OWNER||t==x.D.EDITOR||t==x.D.COMMENTATOR&&this.creatorId===Object(m.a)().myUserId},n.prototype.toggleEmoji=function(t,e){var n=Object(m.a)().myUserId,o=-1;if(t.emojis?o=t.emojis.findIndex((function(t){return t.name===e})):t.emojis=[],-1==o)t.emojis.push(new b.f(e,[n],d.canvasHistory.getLastTime()));else{var i=t.emojis[o],r=i.users.indexOf(n);-1==r?i.users.push(n):i.users.length>1?i.users.splice(r,1):t.emojis.splice(o,1)}},n.prototype.getController=function(){return this.controller},n.prototype.commentGetOpenCommand=function(){return v.a.attrWid},n.prototype.commentCreateOnServer=function(t){this.controller.createOnServer(this,t)},n.prototype.commentDelete=function(t){void 0===t&&(t=!0),this.controller.commentDelete(this)},n.prototype.replyCreate=function(t){this.controller.createReply(this.tokenizer,t)},n.prototype.replyUpdate=function(t,e){C.a.noteCommentMessageChanged(this.tokenizer.id.toString(),t.__tk.id.toString(),"edited",t.text.length),this.controller.updateReply(this.tokenizer,t.__tk,t.text,e)},n.prototype.replyDelete=function(t){C.a.noteCommentMessageChanged(this.tokenizer.id.toString(),t.__tk.id.toString(),"removed",t.text.length),this.removeMessage(t.__tk,!1),this.controller.deleteReply(this.tokenizer,t)},n.prototype.replyToggleEmoji=function(t,e){this.toggleEmoji(t,e),M("replyToggleEmoji",t),this.controller.toggleEmoji(this.tokenizer,t.__tk,e)},Object.defineProperty(n.prototype,"subscriptionMode",{get:function(){return this._subscriptionMode},set:function(t){void 0!==t&&(this._subscriptionMode=t)},enumerable:!1,configurable:!0}),n.prototype.changeSubscriptionMode=function(t,e){var n=t?y.c.MANUALLY_SUBSCRIBED:y.c.MANUALLY_UNSUBSCRIBED;t?this.controller.subscribeThread(this.tokenizer,e):this.controller.unsubscribeThread(this.tokenizer,e),this.subscriptionMode=n},n}(a.a);e.a=I}).call(this,n(54),n(110))},4493:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l}));var o=n(0),i=n(239),r=n(618),s=function(){function t(){this.contentWidth=0,this.paddingHoriz=0,this.paddingVert=0}return t.prototype.attach=function(t){this.editor=t,Object(i.a)().rightSidebar.resized.add(this.onResizeInternal,this)},t.prototype.detach=function(){Object(i.a)().rightSidebar.resized.remove(this.onResizeInternal,this),this.editor=void 0,this.contentWidth=0,this.paddingHoriz=0},t.prototype.getWidth=function(){return this.update(),this.contentWidth},t.prototype.getPaddingHoriz=function(){return this.update(),this.paddingHoriz},t.prototype.getPaddingVert=function(){return this.update(),this.paddingVert},t.prototype.update=function(){this.contentWidth||this.onResize(Object(i.a)().rightSidebar.width)},t.prototype.onResizeInternal=function(t){this.onResize(t),this.editor.scrollContainer.style.padding=this.paddingVert+"px "+this.paddingHoriz+"px"},t.prototype.onResize=function(t){this.contentWidth=t},t}();e.c=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.onResize=function(t){var e=r.k,n=r.l;t-2*n>e?n=(t-e)/2:e=t-2*n,this.contentWidth=e,this.paddingHoriz=n,this.paddingVert=r.v},e}(s),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.onResize=function(t){this.contentWidth=t-2*r.m,this.paddingHoriz=r.m,this.paddingVert=r.v},e}(s)},4494:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));var o="notes/panelOpen",i="notes/panelScroll",r="notes/panelSize",s="notes/panelFontSize",a="notes/panelFullscreen"},4597:function(t,e,n){"use strict";var o=n(181),i=n(407),r=n(188),s=n.n(r),a=n(880),l=n(192),d=n(27);var c=n(4475),p=function(){function t(){}return t.getWidgets=function(t){var e=t.widgetsObject.getData(),n=o.objectsRegistry.getGameObject(e.alias),r=i.a.toTokenizers(n.getData().widgets);return o.objectsRegistry.getObjectsByTokenizers(r).filter((function(t){return!!t&&t.isPresent}))},t.createPreview=function(t,e,n,i){var r=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=-1);var i=[],r=[];t.forEach((function(t){return t.widgetType===d.G.FRAME?r.push(t):i.push(t)})),i=o.widgetController.sortWidgetsByZIndex(i);var c=Object(a.j)(i,r),p=l.g(t),u=1;e>0&&(u=Math.min(u,e/p.width)),n>0&&(u=Math.min(u,n/p.height));var h=new s.a.Rectangle(0,0,p.width*u*o.pixiCanvas.pixelRatio,p.height*u*o.pixiCanvas.pixelRatio),m=new s.a.RenderTexture("preview_texture_multi",h.width,h.height);return c.forEach((function(t){var e=t.getPreviewVisual?t.getPreviewVisual():t.box;t.setSnapshotMode(!0);var n=u*o.pixiCanvas.pixelRatio,i=new s.a.Matrix;i.rotate(t.rotationRadians),i.translate(t.x-p.x,t.y-p.y),i.scale(n,n),m.render(e,i,!1),t.setSnapshotMode(!1)})),m.setFrame(h.clone()),m}(e,n,i);return{width:r.baseTexture.width,height:r.baseTexture.height,preview:new Promise((function(e,n){r.baseTexture.source.toBlob((function(o){c.a.uploadBlob(t,o).then((function(t){e(t)}),(function(){n(null)}))}))}))}},t}();e.a=p},466:function(t,e,n){var o=n(467);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},467:function(t,e,n){(e=t.exports=n(177)(!1)).push([t.i,".tag-1gZRe {\n  display: inline-block;\n  height: 16px;\n  padding: 0 4px;\n  font-size: 11px;\n  line-height: 16px;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  background-color: rgba(66, 98, 255, 1);\n  background-color: var(--blue700);\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n  text-transform: uppercase;\n}\n.tag-1gZRe.tag_blue {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  background-color: rgba(66, 98, 255, 1);\n  background-color: var(--blue700);\n}\n.tag-1gZRe.tag_yellow {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  background-color: rgba(255, 208, 47, 1);\n  background-color: var(--yellow700);\n}\n.tag-1gZRe.tag_gray {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n}\n.tag-1gZRe.tag_indigo {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  background-color: rgba(5, 0, 56, 1);\n  background-color: var(--indigo700);\n}\n",""]),e.locals={tag:"tag-1gZRe"}},474:function(t,e,n){"use strict";var o=n(0),i=n(498),r=n(590),s=n(179),a=n(191),l=(n(289),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isOpened:!1},e}return Object(o.d)(e,t),e.prototype.componentDidMount=function(){this.props.hideOnScroll&&document.addEventListener("scroll",this.onClosed,!0)},e.prototype.componentWillUnmount=function(){this.props.hideOnScroll&&document.removeEventListener("scroll",this.onClosed,!0)},e.prototype.collectBoundariesElementModifier=function(t){if(t)return{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:t,priority:["bottom"],padding:20}}},e.prototype.onOpened=function(){this.state.isOpened||(this.props.onOpened&&this.props.onOpened(),this.setState({isOpened:!0}))},e.prototype.onClosed=function(){this.state.isOpened&&(this.props.onClosed&&this.props.onClosed(),this.setState({isOpened:!1}))},e.prototype.onSelectOption=function(t){this.onClosed(),this.props.onChange&&this.props.onChange(t)},e.prototype.render=function(){var t=this.props,e=t.text,n=t.selectedOption,o=t.defaultText,a=t.className,l=t.listClassName,d=t.options,c=t.menuPlacement,p=t.boundariesElement,u=t.children,h=t.autotestId,m=t.buttonAutotestId,g=t.isDisabled,f=t.isNoScrollToSelection,b=t.positionFixed,v=e||(n?n.key:o||"Choose");return s.d.createElement(i.a,{text:v,classNames:{main:a},isOpened:this.state.isOpened,onOpened:this.onOpened,onClosed:this.onClosed,dropdownToggle:u,placement:c,modifiers:this.collectBoundariesElementModifier(p),autotestId:h,buttonAutotestId:m,isDisabled:g,positionFixed:b},s.d.createElement(r.a,{options:d,className:l,selectedOption:n,onChange:this.onSelectOption,isNoScrollToSelection:f}))},Object(o.c)([a.a],e.prototype,"onOpened",null),Object(o.c)([a.a],e.prototype,"onClosed",null),Object(o.c)([a.a],e.prototype,"onSelectOption",null),e}(s.d.PureComponent));e.a=l},498:function(t,e,n){"use strict";var o=n(0),i=n(179),r=n(295),s=n(210),a=n(394),l=n(204),d=n(191),c=n(199),p=(n(289),function(t){function e(e){var n=t.call(this,e)||this;return n.refElement=i.d.createRef(),n.state={isOpened:!!e.isOpened},n}return Object(o.d)(e,t),e.prototype.toggleIsOpened=function(){var t=this.state.isOpened;this.props.isDisabled||(t?this.onClosed():this.onOpened())},e.prototype.onOpened=function(){this.props.onOpened&&this.props.onOpened(),this.setState({isOpened:!0})},e.prototype.onClosed=function(){this.props.onClosed&&this.props.onClosed(),this.setState({isOpened:!1})},e.prototype.clickOut=function(t){var e=t.target;this.refElement.current&&e&&!this.refElement.current.contains(e)&&this.onClosed()},e.prototype.onKeyDown=function(t){t.keyCode!==c.a.ESCAPE&&t.keyCode!==c.a.TAB||this.onClosed()},e.prototype.addOrRemoveListener=function(t){t?window.addEventListener("keydown",this.onKeyDown):window.removeEventListener("keydown",this.onKeyDown)},e.prototype.componentDidUpdate=function(t,e){e.isOpened!==this.props.isOpened&&this.setState({isOpened:!!this.props.isOpened})},e.prototype.renderButton=function(){var t=this.props,e=t.text,n=t.dropdownToggle,o=t.buttonAutotestId,r=t.isDisabled;return n?i.d.createElement(s.a.Anchor.div,{className:"rtb-select__button-container",hmTap:this.toggleIsOpened,dataAutoTestId:o},n):i.d.createElement(s.a.Anchor.button,{className:"rtb-select__button",hmTap:this.toggleIsOpened,dataAutoTestId:o,disabled:r},i.d.createElement("span",{className:"rtb-select__button-text"},e))},e.prototype.render=function(){var t=this.props,e=t.classNames,n=t.children,o=t.placement,s=void 0===o?"bottom-start":o,d=t.modifiers,c=t.dropdownPortalTarget,p=t.isDisabled,u=t.positionFixed,h=t.autotestId;return i.d.createElement("div",{className:Object(i.i)("rtb-select",null===e||void 0===e?void 0:e.main,{"rtb-select--disabled":p}),ref:this.refElement,"data-autotest-id":h},i.d.createElement(r.a,{isOpen:this.state.isOpened,timeoutInMs:70},this.renderButton(),i.d.createElement(a.a,{placement:s,className:Object(i.i)("rtb-select__popup",null===e||void 0===e?void 0:e.dropdown),modifiers:d,portalTarget:c,positionFixed:u},i.d.createElement(l.d,{onTapOut:this.clickOut},i.d.createElement("div",{className:Object(i.i)("rtb-select__options-wrapper rtb-select__options-wrapper--popper",null===e||void 0===e?void 0:e.wrapper),ref:this.addOrRemoveListener},n)))))},Object(o.c)([d.a],e.prototype,"toggleIsOpened",null),Object(o.c)([d.a],e.prototype,"clickOut",null),Object(o.c)([d.a],e.prototype,"onKeyDown",null),Object(o.c)([d.a],e.prototype,"addOrRemoveListener",null),e}(i.d.PureComponent));e.a=p},543:function(t,e,n){t.exports='<label class="rtb-checkbox" ng-class="{\'rtb-checkbox--disabled\': off === true}">\n\t<input\n\t\ttype="checkbox"\n\t\tname="{{::name}}"\n\t\tng-model="checked"\n\t\tng-model-options="modelOptions"\n\t\tng-change="onChange({$value: checked})"\n\t\tng-disabled="off"\n\t/>\n\t<span class="rtb-checkbox__check">\n\t\t<svg  class="rtb-checkbox__icon rtb-checkbox__icon--medium"    role="none" ><use xlink:href="'+n(299)+'"></use></svg>\n\t\t<svg  class="rtb-checkbox__icon rtb-checkbox__icon--large"    role="none" ><use xlink:href="'+n(304)+'"></use></svg>\n\t</span>\n\t<span class="rtb-checkbox__label" ng-if="label">\n\t\t<span ng-bind-html="label"></span>\n\t\t<span class="rtb-checkbox__label-extends">\n\t\t\t<ng-transclude></ng-transclude>\n\t\t</span>\n\t</span>\n</label>\n'},564:function(t,e,n){"use strict";var o=n(0),i=n(179),r=n(191),s=n(370),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.onSelect=function(){this.props.onSelect&&this.props.onSelect(this.props.option)},e.prototype.renderDivider=function(){return this.props.option.divider?i.d.createElement("div",{className:"rtb-select__divider"}):null},e.prototype.render=function(){var t=this.props,e=t.option,o=t.isFocused,r=t.disabled,a=t.dataAutoTestId,l=t.style;if(e.hidden)return null;var d=e.icon?i.d.createElement("svg",{className:"option-icon",role:"presentation"},i.d.createElement("use",{xlinkHref:e.icon})):null,c=e.checked?i.d.createElement("svg",{className:"option-checkmark",alt:"checked",role:"img","aria-labelledby":"svgtitle-5"},i.d.createElement("title",{id:"svgtitle-5"},"checked"),i.d.createElement("use",{xlinkHref:n(304)})):null;return i.d.createElement("div",{"data-auto-test-id":a,style:l},e.text&&i.d.createElement("span",null,e.text),i.d.createElement(i.f.NoDom,{hmTap:this.onSelect},i.d.createElement("button",{className:Object(i.i)("rtb-select__option",{"rtb-select__option--focused":!!o},{"rtb-select__option--disabled":r},{"rtb-select__option--with-text":e.text},{"rtb-select__option--with-tag":e.tagText},{"rtb-select__option--destructive-action":e.isDestructive},e.className),key:e.value,ref:this.props.refElement,disabled:e.disabled,"data-autotest-id":e.dataAutotestId},d,e.element||e.key,c,e.tagText&&i.d.createElement(s.a,{className:"rtb-select__tag",type:e.tagType},e.tagText))),this.renderDivider())},Object(o.c)([r.a],e.prototype,"onSelect",null),e}(i.d.PureComponent);e.a=a},590:function(t,e,n){"use strict";var o=n(0),i=n(564),r=n(179),s=n(191),a=n(199),l=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.state={selectedIndex:e.getSelectedIndex(n.props)},n}return Object(o.d)(e,t),e.getSelectedIndex=function(t){var e=t.selectedOption;return e?t.options.indexOf(e):-1},e.prototype.UNSAFE_componentWillReceiveProps=function(t){this.props.selectedOption!==t.selectedOption&&this.setState({selectedIndex:e.getSelectedIndex(t)})},e.prototype.addOrRemoveListener=function(t){t?window.addEventListener("keydown",this.onKeyDown):window.removeEventListener("keydown",this.onKeyDown)},e.prototype.setSelectedOption=function(t){t&&(this.setState({selectedIndex:e.getSelectedIndex(this.props)}),this.onSelectOption(t))},e.prototype.onKeyDown=function(t){switch(t.keyCode){case a.a.DOWN_ARROW:this.state.selectedIndex<this.props.options.length-1&&this.setState({selectedIndex:this.state.selectedIndex+1});break;case a.a.UP_ARROW:this.state.selectedIndex>0&&this.setState({selectedIndex:this.state.selectedIndex-1});break;case a.a.ENTER:this.setSelectedOption(this.props.options[this.state.selectedIndex]),t.preventDefault()}this.props.onKeyDown&&this.props.onKeyDown(t)},e.prototype.onSelectOption=function(t){this.props.onChange&&this.props.onChange(t)},e.prototype.isFocused=function(t){return this.state.selectedIndex===this.props.options.indexOf(t)},e.prototype.scrollToOption=function(t){t&&t.scrollIntoView({block:"nearest"})},e.prototype.render=function(){var t=this,e=this.props,n=e.options,o=e.className,s=e.dataAutoTestId,a=e.isNoScrollToSelection,l=n.map((function(e,n){var o=t.isFocused(e),l=e.disabled;return r.d.createElement(i.a,{key:n,option:e,isFocused:o,disabled:l,onSelect:t.setSelectedOption,refElement:!a&&o&&t.scrollToOption||null,dataAutoTestId:s})}));return r.d.createElement("div",{className:Object(r.i)("rtb-select__options",o),ref:this.addOrRemoveListener,"no-prevent-default":"true"},l)},Object(o.c)([s.a],e.prototype,"addOrRemoveListener",null),Object(o.c)([s.a],e.prototype,"setSelectedOption",null),Object(o.c)([s.a],e.prototype,"onKeyDown",null),e}(r.d.PureComponent);e.a=l},618:function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return p})),n.d(e,"j",(function(){return u})),n.d(e,"r",(function(){return g})),n.d(e,"s",(function(){return f})),n.d(e,"t",(function(){return b})),n.d(e,"d",(function(){return v})),n.d(e,"u",(function(){return x})),n.d(e,"q",(function(){return y})),n.d(e,"p",(function(){return w})),n.d(e,"b",(function(){return C})),n.d(e,"a",(function(){return k})),n.d(e,"g",(function(){return E})),n.d(e,"i",(function(){return S})),n.d(e,"c",(function(){return M})),n.d(e,"k",(function(){return I})),n.d(e,"l",(function(){return _})),n.d(e,"m",(function(){return q})),n.d(e,"v",(function(){return O})),n.d(e,"n",(function(){return i})),n.d(e,"o",(function(){return j}));var o,i,r=n(246),s=n(282),a=n(885),l=n.n(a),d=["author","mainAuthor"],c=["color","background","update"],p=["bold","italic","underline","strike","header","link","list","indent","color","background","author","mention","widgetsRef","width","height","image","align","direction","code","comment"],u=["mainAuthor"],h=l()(Object(r.o)(!1,!0)).map((function(t){return s.a.intColorToHEX(t)})),m=l()(Object(r.o)(!0,!0)).map((function(t){return t==r.r?"":s.a.intColorToHEX(t)})),g=/\.(gif|bmp|jpg|jpeg|png|svg)(\\?.*)?$/,f=["image/png","image/jpeg","image/svg","image/gif","image/bmp"],b=/\image\/(gif|bmp|jpg|jpeg|png|svg)$/,v="comment-",x="updated-comm",y=1,w=50,C=50,k=5,E=100,S=400,M=14,I=640,_=64,q=44,O=20;!function(t){t.EDIT="edit",t.VIEW="view",t.COMMENT="comment"}(i||(i={}));var j=((o={})[i.EDIT]=[["formatpicker"],["bui",{color:h},{background:m}],["link","comment"]],o[i.COMMENT]=[["comment"]],o[i.VIEW]=[],o)},628:function(t,e,n){var o=n(629);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},629:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".base-picture {\n  background: rgba(205, 204, 215, 1);\n  background: var(--indigo400);\n  overflow: hidden;\n  position: relative;\n  width: 30px;\n  height: 30px;\n}\n.base-picture img {\n  vertical-align: top;\n}\n.base-picture img {\n  width: 30px;\n  height: 30px;\n  min-width: 30px;\n  max-width: 30px;\n  min-height: 30px;\n  max-height: 30px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size12 {\n  width: 12px;\n  height: 12px;\n}\n.base-picture.base-picture--size12 img {\n  width: 12px;\n  height: 12px;\n  min-width: 12px;\n  max-width: 12px;\n  min-height: 12px;\n  max-height: 12px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size12 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size16 {\n  width: 16px;\n  height: 16px;\n}\n.base-picture.base-picture--size16 img {\n  width: 16px;\n  height: 16px;\n  min-width: 16px;\n  max-width: 16px;\n  min-height: 16px;\n  max-height: 16px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size16 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size24 {\n  width: 24px;\n  height: 24px;\n}\n.base-picture.base-picture--size24 img {\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  max-width: 24px;\n  min-height: 24px;\n  max-height: 24px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size24 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size30 {\n  width: 30px;\n  height: 30px;\n}\n.base-picture.base-picture--size30 img {\n  width: 30px;\n  height: 30px;\n  min-width: 30px;\n  max-width: 30px;\n  min-height: 30px;\n  max-height: 30px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size30 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size32 {\n  width: 32px;\n  height: 32px;\n}\n.base-picture.base-picture--size32 img {\n  width: 32px;\n  height: 32px;\n  min-width: 32px;\n  max-width: 32px;\n  min-height: 32px;\n  max-height: 32px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size32 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size36 {\n  width: 36px;\n  height: 36px;\n}\n.base-picture.base-picture--size36 img {\n  width: 36px;\n  height: 36px;\n  min-width: 36px;\n  max-width: 36px;\n  min-height: 36px;\n  max-height: 36px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size36 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size74 {\n  width: 74px;\n  height: 74px;\n}\n.base-picture.base-picture--size74 img {\n  width: 74px;\n  height: 74px;\n  min-width: 74px;\n  max-width: 74px;\n  min-height: 74px;\n  max-height: 74px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size74 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size140 {\n  width: 140px;\n  height: 140px;\n}\n.base-picture.base-picture--size140 img {\n  width: 140px;\n  height: 140px;\n  min-width: 140px;\n  max-width: 140px;\n  min-height: 140px;\n  max-height: 140px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size140 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size180 {\n  width: 180px;\n  height: 180px;\n}\n.base-picture.base-picture--size180 img {\n  width: 180px;\n  height: 180px;\n  min-width: 180px;\n  max-width: 180px;\n  min-height: 180px;\n  max-height: 180px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size180 img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--size100percent {\n  width: 100%;\n  height: 100%;\n}\n.base-picture.base-picture--size100percent img {\n  width: 100%;\n  height: 100%;\n  min-width: 100%;\n  max-width: 100%;\n  min-height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .base-picture.base-picture--size100percent img {\n    width: auto;\n    height: auto;\n  }\n}\n.base-picture.base-picture--collapsed {\n  display: none;\n}\n.base-picture .base-picture--cover {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: rgba(205, 204, 215, 1);\n  background: var(--indigo400);\n  top: 0;\n}\n",""])},630:function(t,e,n){var o=n(631);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},631:function(t,e,n){(e=t.exports=n(177)(!1)).push([t.i,".userPictureClass-1_AdH {\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n}\n",""]),e.locals={userPictureClass:"userPictureClass-1_AdH"}},632:function(t,e,n){var o=n(633);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},633:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".color-user-picture {\n  position: relative;\n  width: 29px;\n  height: 29px;\n}\n.color-user-picture svg {\n  width: 29px;\n  height: 29px;\n  min-width: 29px;\n  max-width: 29px;\n  min-height: 29px;\n  max-height: 29px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .color-user-picture svg {\n    width: auto;\n    height: auto;\n  }\n}\n.color-user-picture--cover {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: rgba(205, 204, 215, 1);\n  background: var(--indigo400);\n  top: 0;\n}\n.color-user-picture--inactive svg img {\n  opacity: 0.5;\n}\n",""])},634:function(t,e,n){var o=n(635);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},635:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".picture-with-icon {\n  display: -ms-flexbox;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n}\n.picture-with-icon use:first-child {\n  fill: #fff;\n  /* should not be a variable to prevent picture opacity */\n}\n.picture-with-icon__icon {\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n  position: absolute;\n  right: 0;\n  bottom: 0;\n}\n.picture-with-icon--collapsed {\n  display: none;\n}\n.picture-with-icon--cover {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: rgba(205, 204, 215, 1);\n  background: var(--indigo400);\n  top: 0;\n}\n",""])},636:function(t,e,n){var o=n(637);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},637:function(t,e,n){(e=t.exports=n(177)(!1)).push([t.i,".teamPicture-2ZSAc {\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n}\n",""]),e.locals={teamPicture:"teamPicture-2ZSAc"}},747:function(t,e,n){"use strict";var o=n(282),i=n(0),r=n(411),s=n.n(r),a=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.blockExtensions=[],i}return Object(i.d)(e,t),e.prototype.attach=function(){t.prototype.attach.call(this),this.scroll.emitMount(this)},e.prototype.createUiNode=function(){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=this.domNode.ownerDocument.createElement("span"),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)},e.prototype.attachUIElement=function(t,e){null==this.uiNode&&this.createUiNode(),t&&e&&this.addExtension(t,e)},e.prototype.addExtension=function(t,e){this.blockExtensions.find((function(t){return t.name===e}))||(this.uiNode.appendChild(t),this.blockExtensions.push({name:e,node:t}))},e.prototype.getExtensionElement=function(t){return this.blockExtensions.find((function(e){return e.name===t}))},e}(s.a.import("blots/block/embed")),l=n(2087),d=n(618),c=n(16),p=s.a.import("blots/block"),u=[16764975,4350719,16737653,5821314,16764108,12866232,7391467,8486809,327736],h=function(){function t(){}return t.removeDefaultBlockAttributes=function(t){return t&&t.ops&&t.ops.forEach((function(t){var e=t.attributes;e&&Object.keys(e).forEach((function(t){-1!==d.e.indexOf(t)&&delete e[t]}))})),t},t.dropFormats=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=[]),Object.keys(t).reduce((function(t,e){return-1==n.indexOf(e)&&(t[e]=null),t}),e)},t.isFormattingDelta=function(t){return t.reduce((function(t,e){return!e.insert&&!e.delete&&t}),!0)},t.getAffectedLinesFromDelta=function(t,e){if(!e.ops)return[];var n,o=0;return e.ops[0].retain&&(o=e.ops[0].retain),n=e.length()-o,t.getLines(o,n)},t.getEditsLength=function(t){return t.reduce((function(t,e){var n=0;return e.insert&&(n="string"===typeof e.insert?e.insert.length:1),t+n}),0)},t.isEmbedLine=function(t){return 2==t.length()&&t.children.head instanceof l.b},t.findBlot=function(e){if(!e)return null;var n=s.a.find(e);return!n&&e.parentNode?t.findBlot(e.parentNode):n},t.getFirstLevelParent=function(t){for(var e=t.parent;e.parent!=t.scroll;)e=e.parent;return e},t.getOpLength=function(t){return t.retain||t.insert.length||1},t.isEmptyLine=function(t){return t instanceof p&&t.length()<=1},t.indexWithinQuillBounds=function(t,e){return t=Math.max(t,0),t=Math.min(t,e.getLength())},t.leafIsValid=function(t){return t&&t[0]&&t[0].domNode&&t[1]>=0},t.getDomRangeForQuillRange=function(e,n){var o=t.indexWithinQuillBounds(e.index,n),i=t.indexWithinQuillBounds(e.index+e.length,n),r=n.getLeaf(o),s=n.getLeaf(i);if(!t.leafIsValid(r)||!t.leafIsValid(s))return null;var l=document.createRange();return 1==e.length&&r[0]instanceof a?l.selectNode(r[0].getContentNode()):(l.setStart(r[0].domNode,r[1]),l.setEnd(s[0].domNode,s[1])),l},t.getDomRectsForRange=function(e,n){var o=t.getDomRangeForQuillRange(e,n);if(!o)return null;var i=Array.from(o.getClientRects());if(c.a.msie){var r=t.indexWithinQuillBounds(e.index,n),s=n.getLeaf(r);1==e.length&&s[0]instanceof l.b&&(i=[s[0].domNode.getBoundingClientRect()])}var a=[],d=[],p="";if(i.forEach((function(t){p=""+t.top+t.left+t.width,!~d.indexOf(p)&&t.width>1&&(d.push(p),a.push(t))})),a.length>1){var u=n.getLines(e.index,e.length),h=[];u.forEach((function(t){var e=t.domNode.getBoundingClientRect();a.forEach((function(t){(t.top==e.top&&t.height==e.height||t.left<e.left-4)&&h.push(t)}))})),h.forEach((function(t){var e=a.indexOf(t);-1!=e&&a.splice(e,1)}))}return a},t.getBoundsForQuillRange=function(e,n){var o={top:0,bottom:0},i=t.getDomRectsForRange(e,n);return i?(i.forEach((function(t){(!o.top||t.top<=o.top)&&(o.top=t.top),(!o.bottom||t.bottom>=o.bottom)&&(o.bottom=t.bottom)})),o):o},t.getColorForUser=function(t){if(t){var e=parseInt(t.substring(t.length-1,t.length),10);return o.a.intColorToHEX(u[e])}},t.getTopLevelBlot=function(t,e){if(!t)return null;var n=t===e.scroll,o=t.parent===e.scroll,i=t.domNode instanceof HTMLLIElement;return n||o||i?t:this.getTopLevelBlot(t.parent,e)},t}();e.a=h},7617:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(359),s=n(7618),a=n(239),l=n(547),d=n(194),c=n(338),p=n(242),u=n(1477),h=n(1883),m=n(345),g=n(967),f=n(822),b=n(456),v=n(58),x=n(27),y=n(191),w=n(2799),C=n(7635),k=n(1193),E=n(618),S=n(7636),M=n(181),I=n(187),_=n(228),q=n(277),O=n(42),j=n(43),T=n(17),A=n(55),L=n(290),D=n(288),N=n(214),z=n(16),P=2e5,R=function(){function e(e,n){this.$scope=e,this.$element=n,this.allowDisconnect=!1,this.subscribed=!1,this.uiVisible=!0,this.closed=new t.Signal,this.notificationMessage="",this.notificationMessagePriority=0,this.notificationVisibility=!1,this.focusedWrapper=this.focused.bind(this),this.compositionStartWrapper=this.onCompositionStart.bind(this),this.compositionEndWrapper=this.onCompositionEnd.bind(this),this.undoEnabled=!1,this.redoEnabled=!1,this.isExportAvailable=!z.a.mobileApp,this.isGuestUser=!z.a.mobileApp&&Object(I.a)().userType!==_.a.REGULAR,this.isAllowedToCopyByAnyone=Object(q.q)(Object(d.a)().canvasBoardInfo),this.shouldShowSignUp=this.isGuestUser&&this.isAllowedToCopyByAnyone&&!Object(q.i)(Object(d.a)().canvasBoardInfo),this.isCommentsAvailable=!z.a.mobileApp,this.isIE=z.a.msie,this.module=l.a.instance,this.initEditor(),e.showHelpPopup=!1,e.showRatePopup=!1,e.isCursorsActive=!0,e.isAuthorshipActive=!0,e.exportMenuVisibility=!1,e.isMobileApp=z.a.mobileApp,this.$sidebarElem=o(".right-sidebar"),this.allowDisconnect=c.a(c.b.FUNNY_NOTES),this.fontSizeModule=z.a.mobileApp?void 0:new C.a(this,this.$scope),this.onlineUsersModule=new S.a(this.module,this,this.$scope),this.restoreAuthorshipState(),this.restoreHistoryState(),this.restoreScrollState(),this.restoreSyncState(),this.restoreScreenShareState(),this.addListeners(),e.module=this.module}return e.prototype.onTemplateSelect=function(t){this.noteEditor.insertTemplate(t)},e.prototype.initEditor=function(){var t=this,e=this.module.editor,n=o(e?e.editor.container:'<div class="miro-notes--editor" no-prevent-default="true"></div>');o("#noteEditor").append(n),e?setTimeout((function(){t.noteEditor.setFocusInEmptyEditor(),t.noteEditor.dispatchEditorModeSignals()}),300):(e=new s.a(n[0],{maxTextLength:P}),this.module.editor=e),this.noteEditor=e},e.prototype.destroy=function(){this.removeListeners()},e.prototype.addListeners=function(){this.module.onPanelClose.add(this.destroy,this),this.noteEditor.focused.add(this.focused,this),this.noteEditor.blurred.add(this.blurred,this),this.noteEditor.noteBlankStateChanged.add(this.onNoteBlankStateChanged,this),this.noteEditor.editorModeChanged.add(this.onNoteEditorModeChanged,this),this.noteEditor.showNotesNotification.add(this.showNotesNotification,this),this.noteEditor.hideNotesNotification.add(this.hideNotesNotification,this),this.noteEditor.finishNotesLoading.add(this.hideNotesNotification,this),this.noteEditor.modules.counter.noteTextLimitReached.add(this.showLimitReached,this),this.noteEditor.editor.root.addEventListener("mousedown",this.focusedWrapper),this.noteEditor.modules.history.stateChanged.add(this.onHistoryStateChanged,this),Object(d.a)().currentBoard.permissionsChanged.add(this.onPermissionsChanged,this),k.d.add(this.onScreenShareChanged,this),this.module.connection.onStateChanged.add(this.onConnectionStateChanged,this),this.module.collab.syncStateChanged.add(this.onSyncStateChanged,this),z.a.android&&z.a.isTouchSupportedAndNotDesktop&&w.d.add(this.onResize,this),this.noteEditor.editor.scroll.domNode.addEventListener("compositionstart",this.compositionStartWrapper),this.noteEditor.editor.scroll.domNode.addEventListener("compositionend",this.compositionEndWrapper)},e.prototype.onCompositionStart=function(){this.isComposition=!0,this.$scope.safeDigest()},e.prototype.onCompositionEnd=function(){this.isComposition=!1,this.$scope.safeDigest()},e.prototype.removeListeners=function(){this.noteEditor.editor.scroll.domNode.removeEventListener("compositionstart",this.compositionStartWrapper),this.noteEditor.editor.scroll.domNode.removeEventListener("compositionend",this.compositionEndWrapper),this.module.onPanelClose.remove(this.destroy,this),this.noteEditor.focused.remove(this.focused,this),this.noteEditor.blurred.remove(this.blurred,this),this.noteEditor.editorModeChanged.remove(this.onNoteEditorModeChanged,this),this.noteEditor.noteBlankStateChanged.remove(this.onNoteBlankStateChanged,this),this.noteEditor.showNotesNotification.remove(this.showNotesNotification,this),this.noteEditor.hideNotesNotification.remove(this.hideNotesNotification,this),this.noteEditor.finishNotesLoading.remove(this.hideNotesNotification,this),this.noteEditor.modules.counter.noteTextLimitReached.remove(this.showLimitReached,this),this.noteEditor.editor.root.removeEventListener("mousedown",this.focusedWrapper),this.noteEditor.modules.history.stateChanged.remove(this.onHistoryStateChanged,this),Object(d.a)().currentBoard.permissionsChanged.remove(this.onPermissionsChanged,this),k.d.remove(this.onScreenShareChanged,this),this.module.connection.onStateChanged.remove(this.onConnectionStateChanged,this),this.module.collab.syncStateChanged.remove(this.onSyncStateChanged,this),z.a.android&&z.a.isTouchSupportedAndNotDesktop&&w.d.remove(this.onResize,this)},Object.defineProperty(e.prototype,"element",{get:function(){return this.$element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sidebarElement",{get:function(){return this.$sidebarElem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullscreen",{get:function(){return Object(a.a)().rightSidebar.fullscreen},set:function(t){t&&M.mySelection.clearSelection(),Object(a.a)().rightSidebar.setFullscreen(t)},enumerable:!1,configurable:!0}),e.prototype.onNoteBlankStateChanged=function(t){this.noteEditorBlankState=t,this.$scope.safeApply()},e.prototype.onNoteEditorModeChanged=function(t){this.noteEditorMode=t},e.prototype.toggleExportMenu=function(){this.$scope.exportMenuVisibility=!this.$scope.exportMenuVisibility},e.prototype.hideExportMenu=function(){this.$scope.exportMenuVisibility=!1},e.prototype.copyLink=function(){this.hideExportMenu();var t="?openNotes";this.fullscreen&&(t+="=fullscreen"),Object(b.a)(Object(v.c)()+t,{notifications:{successMessage:"Link copied to clipboard"}}),f.a.noteLinkCopied("document")},e.prototype.exportNote=function(t){void 0===t&&(t="pdf"),this.hideExportMenu(),this.noteEditor.modules.exporter.exportNote(t),f.a.noteExport(t)},e.prototype.onConnectionStateChanged=function(t){this.onPermissionsChanged(),this.subscribed=t!=u.a.DISCONNECTED,this.subscribed?this.hideNotesNotification():(this.allowDisconnect||this.noteEditor.setMode(E.n.VIEW,!0),this.$scope.safeApply(),this.onSyncStateChanged(!1),this.showNotesNotification(h.i,!1,10))},e.prototype.toggleFun=function(){this.subscribed?this.module.connection.disconnect():this.module.connection.connect()},e.prototype.restoreScreenShareState=function(){this.onScreenShareChanged(Object(k.a)())},e.prototype.onScreenShareChanged=function(t){this.uiVisible=t!=x.v.WATCHER},e.prototype.onPermissionsChanged=function(){var t=E.n.VIEW;this.module.collab.isSyncing||(Object(d.a)().currentBoard.canCreateAndEditWidgets()?t=E.n.EDIT:Object(d.a)().currentBoard.canCreateAndEditComments()&&(t=E.n.COMMENT)),this.noteEditor.setMode(this.allowDisconnect?E.n.EDIT:t,!0)},e.prototype.restoreScrollState=function(){this.noteEditor.scrollProcessor.restoreScrollState()},e.prototype.showLimitReached=function(){this.showNotesNotification(Object(h.m)(P),!0)},e.prototype.onHistoryStateChanged=function(t,e){this.undoEnabled=t,this.redoEnabled=e,this.$scope.safeApply()},e.prototype.undo=function(){this.noteEditor.modules.history.undo()},e.prototype.redo=function(){this.noteEditor.modules.history.redo()},e.prototype.showNotesNotification=function(t,e,n){var o=this;void 0===e&&(e=!1),void 0===n&&(n=0),n<this.notificationMessagePriority||(this.notificationMessage=t,this.notificationMessagePriority=n,this.notificationVisibility=!0,this.$scope.safeApply(),e&&setTimeout((function(){o.hideNotesNotification()}),3e3))},e.prototype.hideNotesNotification=function(){this.notificationVisibility=!1,this.$scope.safeApply(),this.notificationMessage="",this.notificationMessagePriority=0},e.prototype.focused=function(){Object(r.a)().setFocus(m.a.NOTES),this.hideExportMenu()},e.prototype.blurred=function(){},e.prototype.userClicked=function(t){this.noteEditor.modules.cursors.scrollToCursor(t.clientId)},e.prototype.toggleCursors=function(){this.$scope.isCursorsActive=!this.$scope.isCursorsActive,this.$scope.isCursorsActive?this.noteEditor.modules.cursors.showCursors():this.noteEditor.modules.cursors.hideCursors()},e.prototype.restoreHistoryState=function(){var t=this.noteEditor.modules.history;this.onHistoryStateChanged(t.undoEnabled,t.redoEnabled)},e.prototype.toggleAuthorship=function(){this.$scope.isAuthorshipActive=!this.$scope.isAuthorshipActive,Object(p.setItem)("rtb_notes_authorship",this.$scope.isAuthorshipActive),this.updateAuthorship(),f.a.noteAuthorshopSwitched(this.$scope.isAuthorshipActive)},e.prototype.restoreAuthorshipState=function(){var t=Object(p.getItem)("rtb_notes_authorship");t&&(this.$scope.isAuthorshipActive="true"===t),this.updateAuthorship()},e.prototype.updateAuthorship=function(){this.$scope.isAuthorshipActive?this.noteEditor.modules.authorship.enableAuthorship():this.noteEditor.modules.authorship.disableAuthorship()},e.prototype.restoreSyncState=function(){this.onSyncStateChanged(this.module.collab.isSyncing)},e.prototype.onSyncStateChanged=function(t){t?this.showNotesNotification(h.j):this.hideNotesNotification(),this.onPermissionsChanged()},e.prototype.onResize=function(){document.activeElement===this.noteEditor.editor.root&&this.noteEditor.editor.focus()},e.prototype.close=function(t){var e=this;return void 0===t&&(t=!1),new Promise((function(t){e.closed.dispatch(),z.a.mobileApp&&z.a.android?setTimeout((function(){e.module.closePanel(g.b.CROSS),t()}),300):(e.module.closePanel(g.b.CROSS),t())}))},e.prototype.closeAndWaitAnimation=function(t){return void 0===t&&(t=!1),this.close(t).then((function(){return new Promise((function(t){setTimeout((function(){t()}),300)}))}))},e.prototype.toggleHelp=function(t,e){void 0===e&&(e="clicked_button"),this.$scope.showHelpPopup!=t&&(this.$scope.showHelpPopup=t,t?f.a.noteHelpOpened(e):this.$scope.isMobileApp||this.noteEditor.editor.focus())},e.prototype.toggleRate=function(t){this.$scope.showRatePopup=t},e.prototype.showSignUpPage=function(){var t=Object(d.a)().currentBoard.__boardInfo__.currentUserContext.role;Object(O.a)().sendApiEvent("guest_auth_or_reg_clicked",{clicked_from:"canvas_context_menu",guest_type:t.toLocaleLowerCase(),action_type:"sign_up",cookie_enabled:!N.a.isCookiesBlocked});var e=Object(j.i)(T.g.USE_TEMPLATE),n=e?void 0:Object(d.a)().getBoardId(),o=e?Object(A.e)(location.pathname):void 0;Object(D.a)().dispatch(Object(L.j)({openBoardId:n,copyBoardId:o}))},e.$inject=["$scope","$element"],Object(i.c)([y.a],e.prototype,"onResize",null),e}();e.a=R}).call(this,n(110),n(193))},7618:function(t,e,n){"use strict";(function(t){var o=n(0),i=n(411),r=n.n(i),s=n(11257),a=n(7633),l=n(58),d=n(460),c=n.n(d),p=n(618),u=n(4492),h=n(7634),m=n(547),g=n(1883),f=n(822),b=n(4493),v=n(239),x=n(4474),y=n(747),w=n(12),C=n(4476),k=n(16),E=r.a.import("delta"),S=function(){function e(e,n){var o=this;this.options=n,this.notesInitialized=!1,this.noteTextChanged=new t.Signal,this.noteSelectionChanged=new t.Signal,this.noteEditorChanged=new t.Signal,this.noteBlankStateChanged=new t.Signal,this.quillInstanceCreated=new t.Signal,this.editorModeChanged=new t.Signal,this.showNotesNotification=new t.Signal,this.hideNotesNotification=new t.Signal,this.commonEmbedActions=[],this.noteContentChanged=new t.Signal,this.focused=new t.Signal,this.blurred=new t.Signal,this.finishNotesLoading=new t.Signal,this._fontSize=p.c,this.hiddableElements=[],this.hideStateChanged=new t.Signal,this.interfaceHidden=!1,this.onScroll=function(t,e){e&&o.processHiddableElements()},s.a(),this.editor=new r.a(e,{debug:"error",modules:x.b(this),bounds:e,theme:"miro",formats:p.h.concat(p.j)}),this.modules=x.a(this.editor),this.quillInstanceCreated.dispatch(this.editor,e),this.editor.root.setAttribute("no-prevent-default","true"),this.editor.root.setAttribute("tabIndex","-1"),this.editor.root.addEventListener("focus",this.onFocus.bind(this)),this.editor.root.addEventListener("blur",this.onBlur.bind(this)),this.editor.on("editor-change",this.onEditorChange.bind(this)),this.editor.clipboard.addMatcher(Node.ELEMENT_NODE,this.cleanUpFormatting.bind(this)),r.a.import("formats/link").sanitize=this.sanitizeUrl.bind(this),this.scrollContainer=this.editor.scrollingContainer,this.scrollProcessor=new h.a(this.scrollContainer),this.scrollProcessor.scrolled.add(this.onScroll),this.defaultContentSizeProcessor=k.a.mobile?new b.b:new b.a,this.restoreContentSizeProcessor(),this.finishNotesLoading.memorize=!0,this.setMode(p.n.VIEW,!1,!1),Object(m.a)().then((function(t){t.onPanelOpen.add((function(){o.processHiddableElements(),o.dropSelection(),Object(v.a)().rightSidebar.resized.add(o.onSidebarResized,o)})),t.onPanelClose.add((function(){clearTimeout(o.resizeTimeout),Object(v.a)().rightSidebar.resized.remove(o.onSidebarResized,o)}))}))}return e.prototype.onSidebarResized=function(t){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){f.a.noteTransformed(),e.resizeTimeout=void 0}),400),this.processHiddableElements()},e.prototype.getContentSizeProcessor=function(){return this.contentSizeProcessor},e.prototype.changeContentSizeProcessor=function(t){this.contentSizeProcessor&&this.contentSizeProcessor.detach(),this.contentSizeProcessor=t,this.contentSizeProcessor.attach(this)},e.prototype.restoreContentSizeProcessor=function(){this.contentSizeProcessor!=this.defaultContentSizeProcessor&&this.changeContentSizeProcessor(this.defaultContentSizeProcessor)},e.prototype.getMaxWidthEditorContent=function(){return this.contentSizeProcessor.getWidth()},e.prototype.addToHiddableElements=function(t){-1==this.hiddableElements.findIndex((function(e){return e.el==t.el}))&&this.hiddableElements.push(t)},e.prototype.removeFromHiddableElements=function(t){var e=this.hiddableElements.findIndex((function(e){return e.el==t}));-1!=e&&this.hiddableElements.slice(e,1)},e.prototype.dropSelection=function(){this.editor.setSelection(null),this.modules.embedProcessor.hide()},e.prototype.processHiddableElements=function(){var t=this;this.interfaceHidden||(this.editor.theme.tooltip.hide(),this.hiddableElements.forEach((function(t){t.el.classList.add("ql-hidden")})),this.interfaceHidden=!0,this.hideStateChanged.dispatch(!0)),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout((function(){t.hiddableElements.forEach((function(t){t.el.classList.remove("ql-hidden"),t.callback()}));var e=t.editor.getSelection();e&&e.length&&t.editor.theme.tooltip.show(),t.interfaceHidden=!1,t.hideStateChanged.dispatch(!1)}),p.i)},e.prototype.sanitizeUrl=function(t){var e=Object(l.f)(t);return Object(w.i)(e)?e:"about:blank"},e.prototype.cleanUpFormatting=function(t,e){var n=p.f.reduce((function(t,e){return t[e]=null,t}),{}),o=(new E).retain(e.length(),n);return e.compose(o)},e.prototype.onFocus=function(){this.focused.dispatch()},e.prototype.onBlur=function(){this.blurred.dispatch()},e.prototype.checkForBlank=function(){var t;if(0===this.editor.scroll.children.length)t=!0;else if(1===this.editor.scroll.children.length){var e=this.editor.scroll.children.head;1===this.editor.scroll.children.length&&e instanceof C.a&&1==e.length()&&(t=!0)}else t=!1;t!==this.isBlank&&this.noteBlankStateChanged.dispatch(t),this.isBlank=t},e.prototype.onEditorChange=function(t){for(var e,n,i,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];"text-change"===t?(this.onTextChange(r[0],r[1],r[2]),(e=this.noteTextChanged).dispatch.apply(e,r),this.checkForBlank()):"selection-change"===t&&(n=this.noteSelectionChanged).dispatch.apply(n,r),(i=this.noteEditorChanged).dispatch.apply(i,Object(o.j)([t],r))},e.prototype.onTextChange=function(t,e,n){if(n===r.a.sources.USER){var o=new E(t.ops.map((function(t){var e=c()(t);return t.attributes&&(e.attributes=Object.keys(t.attributes).filter((function(t){return p.h.indexOf(t)>=0||-1!=t.indexOf("comment-")})).reduce((function(e,n){return e[n]=t.attributes[n],e}),{})),e})));if(this.noteContentChanged.dispatch(o),y.a.isFormattingDelta(t)){var i=this.editor.getSelection();if(i){var s=this.editor.getLines(i),a=t.ops.find((function(t){return t.attributes&&Object.keys(t.attributes).length}));a&&a.attributes&&a.attributes.link&&(a.attributes.link=!0),f.a.noteFormatted({content_type:"text",action_type:"formatted",text_symbols:i.length,lines_formatted:s.length,line_number:this.editor.getLine(i.index)[1],index:i.index,new_value:JSON.stringify(a),count_objects:0})}}else this.modules.cursors.sendCursor(this.editor.getSelection())}},e.prototype.enableEditor=function(){this.editor.enable(),this.setFocusInEmptyEditor()},e.prototype.setFocusInEmptyEditor=function(){a.a.allowAutoFocus&&1===this.editor.getLength()&&(this.editor.focus(),this.noteBlankStateChanged.dispatch(this.isBlank))},e.prototype.disableEditor=function(){this.editor.blur(),this.editor.disable()},e.prototype.dispatchEditorModeSignals=function(){switch(this.editorMode){case p.n.EDIT:this.hideNotesNotification.dispatch();break;case p.n.COMMENT:this.showNotesNotification.dispatch(g.b);break;case p.n.VIEW:this.showNotesNotification.dispatch(g.k)}this.editorModeChanged.dispatch(this.editorMode)},e.prototype.setMode=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!0),this.editorMode=t,this.notesInitialized)switch(t){case p.n.EDIT:this.enableEditor(),this.dispatchEditorModeSignals();break;case p.n.COMMENT:e&&this.dispatchEditorModeSignals(),this.dropSelection(),this.disableEditor();break;case p.n.VIEW:this.dropSelection(),this.disableEditor(),e&&this.dispatchEditorModeSignals(),this.modules.comments.setViewMode()}},e.prototype.scrollToComment=function(t){var e,n=this;if("string"==typeof t)e=t;else{if(!(t instanceof u.a))return;e=t.tokenizer.id.toString()}var o=this.modules.comments.getCommentRangeBounds(e),i=this.editor.root.getElementsByClassName(p.d+e+"-true")[0];i&&o?(this.scrollProcessor.scrollTo(o.top+this.scrollProcessor.scrollOffset,!0),this.modules.comments.hideAllComments(),this.scrollProcessor.onScrollFinished.addOnce((function(){n.modules.comments.processOpenComments([e],i)}))):this.showNotesNotification.dispatch(g.a,!0)},e.prototype.getContent=function(){return this.editor.getContents()},e.prototype.insertTemplate=function(t){this.editor.setContents(t.content,r.a.sources.USER),this.afterUpdateContents(),this.checkForBlank(),f.a.noteTemplateAdded(t.name)},e.prototype.updateContent=function(t){this.beforeUpdateContents(t),this.editor.updateContents(t,r.a.sources.API),this.afterUpdateContents()},e.prototype.setInitContent=function(t){this.modules.comments.processContent(t),this.showNotesNotification.dispatch(g.h);var e=this.editorMode;if(this.setMode(p.n.VIEW,!1,!1),this.editorMode=e,this.editor.setContents([],r.a.sources.API),t.ops)for(var n=t.ops,o=0,i=function(){for(var t=p.p;t<n.length;t++)if(n[t]&&n[t].insert&&"\n"==n[t].insert)return t+1;return n.length};n.length;){var s=i(),a=n.slice(0,s);this.insertContentPart(a,o),n=n.slice(s,n.length),o++}},e.prototype.insertContentPart=function(t,e){var n=this;e?setTimeout((function(){n.editor.appendContents(t,r.a.sources.API)}),p.q):this.editor.setContents(t,r.a.sources.API),clearTimeout(this.finishContentRenderingTimeout),this.finishContentRenderingTimeout=window.setTimeout((function(){n.onFinishInitContentRendering()}),100)},e.prototype.onFinishInitContentRendering=function(){this.notesInitialized=!0,this.finishNotesLoading.dispatch(),this.setMode(this.editorMode,!0),this.modules.authorship.initAuthorship(),this.afterUpdateContents(),this.checkForBlank(),f.a.noteOpened()},e.prototype.beforeUpdateContents=function(t){t=new E(t),this.modules.comments.processContent(t)},e.prototype.afterUpdateContents=function(){this.modules.comments.onAfterUpdateContents()},Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.editor.container.style.fontSize=t+"px",this.processHiddableElements()},enumerable:!1,configurable:!0}),e}();e.a=S}).call(this,n(110))},7619:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(747),s=n(1516),a=n(540),l=n(618),d=a.b(),c=['<div class="ql-cursor-selections"></div>','<div class="ql-cursor-caret-container">','  <div class="ql-cursor-caret"></div>',"</div>",'<div class="ql-cursor-flag"></div>'].join(""),p=function(e){function n(n,o){var i=e.call(this,n,o)||this;return i.cursors={},i.cursorChanged=new t.Signal,i.update=function(){Object.keys(i.cursors).map((function(t){i.updateCursor(i.cursors[t])}))},i.container=i.quill.addContainer("ql-cursors"),i.options.hideDelay=void 0==o.hideDelay?3e3:o.hideDelay,i.options.hideSpeed=void 0==o.hideSpeed?400:o.hideSpeed,o.editor.noteTextChanged.add(i.onTextChange,i),o.editor.noteSelectionChanged.add(i.onSelectionChange,i),o.editor.addToHiddableElements({el:i.container,callback:i.update}),i}return Object(i.d)(n,e),n.prototype.setCursor=function(t,e,n){var o=this,i=d().getUserId(t).toString(),s=r.a.getColorForUser(i),a={index:n.start,length:n.end-n.start};if(!this.cursors[i]){var l={userId:i,color:s,range:a,el:null,selectionEl:null,caretEl:null,flagEl:null};this.cursors[i]=l,this.buildCursor(i,e)}return setTimeout((function(){o.moveCursor(i,a)})),this.cursors[i]},n.prototype.scrollToCursor=function(t){var e=d().getUserId(t),n=this.cursors[e.toString()];if(n){var i=this.quill.getLine(n.range.index+n.range.length);i&&i[0]&&i[0].domNode&&o(i[0].domNode).scrollIntoView(500)}},n.prototype.hideCursors=function(){var t=this;Object.keys(this.cursors).forEach((function(e){t.hideCursor(e)}))},n.prototype.showCursors=function(){var t=this;Object.keys(this.cursors).forEach((function(e){t.showCursor(e)}))},n.prototype.removeCursor=function(t){var e=d().getUserId(t);if(e){var n=this.cursors[e.toString()];n&&n.el.parentNode.removeChild(n.el),delete this.cursors[e.toString()]}},n.prototype.moveCursor=function(t,e){var n=this.cursors[t];n&&(n.range=e,n.el.classList.remove("hidden"),this.updateCursor(n))},n.prototype.hideCursor=function(t){var e=this.cursors[t];e&&e.el.classList.add("hidden")},n.prototype.buildCursor=function(t,e){var n,o,i,r=this.cursors[t],s=document.createElement("div");s.classList.add("ql-cursor"),s.innerHTML=c,n=s.querySelector(".ql-cursor-selections"),o=s.querySelector(".ql-cursor-caret-container"),(i=s.querySelector(".ql-cursor-flag")).innerText=e,i.style.backgroundColor=r.color,o.querySelector(".ql-cursor-caret").style.backgroundColor=r.color,i.style.transitionDelay=this.options.hideDelay+"ms",i.style.transitionDuration=this.options.hideSpeed+"ms",this.container.appendChild(s),r.el=s,r.selectionEl=n,r.caretEl=o,r.flagEl=i},n.prototype.onSelectionChange=function(t){this.sendCursor(t)},n.prototype.sendCursor=function(t){t&&this.options.editor.editorMode==l.n.EDIT&&this.cursorChanged.dispatch({start:t.index,end:t.index+t.length})},n.prototype.onTextChange=function(t){var e=this;Object.keys(this.cursors).map((function(n){e.cursors[n].range.index=t.transformPosition(e.cursors[n].range.index,!1)})),this.update()},n.prototype.updateCursor=function(t){if(t&&t.range){var e=r.a.indexWithinQuillBounds(t.range.index+t.range.length,this.quill),n=r.a.getDomRectsForRange(t.range,this.quill);if(n){var o=this.quill.getBounds(e);this.updateCaret(t,o),this.updateSelection(t,n)}else this.hideCursor(t.userId)}},n.prototype.showCursor=function(t){var e=this.cursors[t];e&&e.el.classList.remove("hidden")},n.prototype.updateCaret=function(t,e){t.caretEl.style.top=e.top+"px",t.caretEl.style.left=e.left+"px",t.caretEl.style.height=e.height+"px",t.flagEl.style.top=e.bottom+"px",t.flagEl.style.left=e.left+-4+"px"},n.prototype.updateSelection=function(t,e){var n=this,o=this.quill.container.getBoundingClientRect();t.selectionEl.innerHTML="",e.forEach((function(e){t.selectionEl.appendChild(n.createSelectionBlock(e,o,t.color))}))},n.prototype.createSelectionBlock=function(t,e,n){var o=document.createElement("span");return o.classList.add("ql-cursor-selection-block"),o.style.top=t.top-e.top+"px",o.style.left=t.left-e.left+"px",o.style.width=t.width+"px",o.style.height=t.height+"px",o.style.backgroundColor=n,o.style.opacity="0.2",o},n}(s.a);e.a=p}).call(this,n(110),n(193))},7620:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var o=function(t){return t.editor.delta.ops.filter((function(t){return t.insert.widgetsRef})).length},i=function(t){return t.editor.delta.ops.filter((function(t){return t.insert.image})).length}},7621:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(411),s=n.n(r),a=n(222),l=n.n(a),d=n(181),c=n(747),p=n(7622),u=n(7623),h=n(547),m=n(618),g=n(746),f=n(4477),b=n(822),v=n(7624),x=n(2087),y=n(1516),w=n(16),C=s.a.import("parchment"),k=function(e){function n(n,o){var i=e.call(this,n,o)||this;i.commentOpened=new t.Signal,i.addCommentButton={},i.comments=[],i.onTryOpenComments=l()((function(t){i.openComments(t)}),150),i.mouseMoveWrapper=i.onMouseMove.bind(i),i.updatedComments=[],i.tapProcessors=[],i.isComposing=!1,i.onCompositionStartWrapper=i.onCompositionStart.bind(i),i.onCompositionEndWrapper=i.onCompositionEnd.bind(i),i.onCommonButtonClick=function(t){var e={index:i.quill.getIndex(t),length:t.length()-1};e.length||(e.length=1),i.hideAllComments(),i.addComment(e)},i.getCommentsFromElement=function(t){var e=i.quill.getSelection(),n=c.a.findBlot(t);return e&&(e.length||null==e.index||void 0==e.index)||!e&&!n.getContentNode||n&&n.getContentNode&&n.getContentNode()!==t?[]:n&&n instanceof x.b?i.getCommentsAttrsFromObj(i.quill.getFormat(n.offset(n.scroll))):i.getCommentsAttrsFromObj(i.quill.getFormat(e))},i.onPanelOpen=function(){document.addEventListener("mousemove",i.mouseMoveWrapper)},i.onPanelClose=function(){document.removeEventListener("mousemove",i.mouseMoveWrapper)},i.noteEditor=o.editor,i.updateAttributor=new C.ClassAttributor("update",m.u,{scope:C.Scope.INLINE_ATTRIBUTE}),s.a.register("formats/update",i.updateAttributor,!0),i.commentAttributor=i.registerCommentAttributor("base"),i.toolbar=i.quill.getModule("toolbar"),i.onToolbarUpdated(),i.noteEditor.editorModeChanged.add(i.onToolbarUpdated,i),i.noteEditor.noteSelectionChanged.add(i.onSelectionChange,i),i.noteEditor.noteTextChanged.add(i.onTextChange,i),i.quill.clipboard.addOnCopyProcessor(i.onCopy.bind(i)),w.a.mobileApp?(i.commentsButtonOnMobile=new v.a(i.quill,i),i.tapProcessors.push(new g.a(i.quill.root,i.checkForCommentsUpdates.bind(i)))):i.tapProcessors.push(new g.a(i.quill.root,i.onClick.bind(i))),h.a.instance.onPanelClose.add(i.onPanelClose),h.a.instance.onPanelOpen.add(i.onPanelOpen),i.buildAddCommentButton(),i.tempComment=new u.a(i.quill,i),i.paragraphHighlight=new u.a(i.quill,i),i.openCommentHighlight=new u.a(i.quill,i,"ql-open-comment",!0),h.a.instance.onEditorDestroy.add(i.deinit,i);var r=h.a.instance.comments;return r.commentLoaded.add(i.onCommentLoaded,i),r.commentCreationConfirmed.add(i.onCommentCreationConfirmed,i),r.commentMessagesUpdated.add(i.onCommentMessagesUpdated,i),r.commentWantsToBeDeleted.add(i.onCommentDeleted,i),r.comments.forEach((function(t){return i.commentLoaded(t)})),i.quill.scrollingContainer.addEventListener("scroll",i.onScroll.bind(i)),i.addCommonActionButton(),i.quill.scroll.domNode.addEventListener("compositionstart",i.onCompositionStartWrapper),i.quill.scroll.domNode.addEventListener("compositionend",i.onCompositionEndWrapper),i}return Object(i.d)(n,e),n.prototype.getCommentRangeBounds=function(t){this.updateCommentsRange();var e=this.comments.find((function(e){return e.commentId===t}));return e&&e.range&&e.range.length?this.quill.getBounds(e.range[0].index):null},n.prototype.setViewMode=function(){this.hideAddCommentButton()},n.prototype.onToolbarUpdated=function(){this.toolbar.addHandler("comment",(function(){}));var t=document.querySelector(".ql-comment");t&&this.tapProcessors.push(new g.a(t,this.onMenuButtonClick.bind(this)))},n.prototype.onCompositionStart=function(){this.isComposing=!0},n.prototype.onCompositionEnd=function(t){var e=this,n=t.data.length,o=this.quill.getSelection();if(o){var i=this.quill.getContents(o.index-n,1),r=this.quill.getContents(o.index,1),a=[];if(i.ops&&i.ops[0]&&i.ops[0].attributes&&(a=Object.keys(i.ops[0].attributes).filter((function(t){return-1!=t.indexOf("comment-")}))),0===o.length&&a.length>0){var l=[];r.ops&&r.ops[0]&&r.ops[0].attributes&&(l=Object.keys(r.ops[0].attributes).filter((function(t){return-1!=t.indexOf("comment-")}))),a.forEach((function(t){-1===l.indexOf(t)&&e.quill.formatText(o.index-n,n,t,!1,s.a.sources.USER)}))}}this.isComposing=!1},n.prototype.addCommonActionButton=function(){this.noteEditor.commonEmbedActions.push({actionName:"comment",handler:this.onCommonButtonClick,buttonCssClass:"ql-embed-actions-menu__button--comment"})},n.prototype.deinit=function(){d.onCanvasUnloading.remove(this.deinit,this),h.a.instance.onPanelClose.remove(this.onPanelClose),h.a.instance.onPanelOpen.remove(this.onPanelOpen),this.onPanelClose();var t=h.a.instance.comments;t.commentLoaded.remove(this.onCommentLoaded,this),t.commentCreationConfirmed.remove(this.onCommentCreationConfirmed,this),t.commentMessagesUpdated.remove(this.onCommentMessagesUpdated,this),t.commentWantsToBeDeleted.remove(this.onCommentDeleted,this),this.commentsButtonOnMobile&&this.commentsButtonOnMobile.destroy(),this.tapProcessors.forEach((function(t){t.destroy()})),this.tapProcessors=[],this.quill.scroll.domNode.removeEventListener("compositionstart",this.onCompositionStartWrapper),this.quill.scroll.domNode.removeEventListener("compositionend",this.onCompositionEndWrapper)},n.prototype.onCommentLoaded=function(t){this.commentLoaded(t)},n.prototype.onCommentCreationConfirmed=function(t){this.confirmCommentCreation(t)},n.prototype.onCommentMessagesUpdated=function(t){this.commentUpdated(t)},n.prototype.onCommentDeleted=function(t){this.deleteComment(t)},n.prototype.processContent=function(t){var e=this;t&&t.ops&&t.ops.forEach((function(t){t.attributes&&Object.keys(t.attributes).forEach((function(t){if(-1!=t.indexOf(m.d)){var n=t.substring(m.d.length),o=e.getLocalCommentById(n);if(o)o.object&&o.object.hasUnreadMessages()&&e.updatedComments.push(o.object);else{var i={commentId:n,confirmed:!0,attributor:e.registerCommentAttributor(n)};e.comments.push(i)}}}))}))},n.prototype.onAfterUpdateContents=function(){var t=this;this.updatedComments.length&&(this.updatedComments.forEach((function(e){t.commentUpdated(e)})),this.updatedComments=[])},n.prototype.addComment=function(t){if(t||(t=this.quill.getSelection()),t&&0!=t.length){var e,n;this.quill.theme.tooltip.hide();var o=this.checkForExistingCommentsForRange(t);o?(e=o.object,n=this.calcLocalBounds(c.a.getBoundsForQuillRange(t,this.quill))):(this.tempComment.createTempComment([t]),e=h.a.instance.comments.create(t.index,t.length),n=this.calcLocalBounds(this.tempComment.bounds)),this.openComments({comments:[e],bounds:n})}},n.prototype.checkForExistingCommentsForRange=function(t){this.updateCommentsRange();var e=null;return this.comments.forEach((function(n){n&&n.range&&n.range.forEach((function(o){o.index==t.index&&o.length==t.length&&(e=n)}))})),e},n.prototype.commentUpdated=function(t){var e=t.tokenizer.id.toString(),n=this.getLocalCommentById(e);this.updateCommentsRange()&&n&&n.range&&n.range[0]&&this.quill.formatText(n.range[0].index,1,"update",e,s.a.sources.SILENT)},n.prototype.hideCommentUpdateHighlight=function(t){var e=t.tokenizer.id.toString(),n=this.getLocalCommentById(e);n&&n.range&&n.range[0]&&this.quill.formatText(n.range[0].index,1,"update","",s.a.sources.SILENT)},n.prototype.commentLoaded=function(t){var e=t.tokenizer.id.toString(),n=this.getLocalCommentById(e);n?n.object=t:(n={commentId:e,confirmed:!0,object:t,attributor:this.registerCommentAttributor(e)},this.comments.push(n)),t.hasUnreadMessages()&&this.commentUpdated(t)},n.prototype.confirmCommentCreation=function(t){var e=t.tokenizer.id.toString();if(this.tempComment.range){var n=this.tempComment.range;t.highlightedText=this.getHighlightTextFromDelta(this.quill.getContents(n.index,n.length));var o={commentId:e,confirmed:!0,object:t,attributor:this.registerCommentAttributor(e)};this.comments.push(o),this.formatTextForCreatedComment(this.tempComment.range,e),this.openCommentHighlight.createTempComment([n]),this.tempComment.dropTempComment()}},n.prototype.formatTextForCreatedComment=function(t,e){var n=this,o=m.d+e;this.quill.editReadOnly((function(){n.quill.formatText(t.index,t.length,o,!0,s.a.sources.USER)}))},n.prototype.deleteComment=function(t){var e=this;if(t.confirmed){if(this.updateCommentsRange()){this.hideAllComments();var n=t.tokenizer.id.toString(),o=this.getLocalCommentById(n),i=m.d+n;o.range.forEach((function(t){e.quill.formatText(t.index,t.length,i,!1,s.a.sources.USER)}))}}else this.tempComment.dropTempComment()},n.prototype.getLocalCommentById=function(t){var e=this.comments.findIndex((function(e){return e.commentId==t}));return this.comments[e]?this.comments[e]:null},n.prototype.registerCommentAttributor=function(t){var e=m.d+t,n=new p.a(e,e);return s.a.register(n),n},n.prototype.onMenuButtonClick=function(){this.addComment(this.quill.getSelection())},n.prototype.onCopy=function(t,e,n){var o=this;if(e.html.includes(m.d)){var i=this.quill.root.ownerDocument.createElement("div");i.innerHTML=e.html;var r=[];Array.from(i.querySelectorAll('*[class*="comment"]')).forEach((function(t){o.commentAttributor.getAllCommentsForNode(t).forEach((function(t){var e=o.getLocalCommentById(t);e&&-1==r.indexOf(e)&&r.push(e)})),t.removeAttribute("data-comments-length")}));var s=function(t){Array.from(i.querySelectorAll('*[class*="comment-'+t.commentId+'"]')).forEach((function(e){return t.attributor.remove(e)}))};if(n){if(!this.updateCommentsRange())return void r.forEach((function(t){return s(t)}));var a=function(t){var e=0;return t.range.forEach((function(t){e+=e+(t.index-e)+t.length})),{index:t.range[0].index,length:e-t.range[0].index}};r.forEach((function(e){a(e).index>=t.index&&a(e).index+a(e).length<=t.index+t.length||s(e)}))}else r.forEach((function(t){return s(t)}));e.html=i.innerHTML}return{html:e.html,text:e.text}},n.prototype.updateCommentsRange=function(){var t=this,e=this.quill.getContents();if(this.comments.forEach((function(t){return t.range=[]})),e&&e.ops){var n=0,o=this.comments.reduce((function(t,e){return t[e.commentId]=e,t}),{});return e.ops.forEach((function(e){e.delete||(e.attributes&&t.getCommentsAttrsFromObj(e.attributes).forEach((function(t){o[t]&&o[t].range.push({index:n,length:c.a.getOpLength(e)})})),n+=c.a.getOpLength(e))})),this.comments.forEach((function(e){return t.optimizeCommentRange(e)})),!0}return!1},n.prototype.optimizeCommentRange=function(t){if(t.range){t.range.sort((function(t,e){return t.index-e.index}));for(var e=1;e<t.range.length;e++)t.range[e].index>=t.range[e-1].index&&t.range[e].index<=t.range[e-1].index+t.range[e-1].length&&(t.range[e-1].length+=t.range[e].length-(t.range[e-1].index+t.range[e-1].length-t.range[e].index),t.range.splice(e,1),e--)}},n.prototype.getCommentsAttrsFromObj=function(t){var e=[];return Object.keys(t).forEach((function(t){-1!=t.indexOf(m.d)&&e.push(t.substring(m.d.length))})),e},n.prototype.calcCommentToOpen=function(t){var e=this,n=[];if(this.updateCommentsRange()){var o=function(t){var e=0;return t.forEach((function(t){e+=t.length})),e},i=(n=t.map((function(t){return e.getLocalCommentById(t)})).filter((function(t){return!!t}))).reduce((function(t,e){return Math.min(t,o(e.range))}),o(n[0].range));n=n.filter((function(t){return o(t.range)==i})).map((function(t){return t.object}))}return n},n.prototype.getUpdatedCommentsFromCommentNode=function(t){return Array.from(t.classList).filter((function(t){return t.startsWith(m.u)})).map((function(t){return t.slice(m.u.length+1)}))},n.prototype.checkForCommentsUpdates=function(t){for(var e,n=this,o=!0,i=[],r=function(){var n=Object(f.a)(t),r=n.clientX,a=n.clientY,l=document.elementFromPoint(r,a),d=s.getUpdatedCommentsFromCommentNode(l);d&&d.length?(e=s.calcLocalBounds(l.getBoundingClientRect()),d.forEach((function(t){l.classList.remove(m.u+"-"+t),-1==i.indexOf(t)&&i.push(t)}))):o=!1},s=this;o;)r();return i.length&&(i=i.map((function(t){return n.getLocalCommentById(t)})).filter((function(t){return!!t})).map((function(t){return t.object})),this.openComments({comments:i,bounds:e}),this.quill.setSelection(null)),!!i.length},n.prototype.calcLocalBounds=function(t){var e=document.querySelector(".notes-panel").getBoundingClientRect();return{top:t.top-e.top,bottom:t.bottom-e.top,left:t.left-e.left,right:t.right-e.left}},n.prototype.onClick=function(t){var e=this,n=Object(f.a)(t),o=n.clientX,i=n.clientY,r=document.elementFromPoint(o,i);if(this.tempComment.dropTempComment(),r!==this.quill.root){if(!this.checkForCommentsUpdates(t)){var s=c.a.findBlot(r);t instanceof MouseEvent||s instanceof x.b?this.processOpenComments(this.getCommentsFromElement(r),r):this.quill.once("selection-change",(function(){e.processOpenComments(e.getCommentsFromElement(r),r)}))}}else this.hideAllComments()},n.prototype.processOpenComments=function(t,e){var n=this;if(t.length){var o=this.calcCommentToOpen(t),i=null;if(o.length)i={comments:o,bounds:this.calcLocalBounds(e.getBoundingClientRect())},e instanceof HTMLAnchorElement&&(i.topY-=56,i.bottomY+=56);this.onTryOpenComments(i);var r=o.filter((function(t){return t.hasUnreadMessages()}));r.length&&this.updateCommentsRange()&&r.forEach((function(t){n.hideCommentUpdateHighlight(t)}))}else this.hideAllComments()},n.prototype.hideAllComments=function(){this.commentOpened.dispatch(),this.openCommentHighlight.dropTempComment()},n.prototype.getHighlightTextFromDelta=function(t){var e="";if(t&&t.ops&&t.ops[0].insert){var n=t.ops[0].insert;e="string"==typeof n?n:"image"}return e},n.prototype.openComments=function(t){var e=this,n=[];t.comments.forEach((function(t){var o=e.getLocalCommentById(t.tokenizer.id.toString());if(o&&o.range&&o.range[0]){var i=o.range[0];t.highlightedText=e.getHighlightTextFromDelta(e.quill.getContents(i.index,i.length)),o.range.forEach((function(t){n.push(t)}))}})),this.openCommentHighlight.createTempComment(n),this.commentOpened.dispatch(t)},n.prototype.onTextChange=function(t,e,n){var o=this;if(t&&t.ops){var i=!1;if(t.ops.forEach((function(t){var e=t.attributes;if(t.insert&&n==s.a.sources.USER&&(i=!0),e){var r=Object.keys(e).filter((function(t){return-1!=t.indexOf("comment-")}));r.length&&(r.forEach((function(t){if(!e[t]){var n=t.substring(t.indexOf("-")+1);o.onDeleteCommentFromServer(n)}})),o.dropCommentOnCommentEdge(t,n,r))}})),i)return this.tempComment.dropTempComment(),this.paragraphHighlight.dropTempComment(),void this.hideAllComments();this.tempComment.transformTempComment(t),this.paragraphHighlight.transformTempComment(t),this.openCommentHighlight.transformTempComment(t)}},n.prototype.dropCommentOnCommentEdge=function(t,e,n){var o=this;if(!this.isComposing&&t.insert&&e==s.a.sources.USER&&this.quill.getSelection()){var i=this.quill.getSelection(),r=this.quill.getContents(i.index,1);if(0==i.length&&r.ops){var a=[];r.ops[0].attributes&&(a=Object.keys(r.ops[0].attributes).filter((function(t){return-1!=t.indexOf("comment-")}))),n.forEach((function(e){-1==a.indexOf(e)&&o.quill.formatText(i.index-t.insert.length,t.insert.length,e,!1,s.a.sources.USER)}))}}},n.prototype.onDeleteCommentFromServer=function(t){var e=this.getLocalCommentById(t);e&&e.object&&e.object.hasUnreadMessages()&&this.hideCommentUpdateHighlight(e.object)},n.prototype.onSelectionChange=function(t){t&&t.length&&(this.hideAllComments(),this.onTryOpenComments.cancel())},n.prototype.buildAddCommentButton=function(){var t=document.createElement("div");t.classList.add("ql-add-comment-button"),this.quill.root.parentNode.appendChild(t),this.addCommentButton.buttonElement=t,this.tapProcessors.push(new g.a(t,this.onButtonClick.bind(this))),t.addEventListener("mouseover",this.onButtonMouseOver.bind(this)),t.addEventListener("mouseout",this.onButtonMouseOut.bind(this))},n.prototype.onButtonClick=function(t){var e=this;if(t.stopPropagation(),t.preventDefault(),w.a.isTouchSupportedAndNotDesktop&&w.a.ios&&this.onButtonMouseOver(),this.paragraphHighlight.range){var n=this.paragraphHighlight.range.index,o=this.paragraphHighlight.range.length;this.hideAllComments(),this.paragraphHighlight.dropTempComment(),setTimeout((function(){e.addComment({index:n,length:o}),b.a.noteCommentParagraphUsed()}))}},n.prototype.onButtonMouseOver=function(){if(!this.paragraphHighlight.isExist){var t=s.a.find(this.addCommentButton.blot),e={index:this.quill.getIndex(t),length:t.length()-1};e.length||(e.length=1),this.paragraphHighlight.createTempComment([e])}},n.prototype.onButtonMouseOut=function(){this.paragraphHighlight.dropTempComment()},n.prototype.onMouseMove=function(t){if("view"!==this.noteEditor.editorMode&&!w.a.mobileApp){var e=document.elementFromPoint(t.clientX,t.clientY);if(e!=this.addCommentButton.buttonElement&&e!=this.quill.root)if(e&&o(e).closest(".ql-editor")){for(;e&&e.parentNode!=this.quill.root&&!(e.parentNode instanceof HTMLOListElement);)e=e.parentNode;var n=c.a.findBlot(e);n&&!c.a.isEmptyLine(n)?this.showAddCommentButton(e):this.hideAddCommentButton()}else this.hideAddCommentButton()}},n.prototype.onScroll=function(){this.addCommentButton.isVisible&&this.hideAddCommentButton()},n.prototype.showAddCommentButton=function(t){if(t&&t.getBoundingClientRect){var e=window.getComputedStyle(t).getPropertyValue("padding-top"),n=e.substring(0,e.indexOf("px"));this.addCommentButton.isVisible=!0,this.addCommentButton.buttonElement.style.top=t.getBoundingClientRect().top-this.quill.root.getBoundingClientRect().top+parseInt(n,10)+"px",this.addCommentButton.buttonElement.style.right=this.noteEditor.getContentSizeProcessor().getPaddingHoriz()-24+"px",this.addCommentButton.buttonElement.classList.add("ql-add-comment-show"),this.addCommentButton.blot=t}},n.prototype.hideAddCommentButton=function(){this.addCommentButton.isVisible=!1,this.addCommentButton.buttonElement.classList.remove("ql-add-comment-show"),this.addCommentButton.blot=null},n}(y.a);e.a=k}).call(this,n(110),n(193))},7622:function(t,e,n){"use strict";var o=n(0),i=n(411),r=n.n(i).a.import("parchment"),s=function(t){function e(e,n){var o=t.call(this,e,n,{scope:r.Scope.INLINE})||this;return o.classPrefix="comment-",o}return Object(o.d)(e,t),e.prototype.add=function(e,n){var o=!0;return n?(o=t.prototype.add.call(this,e,n),this.setCommentLengthAttr(e)):this.remove(e),o},e.prototype.remove=function(e){t.prototype.remove.call(this,e),e&&this.setCommentLengthAttr(e)},e.prototype.setCommentLengthAttr=function(t){var e=this.getAllCommentsLengthForNode(t);e?t.dataset.commentsLength=e.toString():t.removeAttribute("data-comments-length")},e.prototype.getAllCommentsForNode=function(t){var e=this;return Array.from(t.classList).filter((function(t){return t.startsWith(e.classPrefix)})).map((function(t){return(t=t.slice(e.classPrefix.length)).substring(0,t.indexOf("-"))}))},e.prototype.getAllCommentsLengthForNode=function(t){return this.getAllCommentsForNode(t).length},e}(r.ClassAttributor);e.a=s},7623:function(t,e,n){"use strict";var o=n(747),i=function(){function t(t,e,n,o){var i=this;this.bounds={},this.range=null,this.exist=!1,this.redrawOnScrollOrResize=function(){i.ranges&&i.ranges.length&&(i.el.innerHTML="",i.createTempComment(i.ranges,!1))},this.updatePosition=function(){i.container.style.top=-i.quill.root.scrollTop+"px"},this.quill=t,this.commentsModule=e,this.commentLineCssClass=n||"ql-comment-line",this.container=o?this.quill.addContainer("ql-comments",this.quill.root):this.quill.addContainer("ql-comments"),this.el=document.createElement("div"),this.el.classList.add("ql-comment-highlight"),this.container.appendChild(this.el)}return Object.defineProperty(t.prototype,"isExist",{get:function(){return this.exist},enumerable:!1,configurable:!0}),t.prototype.dropTempComment=function(){this.commentsModule.noteEditor.removeFromHiddableElements(this.el),this.exist=!1,this.el.innerHTML="",this.bounds={}},t.prototype.redrawTempComment=function(){this.el.innerHTML="",this.range&&this.createTempComment([this.range],!1)},t.prototype.createTempComment=function(t,e){var n=this;void 0===e&&(e=!0),this.updatePosition(),e&&this.dropTempComment(),this.range=1===t.length?t[0]:null,this.ranges=t;var i=this.quill.container.getBoundingClientRect(),r=this.quill.root.scrollTop;t.forEach((function(t){var e=o.a.getDomRectsForRange(t,n.quill);e&&e.forEach((function(t){(!n.bounds.top||t.top<=n.bounds.top)&&(n.bounds.top=t.top),(!n.bounds.bottom||t.bottom>=n.bounds.bottom)&&(n.bounds.bottom=t.bottom),(!n.bounds.left||t.left<=n.bounds.left)&&(n.bounds.left=t.left),(!n.bounds.right||t.right>=n.bounds.right)&&(n.bounds.right=t.right);var e=n.createCommentVisualBlock(t,i,r);n.el.appendChild(e)}))})),this.exist=!0,this.commentsModule.noteEditor.addToHiddableElements({el:this.el,callback:this.redrawOnScrollOrResize})},t.prototype.transformTempComment=function(t){if(this.isExist&&this.range){var e=this.range.index+this.range.length;if(t.ops&&t.ops[0].retain&&t.ops[0].retain>e)return;var n=t.transformPosition(e,!1);this.range.index=t.transformPosition(this.range.index,!1),this.range.length=n-this.range.index,this.range.length<=0?(this.dropTempComment(),this.commentsModule.hideAllComments()):this.redrawTempComment()}},t.prototype.createCommentVisualBlock=function(t,e,n){var o=document.createElement("span");return o.classList.add(this.commentLineCssClass),o.style.top=t.top-e.top+n+"px",o.style.left=t.left-e.left+"px",o.style.width=t.width+"px",o.style.height=t.height+"px",o},t}();e.a=i},7624:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(746),i=["add","open"],r=function(){function t(t,e){this.quill=t,this.commentsModule=e,this.button=document.createElement("button"),this.button.classList.add("ql-mobile-comment-button"),this.buttonTapProcessor=new o.a(this.button,this.handleClick.bind(this)),this.quill.root&&this.quill.root.parentNode&&this.quill.root.parentNode.appendChild(this.button),this.hideButton(),this.quill.on("selection-change",this.onSelectionChange.bind(this)),this.commentsModule.noteEditor.addToHiddableElements({el:this.button,callback:this.updatePosition.bind(this)})}return t.prototype.destroy=function(){this.buttonTapProcessor.destroy(),this.quill.off("selection-change",this.onSelectionChange.bind(this)),this.quill.root&&this.quill.root.parentNode&&this.quill.root.parentNode.removeChild(this.button)},t.prototype.onSelectionChange=function(t,e,n){t?"user"===n&&(t.length>0?this.showButton("add"):0===t.length&&(0===this.getCommentsAttributes(t).length?this.hideButton():this.showButton("open"))):this.hideButton()},t.prototype.getCommentsAttributes=function(t){var e=this.quill.getFormat(t.index);return this.commentsModule.getCommentsAttrsFromObj(e)},t.prototype.showButton=function(t){var e=this;this.button.classList.remove("ql-mobile-comment-button--hidden"),i.forEach((function(t){e.button.classList.remove("ql-mobile-comment-button--"+t)})),this.button.classList.add("ql-mobile-comment-button--"+t),this.updatePosition()},t.prototype.updatePosition=function(){var t=this.quill.getSelection(),e=t&&t.index?this.quill.getBounds(t.index):null;e&&(this.button.style.top=e.top+"px")},t.prototype.hideButton=function(){this.button.classList.add("ql-mobile-comment-button--hidden")},t.prototype.handleClick=function(){var t=this.quill.getSelection();if(t.length>0)this.commentsModule.addComment(t);else{var e=this.getCommentsAttributes(t),n=this.quill.getLeaf(t.index)[0];this.commentsModule.processOpenComments(e,n.parent.domNode)}},t}()},7625:function(t,e){t.exports="#img__text"},7626:function(t,e){t.exports="#img__h3"},7627:function(t,e){t.exports="#img__board"},7628:function(t,e){t.exports="#img__bui"},7629:function(t,e,n){"use strict";(function(t){var o=n(0),i=function(e){function n(n,o){var i=e.call(this,n,o)||this;return i.noteTextLimitReached=new t.Signal,i.maxLength=o.editor.options.maxTextLength,i.container=o.container,o.editor.noteTextChanged.add(i.processText,i),i.processText(),i}return Object(o.d)(n,e),n.prototype.processText=function(){var t=this,e=this.quill.getText();if(this.maxLength&&e.length>this.maxLength&&(setTimeout((function(){t.quill.getModule("history").undo()})),this.noteTextLimitReached.dispatch()),this.container){var n=void 0;n="word"===this.options.unit?(e=e.trim()).length>0?e.split(/\s+/).length:0:e.length;var o=this.options.unit;1!==n&&(o+="s"),this.container.innerText=n+" "+o}},n}(n(1516).a);e.a=i}).call(this,n(110))},7630:function(t,e,n){"use strict";(function(t){var o=n(0),i=n(411),r=n.n(i),s=n(293),a=n.n(s),l=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.stateChanged=new t.Signal,n.afterUndoProcessors=[],n.afterRedoProcessors=[],n}return Object(o.d)(n,e),n.prototype.addAfterUndoProcessor=function(t){this.afterUndoProcessors.push(t)},n.prototype.addAfterRedoProcessor=function(t){this.afterRedoProcessors.push(t)},n.prototype.undo=function(){var t=a()(this.stack.undo[this.stack.undo.length-1]);e.prototype.undo.call(this),this.afterUndoProcessors.forEach((function(e){e(t)})),this.dispatchState()},n.prototype.redo=function(){var t=a()(this.stack.redo[this.stack.redo.length-1]);this.afterRedoProcessors.forEach((function(e){e(t)})),e.prototype.redo.call(this),this.dispatchState()},Object.defineProperty(n.prototype,"undoEnabled",{get:function(){return!!this.stack.undo.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"redoEnabled",{get:function(){return!!this.stack.redo.length},enumerable:!1,configurable:!0}),n.prototype.record=function(t,n){e.prototype.record.call(this,t,n),this.dispatchState()},n.prototype.dispatchState=function(){this.stateChanged.dispatch(this.undoEnabled,this.redoEnabled)},n}(r.a.import("modules/history"));e.a=l}).call(this,n(110))},7631:function(t,e,n){var o=n(229);(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.miro-notes--editor-locked {\n  pointer-events: none;\n}\n.miro-notes--editor-container {\n  display: -ms-flexbox;\n  display: flex;\n  overflow: hidden;\n  min-width: 0;\n  min-height: 0;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n}\n.miro-notes--editor {\n  box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  word-wrap: break-word;\n  font-size: 14px;\n}\n.miro-notes--editor .ql-editor {\n  position: absolute;\n  width: 100%;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  outline: none;\n  -o-tab-size: 4;\n     tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  box-sizing: border-box;\n  height: 100%;\n  overflow-y: auto;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  white-space: pre-wrap;\n  font-size: inherit;\n  min-width: 480px;\n  padding-bottom: 84px !important;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n  transform-origin: left top;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-editor {\n    min-width: 320px;\n    font-size: 16px;\n    white-space: normal;\n    word-break: break-word;\n  }\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.miro-notes--editor .export-instance {\n  position: relative;\n  max-width: none !important;\n  padding: 0;\n  font-family: OpenSans, Arial, Helvetica, sans-serif;\n}\n.miro-notes--editor .export-instance img {\n  opacity: 1 !important;\n}\n.miro-notes--editor .ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.miro-notes--editor .ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.miro-notes--editor .ql-editor > * {\n  position: relative;\n  cursor: text;\n}\n.miro-notes--editor p,\n.miro-notes--editor li,\n.miro-notes--editor pre,\n.miro-notes--editor h1,\n.miro-notes--editor h2,\n.miro-notes--editor .ql-editor > div {\n  position: relative;\n}\n.miro-notes--editor p:after,\n.miro-notes--editor li:after,\n.miro-notes--editor pre:after,\n.miro-notes--editor h1:after,\n.miro-notes--editor h2:after,\n.miro-notes--editor .ql-editor > div:after {\n  content: '';\n  position: absolute;\n  height: 100%;\n  top: 0;\n  width: 64px;\n  right: -64px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor p:after,\n  .miro-notes--editor li:after,\n  .miro-notes--editor pre:after,\n  .miro-notes--editor h1:after,\n  .miro-notes--editor h2:after,\n  .miro-notes--editor .ql-editor > div:after {\n    width: 44px;\n    right: -44px;\n  }\n}\n.miro-notes--editor p,\n.miro-notes--editor ol,\n.miro-notes--editor ul,\n.miro-notes--editor pre,\n.miro-notes--editor h1,\n.miro-notes--editor h2 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor p,\n.miro-notes--editor ol,\n.miro-notes--editor ul,\n.miro-notes--editor pre {\n  line-height: 1.7;\n}\n.miro-notes--editor img {\n  border: 4px solid transparent;\n  -webkit-user-select: auto !important;\n     -moz-user-select: auto !important;\n      -ms-user-select: auto !important;\n          user-select: auto !important;\n  box-sizing: border-box;\n  vertical-align: middle;\n  transition: opacity 0.5s;\n}\n.miro-notes--editor h1 {\n  font-size: 2.286em;\n  font-weight: normal;\n  line-height: 1.25;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h2 {\n  font-size: 1.715em;\n  font-weight: normal;\n  line-height: 1.33;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h3,\n.miro-notes--editor h4,\n.miro-notes--editor h5,\n.miro-notes--editor h6 {\n  font-size: 1.428em;\n  font-weight: normal;\n  line-height: 2;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h1:first-child,\n.miro-notes--editor h2:first-child,\n.miro-notes--editor h3:first-child,\n.miro-notes--editor h4:first-child,\n.miro-notes--editor h5:first-child,\n.miro-notes--editor h6:first-child {\n  padding-top: 0;\n}\n.miro-notes--editor h1 > *[class*='updated-comm-']:before,\n.miro-notes--editor h2 > *[class*='updated-comm-']:before,\n.miro-notes--editor h3 > *[class*='updated-comm-']:before,\n.miro-notes--editor h4 > *[class*='updated-comm-']:before,\n.miro-notes--editor h5 > *[class*='updated-comm-']:before,\n.miro-notes--editor h6 > *[class*='updated-comm-']:before {\n  padding: 16px 0 8px 0 !important;\n}\n.miro-notes--editor h1:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h2:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h3:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h4:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h5:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h6:first-child > *[class*='updated-comm-']:before {\n  padding-top: 0 !important;\n}\n.miro-notes--editor code {\n  background-color: rgba(240, 240, 243, 1);\n  background-color: var(--indigo100);\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  box-sizing: border-box;\n  border: 1px solid rgba(205, 204, 215, 1) !important;\n  border: 1px solid var(--indigo400) !important;\n  padding: 0px 4px 2px 4px;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) h1.empty-line:before {\n  content: 'Heading 1';\n  position: absolute;\n  opacity: 0.2;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) h2.empty-line:before {\n  content: 'Heading 2';\n  position: absolute;\n  color: rgba(155, 153, 175, 1);\n  color: var(--indigo500);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) li.empty-line:before {\n  content: 'List';\n  position: absolute;\n  color: rgba(155, 153, 175, 1);\n  color: var(--indigo500);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) li[data-list='checked'].empty-line:before,\n.miro-notes--editor .ql-editor:not(.in-composition) li[data-list='unchecked'].empty-line:before {\n  content: 'To-do';\n}\n.miro-notes--editor .ql-editor .ql-ui {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  left: 0;\n  top: 0;\n  padding: inherit;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.miro-notes--editor .ql-editor .ql-ui .ql-list-ui {\n  position: absolute;\n}\n.miro-notes--editor .ql-editor:not(.ql-disabled) li[data-list='checked'] .ql-ui .ql-list-ui,\n.miro-notes--editor .ql-editor:not(.ql-disabled) li[data-list='unchecked'] .ql-ui .ql-list-ui {\n  cursor: pointer;\n}\n.miro-notes--editor .ql-editor li {\n  list-style-type: none;\n  padding-left: 28px;\n  position: relative;\n}\n.miro-notes--editor .ql-editor li.ql-direction-rtl {\n  padding-left: 0px;\n  padding-right: 28px;\n}\n.miro-notes--editor .ql-editor li .ql-ui .ql-list-ui:before {\n  pointer-events: auto;\n  position: absolute;\n  display: inline-block;\n  white-space: nowrap;\n  vertical-align: top;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  margin-left: -28px;\n}\n.miro-notes--editor .ql-editor li.ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin-left: 0;\n  margin-right: -28px;\n}\n.miro-notes--editor .ql-editor li[data-list='checked'] .ql-ui .ql-list-ui:before,\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:before {\n  width: 16px;\n  height: 16px;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  -ms-flex: 0 0 auto;\n      flex: 0 0 auto;\n}\n.miro-notes--editor .ql-editor li[data-list='bullet'] .ql-ui .ql-list-ui:before {\n  content: url("+o(n(4479))+");\n}\n.miro-notes--editor .ql-editor li[data-list='checked'] .ql-ui .ql-list-ui:before {\n  content: url("+o(n(4480))+");\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n}\n.miro-notes--editor .ql-editor li[data-list='checked'].ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin-left: 4px;\n  margin-right: -28px;\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:before {\n  content: '';\n  width: 16px;\n  height: 16px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  margin: 4px 8px 4px -24px;\n  border: 1px solid rgba(205, 204, 215, 1);\n  border: 1px solid var(--indigo400);\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'].ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin: 4px -24px 4px 8px;\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:hover::before {\n  border-color: rgba(66, 98, 255, 1);\n  border-color: var(--blue700);\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'] {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'] .ql-ui .ql-list-ui:before {\n  content: counter(list-0, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 {\n  counter-increment: list-1;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 .ql-ui .ql-list-ui:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 {\n  counter-increment: list-2;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 .ql-ui .ql-list-ui:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 {\n  counter-increment: list-3;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 .ql-ui .ql-list-ui:before {\n  content: counter(list-3, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 {\n  counter-increment: list-4;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 .ql-ui .ql-list-ui:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 {\n  counter-increment: list-5;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 .ql-ui .ql-list-ui:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 {\n  counter-increment: list-6;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 .ql-ui .ql-list-ui:before {\n  content: counter(list-6, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 {\n  counter-increment: list-7;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 .ql-ui .ql-list-ui:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 {\n  counter-increment: list-8;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 .ql-ui .ql-list-ui:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 {\n  counter-reset: list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-9 {\n  counter-increment: list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-9 .ql-ui .ql-list-ui:before {\n  content: counter(list-9, decimal) '. ';\n}\n.miro-notes--editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 40px;\n}\n.miro-notes--editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 52px;\n}\n.miro-notes--editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 40px;\n}\n.miro-notes--editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 52px;\n}\n.miro-notes--editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 64px;\n}\n.miro-notes--editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 76px;\n}\n.miro-notes--editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 64px;\n}\n.miro-notes--editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 76px;\n}\n.miro-notes--editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 88px;\n}\n.miro-notes--editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 100px;\n}\n.miro-notes--editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 88px;\n}\n.miro-notes--editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 100px;\n}\n.miro-notes--editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 112px;\n}\n.miro-notes--editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 124px;\n}\n.miro-notes--editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 112px;\n}\n.miro-notes--editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 124px;\n}\n.miro-notes--editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 136px;\n}\n.miro-notes--editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 148px;\n}\n.miro-notes--editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 136px;\n}\n.miro-notes--editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 148px;\n}\n.miro-notes--editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 160px;\n}\n.miro-notes--editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 172px;\n}\n.miro-notes--editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 160px;\n}\n.miro-notes--editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 172px;\n}\n.miro-notes--editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 184px;\n}\n.miro-notes--editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 196px;\n}\n.miro-notes--editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 184px;\n}\n.miro-notes--editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 196px;\n}\n.miro-notes--editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 208px;\n}\n.miro-notes--editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 220px;\n}\n.miro-notes--editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 208px;\n}\n.miro-notes--editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 220px;\n}\n.miro-notes--editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 232px;\n}\n.miro-notes--editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 244px;\n}\n.miro-notes--editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 232px;\n}\n.miro-notes--editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 244px;\n}\n.miro-notes--editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.miro-notes--editor .ql-align-right {\n  text-align: right;\n}\n.miro-notes--editor .ql-toolbar {\n  max-height: 40px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n  background-color: rgba(0, 0, 0, 0.92);\n  display: -ms-flexbox;\n  display: flex;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-toolbar {\n    display: none;\n  }\n}\n.miro-notes--editor .ql-toolbar:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.miro-notes--editor .ql-formats {\n  display: inline-block;\n  vertical-align: middle;\n  padding: 0 8px;\n  box-sizing: border-box;\n  border-right: 1px solid rgba(255, 255, 255, 0.2);\n  border-right: 1px solid var(--whiteAlpha20);\n}\n.miro-notes--editor .ql-formats:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.miro-notes--editor .ql-toolbar .ql-formats:first-child {\n  padding-left: 12px;\n}\n.miro-notes--editor .ql-toolbar .ql-formats:last-child {\n  padding-right: 12px;\n  border-right: none;\n}\n.miro-notes--editor .ql-toolbar button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: -ms-flexbox;\n  display: flex;\n  float: left;\n  height: 100%;\n  padding: 8px 0;\n  width: 24px;\n  margin-right: 8px;\n  color: #8f8f8f;\n}\n.miro-notes--editor .ql-toolbar button svg {\n  pointer-events: none;\n}\n.miro-notes--editor .ql-formats button:last-child {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-toolbar button:hover,\n.miro-notes--editor .ql-toolbar button:focus,\n.miro-notes--editor .ql-toolbar button.ql-active,\n.miro-notes--editor .ql-toolbar .ql-picker-label:hover,\n.miro-notes--editor .ql-toolbar .ql-picker-label.ql-active,\n.miro-notes--editor .ql-toolbar .ql-picker-item:hover,\n.miro-notes--editor .ql-toolbar .ql-picker-item.ql-selected {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n}\n.miro-notes--editor .ql-picker {\n  color: #8f8f8f;\n  display: inline-block;\n  float: left;\n  font-size: 14px;\n  height: 100%;\n  margin-right: 8px;\n  position: relative;\n  vertical-align: middle;\n}\n.miro-notes--editor .ql-picker-label {\n  cursor: pointer;\n  display: inline-block;\n  height: 100%;\n  position: relative;\n  outline: none;\n  padding: 8px 0;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-picker-label svg {\n  pointer-events: none;\n}\n.miro-notes--editor .ql-formats .ql-picker:last-of-type {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-picker-options {\n  background-color: #000000;\n  width: 144px;\n  box-sizing: border-box;\n  display: none;\n  padding: 8px;\n  padding-right: 4px;\n  position: absolute;\n  white-space: nowrap;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  outline: none;\n  max-height: 238px;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.miro-notes--editor .ql-picker.ql-expanded .ql-picker-options {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin-top: 4px;\n  top: 100%;\n  left: -60px;\n  z-index: 1;\n}\n.miro-notes--editor .ql-picker.ql-expanded .ql-picker-label {\n  z-index: 3;\n}\n.miro-notes--editor .ql-picker-item {\n  width: 20px;\n  height: 20px;\n  border-radius: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.16);\n  float: left;\n  margin: 6px;\n  box-sizing: border-box;\n  outline: none;\n  cursor: pointer;\n}\n.miro-notes--editor .ql-picker-item[data-value=''] {\n  border: none;\n  margin: 4px;\n  width: 24px;\n  height: 24px;\n}\n.miro-notes--editor .ql-background .ql-picker-item[data-value='#ffffff'] {\n  display: none;\n}\n.miro-notes--editor .ql-picker-item[data-value='']:after {\n  content: url("+o(n(4481))+");\n  opacity: 0.8;\n  width: 24px;\n  height: 24px;\n  display: block;\n}\n.miro-notes--editor .ql-tooltip.ql-editing .ql-tooltip-editor {\n  display: block;\n}\n.miro-notes--editor .ql-tooltip-editor {\n  display: none;\n}\n.miro-notes--editor .ql-tooltip-editor input[type='text'] {\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  opacity: 0.92;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  border: none;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  line-height: 20px;\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 360px;\n  height: 48px;\n  outline: none;\n  padding: 14px 16px;\n  position: absolute;\n  top: 44px;\n  z-index: 1;\n}\n.miro-notes--editor .ql-tooltip-editor a {\n  top: 10px;\n  position: absolute;\n  right: 20px;\n}\n.miro-notes--editor .ql-tooltip-editor a:before {\n  color: #ccc;\n  content: '\\D7';\n  font-size: 16px;\n  font-weight: bold;\n}\n.miro-notes--editor .ql-editor:not(.ql-disabled) a {\n  text-decoration: underline;\n}\n.miro-notes--editor .ql-link-editor {\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  height: 48px;\n  opacity: 0.92;\n  box-sizing: border-box;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  line-height: 24px;\n  padding: 12px 16px;\n  white-space: nowrap;\n  display: -ms-flexbox;\n  display: flex;\n}\n.miro-notes--editor .ql-link-editor input[type='text'] {\n  display: none;\n  font-size: 14px;\n  height: 24px;\n  margin: 0;\n  padding: 0;\n  width: 241px;\n}\n.miro-notes--editor .ql-link-editor a.ql-preview {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  display: inline-block;\n  max-width: 200px;\n  text-decoration: underline;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  vertical-align: top;\n}\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-preview,\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-remove {\n  display: none;\n}\n.miro-notes--editor .ql-link-editor.ql-editing input[type='text'] {\n  display: inline-block;\n}\n.miro-notes--editor .ql-link-editor a.ql-action::after {\n  display: block;\n  height: 24px;\n  border-right: 1px solid rgba(5, 0, 56, 1);\n  border-right: 1px solid var(--indigo700);\n  content: url("+o(n(4482))+");\n  opacity: 0.8;\n  margin-left: 8px;\n  padding-right: 8px;\n}\n.miro-notes--editor .ql-link-editor a.ql-remove::before {\n  display: block;\n  height: 24px;\n  content: url("+o(n(2936))+");\n  opacity: 0.8;\n  margin-left: 8px;\n}\n.miro-notes--editor .ql-link-editor a {\n  display: block;\n  line-height: 24px;\n}\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-action::after {\n  display: block;\n  height: 24px;\n  border-right: 0;\n  content: url("+o(n(4483))+");\n  opacity: 0.8;\n  padding-right: 0;\n}\n.miro-notes--editor a.ql-action:hover::after,\n.miro-notes--editor a.ql-remove:hover::before,\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-action:hover::after {\n  opacity: 1;\n}\n.miro-notes--editor .ql-close,\n.miro-notes--editor .ql-tooltip-arrow {\n  display: none;\n}\n.miro-notes--editor .ql-formatpicker {\n  width: auto !important;\n  display: -ms-flexbox !important;\n  display: flex !important;\n  min-width: 0;\n  font-family: Formular;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 24px;\n  transition: opacity 0.1s;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.miro-notes--editor .ql-bui {\n  width: 24px;\n  height: 24px;\n  box-sizing: border-box;\n  outline: none;\n  cursor: pointer;\n}\n.miro-notes--editor .new-line-picker-placeholder {\n  position: absolute;\n  color: #a5a3b7;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  pointer-events: none;\n}\n.miro-notes--editor .new-line-picker-placeholder-text {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.7;\n}\n.miro-notes--editor .ql-format-picker-plus {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  left: -40px;\n  top: 50%;\n  transform: translateY(-50%);\n  box-sizing: border-box;\n  display: none;\n  color: rgba(205, 204, 215, 1);\n  color: var(--indigo400);\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  cursor: pointer;\n  pointer-events: auto;\n  transition: opacity 0.2s;\n}\n.miro-notes--editor .ql-format-picker-plus:hover {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.miro-notes--editor .new-line-picker-placeholder .ql-format-picker-plus {\n  display: -ms-flexbox;\n  display: flex;\n}\n.miro-notes--editor .ql-format-picker {\n  position: absolute;\n  background: rgba(9, 9, 9, 1);\n  background: var(--black);\n  opacity: 0.92;\n  box-sizing: border-box;\n  padding: 0 12px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  z-index: 8;\n}\n.miro-notes--editor .ql-format-picker-row {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.miro-notes--editor .ql-format-picker__group {\n  width: 100%;\n  padding: 12px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  border-bottom: 1px solid var(--whiteAlpha20);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: inherit;\n      flex-direction: inherit;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-format-picker__group-bui {\n  padding: 0;\n}\n.miro-notes--editor .ql-format-picker__group:last-child {\n  border-bottom: none;\n}\n.miro-notes--editor .ql-format-picker-button {\n  height: 24px;\n  display: -ms-flexbox;\n  display: flex;\n  font-family: Formular;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 24px;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  opacity: 0.56;\n  cursor: pointer;\n}\n.miro-notes--editor .ql-format-picker-button-picker {\n  padding-bottom: 8px;\n}\n.miro-notes--editor .ql-format-picker-button:last-child {\n  padding-bottom: 0;\n}\n.miro-notes--editor .ql-format-picker-button_icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n  -ms-flex: none;\n      flex: none;\n  min-width: 0;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-format-picker-button-bui {\n  padding: 8px 0;\n}\n.miro-notes--editor .ql-format-picker-button-bui:last-child .ql-format-picker-button_icon {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-format-picker-button_text {\n  min-width: 0;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-format-picker-button:hover,\n.miro-notes--editor .ql-format-picker-button-selected,\n.miro-notes--editor .ql-format-picker-current {\n  opacity: 1;\n}\n.miro-notes--editor .ql-picker-hidden {\n  display: none !important;\n}\n.miro-notes--editor .ql-hidden {\n  display: none !important;\n}\n.miro-notes--editor .ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.miro-notes--editor .ql-tooltip {\n  position: absolute;\n  transform: translateY(0);\n  z-index: 15;\n}\n.miro-notes--editor .ql-cursor.hidden {\n  display: none;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container,\n.miro-notes--editor .ql-cursor .ql-cursor-flag {\n  position: absolute;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag {\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  z-index: 5;\n  transform: translateX(-1px);\n  opacity: 0;\n  visibility: hidden;\n  color: white;\n  font-size: 12px;\n  line-height: 20px;\n  box-sizing: border-box;\n  padding: 2px 6px;\n  transition-property: opacity, visibility;\n  pointer-events: none;\n  @include transition((opacity, visibility));\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag .ql-cursor-name {\n  display: inline-block;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag:hover,\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container:hover + .ql-cursor-flag {\n  opacity: 0.9;\n  visibility: visible;\n  transition: none;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container {\n  z-index: 5;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container .ql-cursor-caret {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  margin-left: -1px;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-selection-block {\n  position: absolute;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-mention {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-authorship-block-extension {\n  position: absolute;\n  direction: ltr;\n  padding: inherit;\n  top: 0;\n  height: 100%;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  display: -ms-flexbox;\n  display: flex;\n  pointer-events: none !important;\n  -ms-flex-pack: end;\n      justify-content: flex-end;\n  left: -64px;\n  width: 64px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-authorship-block-extension {\n    left: -72px;\n  }\n}\n.miro-notes--editor .ql-authorship-disabled .ql-authorship-block-extension {\n  display: none;\n}\n.miro-notes--editor .ql-authorship-disabled *[class*='author-'] {\n  border-bottom: none !important;\n}\n.miro-notes--editor .ql-author-caption {\n  pointer-events: auto;\n  font-weight: 500;\n  height: 24px;\n  letter-spacing: 0.5px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  cursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-size: 10px;\n  margin-right: 20px;\n  white-space: nowrap;\n}\n.miro-notes--editor .ql-author-caption--touch-device {\n  margin-right: 5px;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-author-caption--touch-device {\n    font-size: 16px;\n    margin-right: -5px;\n    padding-right: 10px;\n    padding-left: 10px;\n  }\n}\n.miro-notes--editor .ql-user-info-badge-visible {\n  display: -ms-flexbox !important;\n  display: flex !important;\n}\n.miro-notes--editor .ql-user-info-badge {\n  position: absolute;\n  padding: 14px 16px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  top: 0;\n  left: 0;\n  display: none;\n  min-width: 0;\n  min-height: 0;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n  border-radius: 6px;\n  width: 280px;\n  height: 60px;\n  box-sizing: border-box;\n  z-index: 100;\n}\n.miro-notes--editor .ql-user-info-badge-photo {\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n  width: 32px;\n  height: 32px;\n  margin-right: 12px;\n}\n.miro-notes--editor .ql-user-info-badge-info {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  min-width: 0;\n  min-height: 0;\n  font-size: 14px;\n  line-height: 1.14;\n  -ms-flex-pack: center;\n      justify-content: center;\n}\n.miro-notes--editor .ql-user-info-badge-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 1px;\n}\n.miro-notes--editor .ql-user-info-badge-email {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0.4;\n}\n.miro-notes--editor .ql-drag-button {\n  position: absolute;\n  background: url("+o(n(4484))+");\n  width: 16px;\n  height: 16px;\n  transition: opacity 0.2s;\n  cursor: pointer;\n  opacity: 0;\n  left: -16px;\n  top: 3px;\n  pointer-events: auto;\n}\n.miro-notes--editor .ql-drag-button:hover {\n  opacity: 1 !important;\n}\n.miro-notes--editor .ql-editor li:hover .ql-drag-button {\n  opacity: 0.25;\n}\n.miro-notes--editor .ql-comments {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-comment-highlight {\n  position: absolute;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-comment-line {\n  background-color: #4261ff;\n  position: absolute;\n  opacity: 0.3;\n}\n.miro-notes--editor .ql-open-comment {\n  background-color: #4261ff;\n  opacity: 0.2;\n  position: absolute;\n}\n.miro-notes--editor .ql-add-comment-button {\n  position: absolute;\n  background: url("+o(n(4485))+");\n  width: 24px;\n  height: 24px;\n  transition: opacity 0.2s;\n  display: none;\n  cursor: pointer;\n  z-index: 1;\n  opacity: 0.25;\n  right: 40px;\n}\n.miro-notes--editor .ql-add-comment-button:hover {\n  opacity: 1;\n}\n.miro-notes--editor .ql-add-comment-show {\n  display: block;\n}\n.miro-notes--editor *[data-comments-length='1'] {\n  background-color: rgba(66, 97, 255, 0.16);\n  border-top: 1px solid rgba(66, 97, 255, 0.16);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.16);\n}\n.miro-notes--editor *[data-comments-length='2'] {\n  background-color: rgba(66, 97, 255, 0.24);\n  border-top: 1px solid rgba(66, 97, 255, 0.24);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.24);\n}\n.miro-notes--editor *[data-comments-length='3'] {\n  background-color: rgba(66, 97, 255, 0.32);\n  border-top: 1px solid rgba(66, 97, 255, 0.32);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.32);\n}\n.miro-notes--editor *[data-comments-length='4'] {\n  background-color: rgba(66, 97, 255, 0.4);\n  border-top: 1px solid rgba(66, 97, 255, 0.4);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.4);\n}\n.miro-notes--editor *[data-comments-length='5'] {\n  background-color: rgba(66, 97, 255, 0.48);\n  border-top: 1px solid rgba(66, 97, 255, 0.48);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.48);\n}\n.miro-notes--editor img[data-comments-length='1'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.16);\n}\n.miro-notes--editor img[data-comments-length='2'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.24);\n}\n.miro-notes--editor img[data-comments-length='3'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.32);\n}\n.miro-notes--editor img[data-comments-length='4'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.4);\n}\n.miro-notes--editor img[data-comments-length='5'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.48);\n}\n.miro-notes--editor [class*='comment-'] {\n  background-clip: content-box;\n}\n.miro-notes--editor [class*='updated-comm-']:before {\n  content: url("+o(n(4486))+");\n  position: absolute;\n  top: 0;\n  line-height: 24px;\n  width: 24px;\n  height: 24px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  cursor: pointer;\n  z-index: 1;\n  right: -48px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor [class*='updated-comm-']:before {\n    right: -32px;\n  }\n}\n.miro-notes--editor .ql-mobile-comment-button {\n  position: absolute;\n  display: block;\n  left: 0px;\n  width: 44px;\n  height: 24px;\n  margin-top: -1px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  background-repeat: no-repeat;\n  background-position: 5px center;\n  background-clip: unset;\n}\n.miro-notes--editor .ql-mobile-comment-button--hidden {\n  display: none;\n}\n.miro-notes--editor .ql-mobile-comment-button--add {\n  background-image: url("+o(n(4487))+");\n}\n.miro-notes--editor .ql-mobile-comment-button--open {\n  background-image: url("+o(n(4488))+");\n}\n.miro-notes--editor .ql-custom-object,\n.miro-notes--editor .ql-image {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  box-sizing: border-box;\n  margin: 12px 0;\n  cursor: default;\n  outline: 1px solid transparent;\n  transition: border 0.5s;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  color: rgba(9, 9, 9, 1);\n  color: var(--black);\n}\n.miro-notes--editor .ql-embed-object-placeholder {\n  outline: 1px solid rgba(66, 98, 255, 1);\n  outline: 1px solid var(--blue700);\n}\n.miro-notes--editor .ql-drop-line {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 2px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  background-color: rgba(66, 98, 255, 1);\n  background-color: var(--blue700);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-embed-selected {\n  position: absolute;\n  border: 1px solid rgba(66, 98, 255, 1);\n  border: 1px solid var(--blue700);\n  pointer-events: none;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-embed-selected * {\n  pointer-events: auto;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-box {\n  position: absolute;\n  bottom: -5px;\n  right: -5px;\n  cursor: nwse-resize;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-box--touch-device {\n  bottom: -20px;\n  right: -20px;\n  padding: 15px;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-square {\n  width: 7px;\n  height: 7px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 1px solid rgba(66, 98, 255, 1);\n  border: 1px solid var(--blue700);\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu {\n  position: absolute;\n  top: -48px;\n  left: -1px;\n  padding: 4px;\n  border-radius: 6px;\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  box-shadow: 0 8px 16px 0 rgba(5, 0, 56, 0.08);\n  white-space: nowrap;\n  opacity: 0.92;\n  z-index: 15;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button {\n  width: 24px;\n  height: 24px;\n  margin: 4px;\n  opacity: 0.5;\n  padding: 0;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--move-to-widget {\n  background: url("+o(n(4489))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--refresh {\n  background: url("+o(n(4490))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--refresh-spin {\n  animation: spinner 0.75s linear infinite;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--delete {\n  background: url("+o(n(2936))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--comment {\n  background: url("+o(n(4491))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button:hover {\n  opacity: 1;\n}\n",""])},7632:function(t,e){t.exports="#img__plus"},7633:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(16),i=function(){function t(){}return t.allowAutoFocus=!o.a.mobileApp,t}()},7634:function(t,e,n){"use strict";(function(t,o){var i=n(199),r=function(){function e(e){var n=this;this.scrolled=new t.Signal,this.scrollOffset=0,this.userScroll=!1,this.onScrollFinished=new t.Signal,this.onKeyDown=function(t){(t.which==i.a.PAGE_UP||t.which==i.a.PAGE_DOWN||t.which==i.a.UP_ARROW||t.which==i.a.DOWN_ARROW||t.ctrlKey&&t.which==i.a.HOME||t.ctrlKey&&t.which==i.a.END)&&(n.userScroll=!0)},this.processEvent=function(){n.userScroll=!0},this.handleUserScrollEnd=function(){n.userScroll=!1,n.onScrollFinished.dispatch()},this.element=e,e.addEventListener("keydown",this.onKeyDown),e.addEventListener("DOMMouseScroll",this.processEvent),e.addEventListener("mousewheel",this.processEvent),e.addEventListener("touchstart",this.processEvent),e.addEventListener("touchmove",this.processEvent),e.addEventListener("touchend",this.processEvent),e.addEventListener("pointerdown",this.processEvent),e.addEventListener("scroll",this.onScroll.bind(this),!0)}return e.prototype.restoreScrollState=function(){this.element.scrollTop=this.scrollOffset},e.prototype.scrollTo=function(t,e){var n=this;if(void 0===e&&(e=!1),e){this.userScroll=!0,o(this.element).animate({scrollTop:t},600);var i=this.scrollOffset;setTimeout((function(){i===n.scrollOffset&&n.onScrollFinished.dispatch()}),400)}else this.element.scrollTop=t},e.prototype.onScroll=function(t){this.scrollOffset=this.element.scrollTop,this.scrolled.dispatch(this.scrollOffset,this.userScroll),this.userScroll&&(clearTimeout(this.userScrollTimeout),this.userScrollTimeout=setTimeout(this.handleUserScrollEnd,400))},e}();e.a=r}).call(this,n(110),n(193))},7635:function(t,e,n){"use strict";(function(t){var o=n(242),i=n(618),r=n(224),s=[.8,1,1.25,1.5,1.75,2],a=function(){function e(e,n){var r=this;this.changed=new t.Signal,this._size=i.c,this.zoom100=function(){r.$scope.fontScale=1,r.$scope.safeApply()},this.zoomOut=function(){for(var t=s.length-1;t>=0;t--){var e=s[t];if(e<r.$scope.fontScale){r.$scope.fontScale=e,r.$scope.safeApply();break}}},this.zoomIn=function(){for(var t=0;t<s.length;t++){var e=s[t];if(e>r.$scope.fontScale){r.$scope.fontScale=e,r.$scope.safeApply();break}}},this.panelCtrl=e,this.$scope=n,n.fontScale=1,n.zoom100=this.zoom100,n.zoomOut=this.zoomOut,n.zoomIn=this.zoomIn,n.$watch("fontScale",this.onChange.bind(this));var a=o.getItem(this.getLocalStorageKey());if(void 0!==a){var l=parseFloat(a);isFinite(l)&&(this.size=i.c*l)}}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this.$scope.fontScale=t/i.c},enumerable:!1,configurable:!0}),e.prototype.onChange=function(t){this._size=i.c*t,o.setItem(this.getLocalStorageKey(),t),this.applySize(),this.changed.dispatch(this._size)},e.prototype.getLocalStorageKey=function(){return"notes_font_scale_"+r.a.getInfo().id},e.prototype.applySize=function(){this.panelCtrl.noteEditor.fontSize=this.size},e}();e.a=a}).call(this,n(110))},7636:function(t,e,n){"use strict";var o=n(0),i=n(239),r=(n(296),n(1477)),s=n(44),a=n(386),l=(n(187),n(179)),d=n(747),c=n(16).a.desktop?100:50,p=function(){function t(t,e,n){var o=this;this.module=t,this.panelCtrl=e,this.$scope=n,this._users=new Map,this.userClicked=function(t){o.panelCtrl.noteEditor.modules.cursors.scrollToCursor(t.clientId)},n.allOnlineUsersCount=0,n.maxVisibleUserIcons=3,n.onlineUsersToDisplay=[],n.userClicked=this.userClicked,Object(i.a)().rightSidebar.resized.add(this.calcMaxVisibleUsers,this),this.module.onlineUsers.changed.add(this.onUsersChanged,this),this.module.connection.onStateChanged.add(this.onConnectionStateChanged,this),setTimeout((function(){o.calcMaxVisibleUsers(Object(i.a)().rightSidebar.width);var t=o.module.onlineUsers.getOnlineUsers();o.onUsersChanged(t,t,void 0),o.$scope.safeApply()})),this.initStressTestDummyCode()}return t.prototype.initStressTestDummyCode=function(){},t.prototype.onUsersChanged=function(t,e,n){var o=this;e?e.forEach((function(t){return o.clientAdded(t)})):n&&n.forEach((function(t){return o.clientRemoved(t)}))},t.prototype.clientAdded=function(t){var e=this,n=this._users.get(t.id);if(n)return n.count++,void this.updateOnlineUsers();this._users.size>=c||(n={id:t.id,clientId:t.clientId,count:1,color:d.a.getColorForUser(t.id.toString(10)),deactivated:!1,userData:void 0},this._users.set(t.id,n),this.setClientInfo(t.id).promise.then((function(t){n&&(n.userData=t,e.updateOnlineUsers())})).catch((function(){})))},t.prototype.clientRemoved=function(t){this.panelCtrl.noteEditor.modules.cursors.removeCursor(t.clientId);var e=this._users.get(t.id);e&&(e.count--,e.count||this._users.delete(t.id),this.updateOnlineUsers())},t.prototype.onConnectionStateChanged=function(t){t==r.a.DISCONNECTED&&(this.$scope.allOnlineUsersCount=0,this._users.clear(),this.updateOnlineUsers())},t.prototype.calcMaxVisibleUsers=function(t){this.$scope.maxVisibleUserIcons=Math.min(3,Math.floor((t-440)/28))},t.prototype.updateOnlineUsers=function(){this.$scope.onlineUsersToDisplay=Array.from(this._users.values()).filter((function(t){return!!t.userData})),this.$scope.allOnlineUsersCount=this.$scope.onlineUsersToDisplay.length,this.$scope.safeDigest()},t.prototype.setClientInfo=function(t){var e=Object(s.b)();return a.a(t.toString()).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),e},Object(o.c)([l.j.throttle(2e3)],t.prototype,"updateOnlineUsers",null),t}();e.a=p},7637:function(t,e,n){"use strict";(function(t){var o=n(330),i=n(1285),r=function(){function e(e){var n=this;this.$scope=e,this.moreVisible=!1,t.log("ng","OnlineUsersController"),e.toggleTooltipPlacement="bottom",e.userTooltipPlacement="bottom",e.PictureSize=i.a,e.$on("$destroy",(function(){n.clickController&&n.clickController.destroy()}))}return e.prototype.userClicked=function(t){this.$scope.clicked({$user:t}),this.close()},e.prototype.showMore=function(){this.moreVisible=!this.moreVisible,this.moreVisible&&(this.clickController=o.subscribeOnUp(this,this.close,".user-icons-row__count, .user-icons-row__menu"))},e.prototype.close=function(){this.moreVisible=!1},e.$inject=["$scope"],e}();e.a=r}).call(this,n(54))},7638:function(t,e,n){var o=n(7639);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7639:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".user-icons-row {\n  z-index: 90;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: end;\n      justify-content: flex-end;\n  position: relative;\n  -ms-flex-negative: 1;\n      flex-shrink: 1;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.user-icons-row .user-picture {\n  transition: 1.2s linear all;\n}\n@media screen and (max-width: 1024px) {\n}\n.user-icons-row .user-picture.ng-leave {\n  transition: 0.5s linear all;\n}\n.user-icons-row .user-picture.ng-leave-active {\n  transform: translateY(10px);\n  opacity: 0;\n}\n.user-icons-row .user-picture.ng-enter.ng-enter-active {\n  animation: onlineUserBounce 0.6s;\n}\n@keyframes onlineUserBounce {\n  0% {\n    transform: translateY(10px);\n  }\n  28% {\n    transform: translateY(-45px);\n  }\n  30% {\n    transform: translateY(-50px);\n  }\n  35% {\n    transform: translateY(-51px);\n  }\n  100% {\n    transform: translateY(0px);\n  }\n}\n.user-icons-row__item--deactivated .user-icons-row__item {\n  opacity: 0.5;\n}\n.user-icons-row--color {\n  margin: 0 2px;\n  border-radius: 50%;\n  border: solid 2px transparent;\n  display: inline-block;\n  vertical-align: middle;\n}\n.user-icons-row__count {\n  font-weight: bold;\n  margin-left: 12px;\n  font-size: 12px;\n  width: auto;\n}\n.user-icons-row__count:hover {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.user-icons-row__menu {\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 200;\n  top: 30px;\n  right: 0;\n  width: 280px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  font-size: 14px;\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n  transform-origin: top center;\n  padding: 20px 16px;\n}\n.user-icons-row__menu.ng-hide-remove {\n  transition: all 0.15s cubic-bezier(0.2, 0.3, 0.25, 0.9);\n  transform-origin: 0 50%;\n  opacity: 0;\n  transform: scale(0.8);\n}\n.user-icons-row__menu.ng-hide-remove.ng-hide-remove-active {\n  opacity: 1;\n  transform: scale(1);\n}\n.user-icons-row__menu-users {\n  max-height: 300px;\n}\n.user-icons-row__menu-user {\n  margin-bottom: 8px;\n  height: 28px;\n}\n.user-icons-row__menu-user:last-child {\n  margin-bottom: 0;\n}\n.user-icons-row__menu-user:hover .user-icons-row__menu-user-name {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.user-icons-row__menu-user--deactivated {\n  opacity: 0.5;\n}\n.user-icons-row__menu-user-name {\n  display: inline-block;\n  vertical-align: middle;\n  margin-left: 8px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  max-width: 180px;\n  line-height: 28px;\n  height: 28px;\n}\n",""])},7640:function(t,e){t.exports='<div class="user-icons-row">\n\t<div\n\t\tclass="user-icons-row--color"\n\t\tng-style="{\'border-color\': user.color}"\n\t\ttooltip="{{ user.userData.name ? user.userData.name : \'Anonymous\' }}"\n\t\ttooltip-append-to-body="true"\n\t\ttooltip-placement="{{userTooltipPlacement}}"\n\t\thm-tap="ctrl.userClicked(user)"\n\t\tng-class="{\'user-icons-row__item--deactivated\': user.deactivated}"\n\t\tng-repeat="user in users | limitTo:maxVisible track by user.clientId"\n\t>\n\t\t<user-picture-react\n\t\t\tclass-name="\'btn user-icons-row__item\'"\n\t\t\tpicture-url="user.userData.picture.size44"\n\t\t\tsize="PictureSize.Size24"\n\t\t\tshould-hide-before-image-load="true"\n\t\t>\n\t\t</user-picture-react>\n\t</div>\n\n\t<div class="btn user-icons-row__count" ng-show="showMore && (allUsersCount > maxVisible)" hm-tap="ctrl.showMore()">\n\t\t+{{allUsersCount - maxVisible}}\n\t</div>\n\n\t<div class="user-icons-row__menu" ng-if="ctrl.moreVisible">\n\t\t<scrollable no-top-line="true" no-bottom-line="true">\n\t\t\t<div class="user-icons-row__menu-users">\n\t\t\t\t<div\n\t\t\t\t\tclass="btn user-icons-row__menu-user"\n\t\t\t\t\tng-repeat="user in users track by user.clientId"\n\t\t\t\t\tng-if="$index >= maxVisible"\n\t\t\t\t\thm-tap="ctrl.userClicked(user)"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="user-icons-row--color"\n\t\t\t\t\t\tng-style="{\'border-color\': user.color}"\n\t\t\t\t\t\tng-class="{\'user-icons-row__menu-user--deactivated\': user.deactivated}"\n\t\t\t\t\t>\n\t\t\t\t\t\t<user-picture-react\n\t\t\t\t\t\t\tclass-name="\'btn user-icons-row__item\'"\n\t\t\t\t\t\t\tpicture-url="user.userData.picture.size44"\n\t\t\t\t\t\t\tsize="PictureSize.Size24"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</user-picture-react>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="user-icons-row__menu-user-name">{{user.userData.name}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</scrollable>\n\t</div>\n</div>\n'},7641:function(t,e,n){"use strict";(function(t){var o=n(340),i=n(589),r=n(181),s=n(547),a=n(265),l=n(199),d=n(359),c=n(345),p=n(16),u=o.b(),h=i.b(),m=d.b(),g=function(){function e(e,n){var o=this;this.$scope=e,this.$element=n,this.initScroll=0,this.onKeyUp=function(e){e.keyCode==l.a.ESCAPE&&m().getFocus()==c.a.COMMENT&&0===t(".rtb-modal").length&&o.$scope.comments.length&&o.onCommentsOpened()};var i,r,a=s.a.instance;a&&(r=a.panelController,(i=r.noteEditor.modules.comments).commentOpened.add(this.onCommentsOpened,this),this.panelCtrl=a.panelController,p.a.android?this.panelCtrl.noteEditor.scrollProcessor.scrolled.add(this.updateVisualPosition,this):this.panelCtrl.noteEditor.hideStateChanged.add(this.onHideStateChanged,this)),e.comments=[],e.isAllowOpen=function(){return u().allowOpen},e.isAllowEdit=function(){return u().allowEdit},e.isShowResolved=function(){return h().showResolved},e.positionX=10,e.positionY=10,t(document).on("keyup",this.onKeyUp),e.isHidden=!1,e.$on("$destroy",(function(){a&&(i.commentOpened.remove(o.onCommentsOpened,o),r.noteEditor.hideStateChanged.remove(o.onHideStateChanged,o)),o.windowClickController&&o.windowClickController.destroy(),t(document).off("keyup",o.onKeyUp)}))}return e.prototype.onHideStateChanged=function(t){t?this.hideVisual():this.updateVisualPosition()},e.prototype.hideVisual=function(){this.$scope.isHidden||(this.$scope.isHidden=!0,this.$scope.safeApply())},e.prototype.updateVisualPosition=function(){if(this.$scope.isHidden=!1,0!==this.$scope.comments.length&&this.bounds){var t=this.panelCtrl.noteEditor.scrollProcessor.scrollOffset,e=this.$element.width(),n=this.$element.height(),o=r.pixiCanvas.canvasHeight,i=this.bounds.top-t+this.initScroll-4,a=this.bounds.bottom-t+this.initScroll+4,l=a;if(a+n>o&&(l=i-n),a+n>o&&i-n<0&&(l=(o-n)/2),l<0&&l+n<0||l>o)this.$scope.isHidden=!0;else{var d=this.bounds.left-4,c=s.a.instance.panelController.noteEditor.getContentSizeProcessor(),p=c.getPaddingHoriz()+c.getWidth()+4-e;d=Math.min(d,p),this.$scope.positionX=d,this.$scope.positionY=l,this.$scope.isHidden=!1}this.$scope.safeApply()}},e.prototype.onCommentsOpened=function(t){this.$scope.comments.length&&this.$scope.comments.forEach((function(t){t.setCmtMode(!1)})),this.bounds=t?t.bounds:void 0,this.initScroll=this.panelCtrl.noteEditor.scrollProcessor.scrollOffset,this.$scope.comments=t?t.comments.slice(0):[],this.$scope.comments.length&&this.$scope.comments.forEach((function(t){t.setCmtMode(!0)})),this.updateVisualPosition(),this.scrollThreadToLastComment(),this.$scope.safeDigest()},e.prototype.scrollThreadToLastComment=function(){var t=this.$element.find(".notes-comments-container")[0];t.scrollTop=t.scrollHeight},e.prototype.__onOpenCommentPresenceChanged=function(t,e){e||a.h(this.$scope.comments,t)},e.$inject=["$scope","$element"],e}();e.a=g}).call(this,n(193))},7642:function(t,e,n){var o=n(7643);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7643:function(t,e,n){var o=n(229);(t.exports=n(177)(!1)).push([t.i,".emoji-icon {\n  image-rendering: optimizeQuality;\n  font-size: inherit;\n  position: relative;\n  display: inline-block;\n  line-height: normal;\n  vertical-align: middle;\n  background-image: url("+o(n(1468))+");\n  background-repeat: no-repeat;\n  background-size: 4100%;\n  width: 24px;\n  height: 24px;\n}\n.emoji-icon--16 {\n  width: 16px;\n  height: 16px;\n  margin-right: 3px;\n}\n.emoji-icon--offset-top {\n  margin-top: -2px;\n}\n.emoji-icon--offset-left {\n  margin-left: 6px;\n}\n@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.notes-comments {\n  position: absolute;\n  background: rgba(255, 255, 255, 1);\n  background: var(--white);\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);\n  z-index: 100;\n  width: 340px;\n}\n.notes-comments .comment-body {\n  background: none;\n  border-radius: 0;\n}\n.notes-comments .comment-body .scrollable-list {\n  max-height: none;\n  overflow: hidden;\n}\n.notes-comments .notes-comment-wrapper:not(:last-child) {\n  border-bottom: 1px solid rgba(235, 235, 239, 1);\n  border-bottom: 1px solid var(--indigo200);\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .comment-message {\n  margin-top: 0;\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .comment-message--repeat {\n  margin-top: -12px;\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .comment-message:last-child {\n  padding-bottom: 0;\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .comment-body__settings {\n  border-bottom: none;\n  height: 46px;\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .ui-textarea .editable {\n  border-top: 1px solid rgba(255, 255, 255, 1);\n  border-top: 1px solid var(--white);\n}\n.notes-comments .notes-comment-wrapper:not(:only-child) .comment-message--tip {\n  padding-top: 16px;\n}\n.notes-comments--hidden {\n  visibility: hidden;\n}\n.notes-comments-container {\n  overflow-x: hidden;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n  height: 100%;\n  max-height: calc(50vh - 8px);\n}\n.notes-comments-container::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.notes-comments-container::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.notes-comments-container::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.notes-comments-scroller {\n  position: relative;\n  max-height: 100%;\n}\n.notes-comment {\n  position: relative;\n}\n",""])},7644:function(t,e){t.exports='<div\n\tclass="comments notes-comments"\n\tng-class="{\'comments--editable\': isAllowEdit(), \'notes-comments--hidden\': isHidden}"\n\tng-style="{\'left\': positionX, \'top\': positionY}"\n>\n\t<div class="notes-comments-container" no-prevent-default="true">\n\t\t<div class="notes-comments-scroller">\n\t\t\t<div class="notes-comment-wrapper" ng-repeat="comment in comments">\n\t\t\t\t<comment-body\n\t\t\t\t\tcomment="comment"\n\t\t\t\t\tallow-pin="false"\n\t\t\t\t\thighlighted-text="comment.highlightedText"\n\t\t\t\t\tdeny-scroll-to-message="true"\n\t\t\t\t\twrapped="true"\n\t\t\t\t>\n\t\t\t\t</comment-body>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},7645:function(t,e){t.exports='<div>\n\t<rating\n\t\tclass="rate-notes"\n\t\theader="{{ctrl.getRateCaption()}}"\n\t\toptions="ctrl.rateOptions"\n\t\trate="ctrl.rate"\n\t\tclosed="ctrl.rateClosed()"\n\t\tshowGratitude="true"\n\t\tsubmitted="ctrl.rateSubmitted()"\n\t>\n\t</rating>\n</div>\n'},7646:function(t,e,n){var o=n(7647);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7647:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.rate-notes {\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n}\n",""])},7648:function(t,e,n){var o=n(7649);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7649:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".notes-font-size {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-flow: row-reverse;\n      flex-flow: row-reverse;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: start;\n      justify-content: flex-start;\n  font-size: 12px;\n  font-weight: bold;\n  padding-left: 10px;\n  width: 46px;\n  height: 48px;\n  overflow: hidden;\n  transition: width ease 200ms;\n  cursor: pointer;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n}\n.notes-font-size-button {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  width: 36px;\n}\n.notes-font-size-button:hover {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.notes-font-size-label {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  text-align: center;\n  width: 56px;\n  height: 48px;\n  line-height: 48px;\n}\n.notes-font-size-label:hover {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.notes-font-size__expanded {\n  width: 126px;\n  background-color: #fff;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n}\n",""])},7650:function(t,e){t.exports='<div class="notes-font-size" ng-class="{\'notes-font-size__expanded\': !collapsed}">\n\t<div\n\t\tclass="notes-font-size-label"\n\t\tdata-autotest-id="notes-font-size-label"\n\t\ttooltip="zoom to 100%"\n\t\ttooltip-append-to-body="true"\n\t\thm-tap="zoom100()"\n\t>\n\t\t{{scale}}\n\t</div>\n\n\t<div\n\t\tclass="notes-font-size-button svg-button"\n\t\tdata-autotest-id="notes-font-size-plus"\n\t\ttooltip="zoom in"\n\t\ttooltip-append-to-body="true"\n\t\thm-tap="zoomIn()"\n\t>\n\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t\t\t<path\n\t\t\t\tfill="currentColor"\n\t\t\t\tfill-rule="nonzero"\n\t\t\t\td="M18 13h-5v5a1 1 0 0 1-2 0v-5H6a1 1 0 0 1 0-2h5V6a1 1 0 0 1 2 0v5h5a1 1 0 0 1 0 2z"\n\t\t\t/>\n\t\t</svg>\n\t</div>\n\n\t<div\n\t\tclass="notes-font-size-button svg-button"\n\t\tdata-autotest-id="notes-font-size-minus"\n\t\ttooltip="zoom out"\n\t\ttooltip-append-to-body="true"\n\t\thm-tap="zoomOut()"\n\t>\n\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t\t\t<path fill="currentColor" fill-rule="nonzero" d="M18 13H6a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z" />\n\t\t</svg>\n\t</div>\n</div>\n'},7651:function(t,e,n){var o=n(7652);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7652:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.notes-first-time-banner {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.64);\n  z-index: 150;\n  font-family: Formular, sans-serif;\n  font-size: 24px;\n  font-weight: 500;\n  font-size: 20px;\n}\n.notes-first-time-banner .add-margin {\n  margin-bottom: 24px;\n}\n.notes-first-time-banner-bg {\n  background: #ffffff;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n  border-radius: 16px;\n  border-radius: var(--radiusXl);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-align: center;\n      align-items: center;\n  padding: 32px 40px 48px 40px;\n  box-sizing: border-box;\n}\n.notes-first-time-banner-head {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  -ms-flex-align: center;\n      align-items: center;\n  width: 100%;\n  font-size: 24px;\n  line-height: 20px;\n  margin-bottom: 24px;\n}\n.notes-first-time-banner-x {\n  background: #050038;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n  box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  cursor: pointer;\n}\n.notes-first-time-banner-x svg {\n  width: 20px;\n}\n.notes-first-time-banner-gif {\n  width: 352px;\n  height: 198px;\n  background: #e1e0e7;\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  margin-bottom: 24px;\n}\n.notes-first-time-banner-txt {\n  position: relative;\n  width: 300px;\n  font-size: 14px;\n  font-weight: normal;\n  margin-bottom: 24px;\n}\n.notes-first-time-banner-txt .rtb-checkbox {\n  position: absolute;\n  left: -24px;\n}\n.notes-first-time-banner-cmt {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  right: -24px;\n  top: 0;\n}\n.notes-first-time-banner-span-i {\n  font-style: italic;\n}\n.notes-first-time-banner-span-y {\n  background: #ffeb80;\n}\n.notes-first-time-banner-span-b {\n  background: #ecefff;\n}\n.notes-first-time-banner-cta {\n  width: 288px;\n  height: 64px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  background: #4262ff;\n  border-radius: 32px;\n  border-radius: var(--radiusXxl);\n  color: white;\n  font-size: 20px;\n  line-height: 20px;\n  cursor: pointer;\n}\n",""])},7653:function(t,e,n){t.exports='<div class="notes-first-time-banner">\n\t<div class="notes-first-time-banner-bg">\n\t\t<div class="notes-first-time-banner-head">\n\t\t\tMeet Visual Notes!\n\n\t\t\t<div class="notes-first-time-banner-x">\n\t\t\t\t<svg    hm-tap="onClose({$button: \'cancel\'})"  role="none" ><use xlink:href="'+n(3876)+'"></use></svg>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<img class="notes-first-time-banner-gif" src="'+n(7654)+'" />\n\n\t\t<div class="notes-first-time-banner-txt">\n\t\t\t<rtb-checkbox checked="true" on-change="onElementClick(\'checkbox-1\')"></rtb-checkbox>\n\t\t\t<span class="notes-first-time-banner-span-i">Add structured content</span> to your boards for summaries, agendas,\n\t\t\tand more.\n\t\t</div>\n\n\t\t<div class="notes-first-time-banner-txt">\n\t\t\t<rtb-checkbox checked="false" on-change="onElementClick(\'checkbox-2\')"></rtb-checkbox>\n\t\t\t<span class="notes-first-time-banner-span-y">Drag & drop any object from the board</span> to help your team\n\t\t\tnavigate the content, collaborate and contribute efficiently.\n\t\t</div>\n\n\t\t<div class="notes-first-time-banner-txt">\n\t\t\t<rtb-checkbox checked="false" on-change="onElementClick(\'checkbox-3\')"></rtb-checkbox>\n\t\t\t<span class="notes-first-time-banner-span-b">Leave comments right in the Visual Notes</span><br />to give feedback\n\t\t\tto your team members\n\t\t\t<svg \n\t\t\t\tclass="notes-first-time-banner-cmt"\n\t\t\t\t \n\t\t\t\thm-tap="onElementClick(\'icon-comment\')"\n\t\t\t role="none" ><use xlink:href="'+n(7655)+'"></use></svg>\n\t\t</div>\n\n\t\t<div class="notes-first-time-banner-cta" hm-tap="onClose({$button: \'try\'})">\n\t\t\tTry now!\n\t\t</div>\n\t</div>\n</div>\n'},7654:function(t,e,n){t.exports=n.p+"src/lazy-modules/board/lazy-modules/board-ui/lazy-modules/notes/components/onboarding/firsttimebanner/anim.914e56.gif"},7655:function(t,e){t.exports="#img__comment-updated"},7656:function(t,e){t.exports="#img__todo"},7657:function(t,e){t.exports="#img__clock"},7658:function(t,e){t.exports="#img__list"},7659:function(t,e){t.exports="#img__workshop"},7660:function(t,e){t.exports="#img__annotation"},7661:function(t,e,n){var o=n(7662);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7662:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.notes-templates {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  padding: 0 64px;\n  top: 130px;\n  z-index: 2;\n  box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  pointer-events: none;\n}\n.notes-templates__desc {\n  color: rgba(205, 204, 215, 1);\n  color: var(--indigo400);\n  font-style: italic;\n  line-height: 24px;\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n.notes-templates__header {\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 24px;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  margin-bottom: 16px;\n}\n.notes-templates__template {\n  font-size: 14px;\n  line-height: 24px;\n  color: rgba(155, 153, 175, 1);\n  color: var(--indigo500);\n  display: -ms-flexbox;\n  display: flex;\n  cursor: pointer;\n  margin-bottom: 16px;\n  transition: color 0.2s;\n  pointer-events: auto;\n}\n.notes-templates__template_text {\n  border-bottom: 1px solid #e3e0f7;\n  height: 20px;\n}\n.notes-templates__template:hover {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.notes-templates__template_icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n}\n",""])},7663:function(t,e){t.exports='<div class="notes-templates">\n\t<div class="notes-templates__header">Templates</div>\n\n\t<div\n\t\tng-repeat="template in ctrl.templates | orderBy:\'index\'"\n\t\thm-tap="ctrl.onSelectTemplate(template)"\n\t\tclass="notes-templates__template notes-dnd-ignore"\n\t>\n\t\t<div class="notes-templates__template_icon" ng-bind-html="trustAsHtml(template.icon)"></div>\n\t\t<div class="notes-templates__template_text">{{template.name}}</div>\n\t</div>\n</div>\n'},7664:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-width="2">\n        <path d="M5 14.5C8.5 8 17.5 8 20 15M9.018 15H4l.018-5"/>\n    </g>\n</svg>\n'},7665:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-width="2">\n        <path d="M19 14.5C15.5 8 6.5 8 4 15M14.982 15H20l-.018-5"/>\n    </g>\n</svg>\n'},7666:function(t,e,n){t.exports='<div class="notes-help-popup" ng-class="{\'mobile-app\': isMobileApp}">\n\t<div class="notes-help-popup__close" hm-tap="closed()">\n\t\t<svg  class="notes-help-popup__close-icon"    role="none" ><use xlink:href="'+n(3876)+'"></use></svg>\n\t</div>\n\n\t<div class="notes-help-popup__content" no-prevent-default="true">\n\t\t<div class="notes-help-popup__header">Visual Notes</div>\n\n\t\t<div class="top-margin">\n\t\t\t<script src="https://fast.wistia.com/embed/medias/jksexj7709.jsonp" async><\/script>\n\t\t\t<script src="https://fast.wistia.com/assets/external/E-v1.js" async><\/script>\n\n\t\t\t<div class="notes-help-popup__video" hm-tap="videoClicked()">\n\t\t\t\t<div class="wistia_responsive_padding" style="padding: 56.25% 0 0 0; position: relative;">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="wistia_responsive_wrapper"\n\t\t\t\t\t\tstyle="height: 100%; left: 0; position: absolute; top: 0; width: 100%;"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="wistia_embed wistia_async_jksexj7709 seo=false videoFoam=true"\n\t\t\t\t\t\t\tstyle="height: 100%; position: relative; width: 100%;"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="wistia_swatch"\n\t\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\t\t\ttransition: opacity 200ms;\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc="https://fast.wistia.com/embed/medias/jksexj7709/swatch"\n\t\t\t\t\t\t\t\t\tstyle="filter: blur(5px); height: 100%; object-fit: contain; width: 100%;"\n\t\t\t\t\t\t\t\t\talt=""\n\t\t\t\t\t\t\t\t\taria-hidden="true"\n\t\t\t\t\t\t\t\t\tonload="this.parentNode.style.opacity=1;"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<p class="notes-help-popup__sub-sub-header top-margin-16">\n\t\t\t\tWrite quick notes, annotate board content, and share it with your team\n\t\t\t</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Visual Notes are available<br />for everyone on the board</li>\n\t\t\t\t<li>Use pre-built templates<br />to get started quickly</li>\n\t\t\t\t<li>Drag & drop objects from<br />the board to annotate them</li>\n\t\t\t</ul>\n\n\t\t\t<a\n\t\t\t\tclass="top-margin-16"\n\t\t\t\thm-tap="learnMoreClicked()"\n\t\t\t\thref="https://help.miro.com/hc/en-us/articles/360035713254-Visual-Notes"\n\t\t\t\ttarget="_blank"\n\t\t\t>\n\t\t\t\tLearn more about Visual Notes\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div class="separator top-margin" ng-if="!isMobileApp"></div>\n\n\t\t<div class="notes-help-popup__sub-header top-margin" ng-if="!isMobileApp">Shortcuts</div>\n\n\t\t<div class="top-margin" ng-if="!isMobileApp">\n\t\t\t<div class="notes-help-popup__key top-margin-16" ng-repeat="key in shortcuts">\n\t\t\t\t<div class="notes-help-popup__key-icon" ng-bind-html="ctrl.getTrusted(key.icon)"></div>\n\t\t\t\t<span class="notes-help-popup__key-title">{{key.title}}</span>\n\t\t\t\t<span class="notes-help-popup__key-shortcut">{{key.shortcut}}</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},7667:function(t,e,n){var o=n(7668);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7668:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".notes-help-popup {\n  background: white;\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  width: 360px;\n  display: -ms-flexbox;\n  display: flex;\n  margin: 8px;\n  max-height: 75vh;\n}\n.notes-help-popup.mobile-app {\n  width: calc(100% - 16px);\n  max-height: calc(100% - 16px - env(safe-area-inset-top) - env(safe-area-inset-bottom));\n  margin-bottom: calc(8px + env(safe-area-inset-bottom));\n}\n.notes-help-popup .top-margin {\n  margin-top: 24px;\n}\n.notes-help-popup .top-margin-16 {\n  margin-top: 16px;\n}\n.notes-help-popup .bottom-margin {\n  height: 96px;\n}\n.notes-help-popup .separator {\n  height: 1px;\n  background: #e1e0e7;\n}\n.notes-help-popup .notes-help-popup__content {\n  padding: 24px 32px;\n  box-sizing: border-box;\n  overflow-y: auto;\n  max-height: 75vh;\n}\n.notes-help-popup .notes-help-popup__content::-webkit-scrollbar {\n  display: none;\n}\n.notes-help-popup .notes-help-popup__close {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 32px;\n  height: 32px;\n  padding: 9px;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.notes-help-popup .notes-help-popup__close-icon {\n  width: 14px;\n  height: 14px;\n}\n.notes-help-popup .notes-help-popup__close-icon:hover {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.notes-help-popup .notes-help-popup__header {\n  font-family: Formular, sans-serif;\n  font-size: 24px;\n  font-weight: 500;\n}\n.notes-help-popup .notes-help-popup__sub-header {\n  font-style: normal;\n  font-stretch: normal;\n  letter-spacing: normal;\n  font-family: Formular, sans-serif;\n  font-size: 20px;\n  line-height: 26px;\n  font-weight: 500;\n}\n.notes-help-popup .notes-help-popup__sub-sub-header {\n  font-family: Formular, sans-serif;\n  font-size: 16px;\n  font-weight: 500;\n}\n.notes-help-popup a {\n  text-decoration: underline;\n}\n.notes-help-popup .notes-help-popup__video {\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  overflow: hidden;\n}\n.notes-help-popup .notes-help-popup__key {\n  display: -ms-flexbox;\n  display: flex;\n}\n.notes-help-popup .notes-help-popup__key .notes-help-popup__key-icon {\n  width: 24px;\n  height: 24px;\n}\n.notes-help-popup .notes-help-popup__key .notes-help-popup__key-title {\n  font-style: normal;\n  font-stretch: normal;\n  letter-spacing: normal;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 600;\n  line-height: 24px;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  margin-left: 18px;\n}\n.notes-help-popup .notes-help-popup__key .notes-help-popup__key-shortcut {\n  font-style: normal;\n  font-stretch: normal;\n  letter-spacing: normal;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  background: #ebebef;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  padding: 2px 8px;\n}\n.notes-help-popup .notes-help-popup__rate {\n  position: absolute;\n  left: calc(50% - 140px);\n  bottom: 24px;\n}\n",""])},7669:function(t,e,n){var o=n(7670);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7670:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.notes-pin {\n  position: relative;\n  cursor: pointer;\n  width: 24px;\n  height: 24px;\n}\n.notes-pin svg {\n  width: 100%;\n  height: 100%;\n}\n.notes-pin .badge {\n  position: absolute;\n  left: 12px;\n  top: -6px;\n  background: rgba(66, 98, 255, 1);\n  background: var(--blue700);\n  padding: 0 4px;\n  box-sizing: border-box;\n  font-size: 9px;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  border-radius: 9px;\n  min-width: 18px;\n  height: 18px;\n  line-height: 18px;\n  text-align: center;\n}\n.notes-pin--faded {\n  cursor: default;\n}\n.notes-pin--active svg {\n  opacity: 1;\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n",""])},7671:function(t,e,n){t.exports='<div\n\tclass="notes-pin"\n\tng-class="{\'notes-pin--active\': isPinned, \'notes-pin--faded\': !canEdit}"\n\thm-tap="togglePin()"\n\ttooltip="{{isPinned ? pinnerName : \'Keep note opened for all visitors. Any editor can unpin if needed\'}}"\n\ttooltip-append-to-body="true"\n\ttooltip-placement="{{tooltipPlace}}"\n>\n\t<svg     role="none" ><use xlink:href="'+n(7672)+'"></use></svg>\n\t<div class="badge" ng-if="pinnerAbv">{{pinnerAbv}}</div>\n</div>\n'},7672:function(t,e){t.exports="#img__pin"},7673:function(t,e,n){var o=n(7674);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7674:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.notes-panel {\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 1);\n  background: var(--white);\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  transition: all 0.2s ease-out;\n  transform: translateX(0);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  position: relative;\n}\n.notes-panel.ng-hide {\n  transform: translateX(100%);\n}\n.notes-panel .margin-left {\n  margin-left: 12px;\n}\n.notes-panel .margin-right {\n  margin-right: 12px;\n}\n.notes-font-size {\n  z-index: 11;\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n}\n.notes-panel__help {\n  position: absolute;\n  left: 16px;\n  bottom: 12px;\n  background: rgba(255, 255, 255, 0.8);\n  background: var(--whiteAlpha80);\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  z-index: 114;\n}\n.notes-panel__help.mobile-app {\n  bottom: calc(14px + env(safe-area-inset-bottom));\n}\n.notes-panel__help-btn {\n  width: 40px;\n  height: 40px;\n  padding: 8px;\n  box-sizing: border-box;\n}\n.notes-panel__help-btn .svg-button {\n  width: 24px;\n  height: 24px;\n}\n.notes-panel__help-btn:hover .svg-button {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.notes-panel__help .sep {\n  height: 1px;\n  width: 24px;\n  background: rgba(235, 235, 239, 1);\n  background: var(--indigo200);\n  margin: 0 8px;\n  border-radius: 1px;\n}\n.notes-panel__help-shade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: black;\n  opacity: 0.64;\n  z-index: 115;\n  transition: opacity 0.3s ease-out;\n}\n.notes-panel__help-shade.ng-hide {\n  opacity: 0;\n}\n.notes-panel__popup-animated {\n  transition: opacity 0.15s ease-out, transform 0.15s ease-out;\n  transform-origin: left bottom;\n}\n.notes-panel__popup-animated.ng-leave.ng-leave-active,\n.notes-panel__popup-animated.ng-enter {\n  opacity: 0;\n  transform: scale(0.9);\n}\n.notes-panel__popup-animated.ng-enter.ng-enter-active,\n.notes-panel__popup-animated.ng-leave {\n  opacity: 1;\n  transform: unset;\n}\n.notes-panel__help-popup {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  z-index: 116;\n  transition: opacity 0.15s ease-out, transform 0.15s ease-out;\n  transform-origin: left bottom;\n}\n.notes-panel__help-popup.ng-leave.ng-leave-active,\n.notes-panel__help-popup.ng-enter {\n  opacity: 0;\n  transform: scale(0.9);\n}\n.notes-panel__help-popup.ng-enter.ng-enter-active,\n.notes-panel__help-popup.ng-leave {\n  opacity: 1;\n  transform: unset;\n}\n.notes-panel__rate-popup {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n  z-index: 116;\n  transition: opacity 0.15s ease-out, transform 0.15s ease-out;\n  transform-origin: left bottom;\n}\n.notes-panel__rate-popup.ng-leave.ng-leave-active,\n.notes-panel__rate-popup.ng-enter {\n  opacity: 0;\n  transform: scale(0.9);\n}\n.notes-panel__rate-popup.ng-enter.ng-enter-active,\n.notes-panel__rate-popup.ng-leave {\n  opacity: 1;\n  transform: unset;\n}\n.notes-notification {\n  position: absolute;\n  width: 100%;\n  top: 60px;\n  min-height: 24px;\n  left: 50%;\n  pointer-events: none;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n}\n.notes-notification.mobile-app {\n  top: calc(73px + env(safe-area-inset-top));\n}\n.notes-notification-message {\n  position: relative;\n  left: -50%;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  background-color: rgba(0, 0, 0, 0.92);\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  padding: 2px 8px;\n  box-sizing: border-box;\n  line-height: 1.67;\n  font-size: 12px;\n  max-width: 90%;\n  overflow-wrap: break-word;\n  z-index: 130;\n}\n.notes-panel__separator {\n  height: 20px;\n  width: 1px;\n  margin: 0 12px;\n  background-color: rgba(205, 204, 215, 1);\n  background-color: var(--indigo400);\n}\n@media only screen and (max-device-width: 767px) {\n  .notes-panel__separator {\n    margin: 0 10px;\n  }\n}\n.notes-panel--header {\n  margin: 0 24px;\n  box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: 0 0 auto;\n      flex: 0 0 auto;\n  -ms-flex-align: center;\n      align-items: center;\n  height: 64px;\n  background: rgba(255, 255, 255, 1);\n  background: var(--white);\n  z-index: 111;\n}\n.notes-panel--header.mobile-app {\n  margin: env(safe-area-inset-top) 24px 0;\n}\n.notes-panel--header__export-button {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  width: 32px;\n  cursor: pointer;\n  position: relative;\n}\n.notes-panel--header__export-button:hover {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.notes-panel--header__export-button svg {\n  width: 24px;\n  height: 24px;\n}\n.notes-panel--header__export-menu {\n  position: absolute;\n  width: 260px;\n  top: 44px;\n  left: -12px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  padding: 20px 24px 24px 24px;\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  box-shadow: 0px\n4px\n16px\nrgba(5, 0, 56, 0.12);\n  box-shadow: var(--shadowLevel1);\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  box-sizing: border-box;\n  z-index: 100;\n}\n.notes-panel--header__export-menu--item {\n  line-height: 2.5;\n  font-size: 16px;\n  width: 100%;\n  color: rgba(9, 9, 9, 1);\n  color: var(--black);\n}\n.notes-panel--header__export-menu--item:hover {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.notes-panel--header__title {\n  font-family: Formular, sans-serif;\n  font-size: 24px;\n  font-weight: 500;\n  line-height: 24px;\n  margin-left: 16px;\n  position: relative;\n}\n.notes-panel--header__title--mobileApp {\n  margin-left: 0;\n}\n.notes-panel--header .undo-redo {\n  width: auto;\n  margin-left: 8px;\n  display: -ms-flexbox;\n  display: flex;\n}\n.notes-panel--header .undo-redo .svg-button {\n  width: 32px;\n}\n.notes-panel--header .undo-redo--mobileApp {\n  margin-left: 0;\n}\n.notes-panel--header .user-icons-row__item {\n  width: 20px;\n  height: 20px;\n}\n.notes-panel--header .user-icons-row__item img {\n  width: 100%;\n  height: 100%;\n  min-width: 100%;\n  min-height: 100%;\n}\n.notes-panel--header__export-sign-trigger {\n  position: absolute;\n  width: 260px;\n  top: 44px;\n  left: -12px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  padding: 20px 24px 24px 24px;\n  border-radius: 8px;\n  border-radius: var(--radiusL);\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  box-sizing: border-box;\n  z-index: 100;\n  cursor: default;\n}\n.notes-panel--header__export-sign-trigger--item {\n  line-height: 2.5;\n  font-size: 16px;\n  width: 100%;\n  color: rgba(9, 9, 9, 1);\n  color: var(--black);\n}\n.notes-panel__button {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  box-sizing: border-box;\n  transition: all 0.3s;\n}\n.notes-panel__button svg {\n  width: 24px;\n  height: 24px;\n}\n.notes-panel__button--deactivated {\n  opacity: 0.5;\n}\n.notes-panel__button svg {\n  color: rgba(9, 9, 9, 1);\n  color: var(--black);\n  opacity: 0.8;\n}\n.notes-panel__button:hover svg {\n  opacity: 1;\n}\n.notes-panel__button .icon {\n  float: left;\n  display: inline-block;\n  padding: 8px 0 0 2px;\n}\n.notes-panel__button--active svg {\n  opacity: 1;\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.notes-panel--header__right-container {\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row-reverse;\n      flex-direction: row-reverse;\n  -ms-flex-align: center;\n      align-items: center;\n  min-height: 0;\n  min-width: 0;\n}\n.notes-panel--header__button {\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  -ms-flex: none;\n      flex: none;\n}\n.notes-panel--header__button:hover {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.notes-panel_expanded {\n  width: 100%;\n  max-width: none;\n  height: 100%;\n  top: 0;\n  right: 0;\n  border-radius: 0;\n}\n.notes-panel--header_expanded {\n  left: calc(50% - 348px);\n}\n.disconnect-button {\n  line-height: 24px;\n  color: #a426ff;\n  font-weight: bold;\n  cursor: pointer;\n  margin-right: 12px;\n}\n",""])},7675:function(t,e,n){var o=n(7676);"string"===typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(178)(o,i);o.locals&&(t.exports=o.locals)},7676:function(t,e,n){var o=n(229);(t.exports=n(177)(!1)).push([t.i,"@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.miro-notes--editor-locked {\n  pointer-events: none;\n}\n.miro-notes--editor-container {\n  display: -ms-flexbox;\n  display: flex;\n  overflow: hidden;\n  min-width: 0;\n  min-height: 0;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n}\n.miro-notes--editor {\n  box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  word-wrap: break-word;\n  font-size: 14px;\n}\n.miro-notes--editor .ql-editor {\n  position: absolute;\n  width: 100%;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  outline: none;\n  -o-tab-size: 4;\n     tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  box-sizing: border-box;\n  height: 100%;\n  overflow-y: auto;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  white-space: pre-wrap;\n  font-size: inherit;\n  min-width: 480px;\n  padding-bottom: 84px !important;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n  transform-origin: left top;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-editor {\n    min-width: 320px;\n    font-size: 16px;\n    white-space: normal;\n    word-break: break-word;\n  }\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.miro-notes--editor .ql-editor::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.miro-notes--editor .export-instance {\n  position: relative;\n  max-width: none !important;\n  padding: 0;\n  font-family: OpenSans, Arial, Helvetica, sans-serif;\n}\n.miro-notes--editor .export-instance img {\n  opacity: 1 !important;\n}\n.miro-notes--editor .ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.miro-notes--editor .ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.miro-notes--editor .ql-editor > * {\n  position: relative;\n  cursor: text;\n}\n.miro-notes--editor p,\n.miro-notes--editor li,\n.miro-notes--editor pre,\n.miro-notes--editor h1,\n.miro-notes--editor h2,\n.miro-notes--editor .ql-editor > div {\n  position: relative;\n}\n.miro-notes--editor p:after,\n.miro-notes--editor li:after,\n.miro-notes--editor pre:after,\n.miro-notes--editor h1:after,\n.miro-notes--editor h2:after,\n.miro-notes--editor .ql-editor > div:after {\n  content: '';\n  position: absolute;\n  height: 100%;\n  top: 0;\n  width: 64px;\n  right: -64px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor p:after,\n  .miro-notes--editor li:after,\n  .miro-notes--editor pre:after,\n  .miro-notes--editor h1:after,\n  .miro-notes--editor h2:after,\n  .miro-notes--editor .ql-editor > div:after {\n    width: 44px;\n    right: -44px;\n  }\n}\n.miro-notes--editor p,\n.miro-notes--editor ol,\n.miro-notes--editor ul,\n.miro-notes--editor pre,\n.miro-notes--editor h1,\n.miro-notes--editor h2 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor p,\n.miro-notes--editor ol,\n.miro-notes--editor ul,\n.miro-notes--editor pre {\n  line-height: 1.7;\n}\n.miro-notes--editor img {\n  border: 4px solid transparent;\n  -webkit-user-select: auto !important;\n     -moz-user-select: auto !important;\n      -ms-user-select: auto !important;\n          user-select: auto !important;\n  box-sizing: border-box;\n  vertical-align: middle;\n  transition: opacity 0.5s;\n}\n.miro-notes--editor h1 {\n  font-size: 2.286em;\n  font-weight: normal;\n  line-height: 1.25;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h2 {\n  font-size: 1.715em;\n  font-weight: normal;\n  line-height: 1.33;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h3,\n.miro-notes--editor h4,\n.miro-notes--editor h5,\n.miro-notes--editor h6 {\n  font-size: 1.428em;\n  font-weight: normal;\n  line-height: 2;\n  margin: 0;\n  padding: 16px 0 8px 0;\n}\n.miro-notes--editor h1:first-child,\n.miro-notes--editor h2:first-child,\n.miro-notes--editor h3:first-child,\n.miro-notes--editor h4:first-child,\n.miro-notes--editor h5:first-child,\n.miro-notes--editor h6:first-child {\n  padding-top: 0;\n}\n.miro-notes--editor h1 > *[class*='updated-comm-']:before,\n.miro-notes--editor h2 > *[class*='updated-comm-']:before,\n.miro-notes--editor h3 > *[class*='updated-comm-']:before,\n.miro-notes--editor h4 > *[class*='updated-comm-']:before,\n.miro-notes--editor h5 > *[class*='updated-comm-']:before,\n.miro-notes--editor h6 > *[class*='updated-comm-']:before {\n  padding: 16px 0 8px 0 !important;\n}\n.miro-notes--editor h1:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h2:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h3:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h4:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h5:first-child > *[class*='updated-comm-']:before,\n.miro-notes--editor h6:first-child > *[class*='updated-comm-']:before {\n  padding-top: 0 !important;\n}\n.miro-notes--editor code {\n  background-color: rgba(240, 240, 243, 1);\n  background-color: var(--indigo100);\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  box-sizing: border-box;\n  border: 1px solid rgba(205, 204, 215, 1) !important;\n  border: 1px solid var(--indigo400) !important;\n  padding: 0px 4px 2px 4px;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) h1.empty-line:before {\n  content: 'Heading 1';\n  position: absolute;\n  opacity: 0.2;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) h2.empty-line:before {\n  content: 'Heading 2';\n  position: absolute;\n  color: rgba(155, 153, 175, 1);\n  color: var(--indigo500);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) li.empty-line:before {\n  content: 'List';\n  position: absolute;\n  color: rgba(155, 153, 175, 1);\n  color: var(--indigo500);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-editor:not(.in-composition) li[data-list='checked'].empty-line:before,\n.miro-notes--editor .ql-editor:not(.in-composition) li[data-list='unchecked'].empty-line:before {\n  content: 'To-do';\n}\n.miro-notes--editor .ql-editor .ql-ui {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  left: 0;\n  top: 0;\n  padding: inherit;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.miro-notes--editor .ql-editor .ql-ui .ql-list-ui {\n  position: absolute;\n}\n.miro-notes--editor .ql-editor:not(.ql-disabled) li[data-list='checked'] .ql-ui .ql-list-ui,\n.miro-notes--editor .ql-editor:not(.ql-disabled) li[data-list='unchecked'] .ql-ui .ql-list-ui {\n  cursor: pointer;\n}\n.miro-notes--editor .ql-editor li {\n  list-style-type: none;\n  padding-left: 28px;\n  position: relative;\n}\n.miro-notes--editor .ql-editor li.ql-direction-rtl {\n  padding-left: 0px;\n  padding-right: 28px;\n}\n.miro-notes--editor .ql-editor li .ql-ui .ql-list-ui:before {\n  pointer-events: auto;\n  position: absolute;\n  display: inline-block;\n  white-space: nowrap;\n  vertical-align: top;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  margin-left: -28px;\n}\n.miro-notes--editor .ql-editor li.ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin-left: 0;\n  margin-right: -28px;\n}\n.miro-notes--editor .ql-editor li[data-list='checked'] .ql-ui .ql-list-ui:before,\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:before {\n  width: 16px;\n  height: 16px;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  -ms-flex: 0 0 auto;\n      flex: 0 0 auto;\n}\n.miro-notes--editor .ql-editor li[data-list='bullet'] .ql-ui .ql-list-ui:before {\n  content: url("+o(n(4479))+");\n}\n.miro-notes--editor .ql-editor li[data-list='checked'] .ql-ui .ql-list-ui:before {\n  content: url("+o(n(4480))+");\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n}\n.miro-notes--editor .ql-editor li[data-list='checked'].ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin-left: 4px;\n  margin-right: -28px;\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:before {\n  content: '';\n  width: 16px;\n  height: 16px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  margin: 4px 8px 4px -24px;\n  border: 1px solid rgba(205, 204, 215, 1);\n  border: 1px solid var(--indigo400);\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'].ql-direction-rtl .ql-ui .ql-list-ui:before {\n  margin: 4px -24px 4px 8px;\n}\n.miro-notes--editor .ql-editor li[data-list='unchecked'] .ql-ui .ql-list-ui:hover::before {\n  border-color: rgba(66, 98, 255, 1);\n  border-color: var(--blue700);\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'] {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'] .ql-ui .ql-list-ui:before {\n  content: counter(list-0, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 {\n  counter-increment: list-1;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 .ql-ui .ql-list-ui:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 {\n  counter-increment: list-2;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 .ql-ui .ql-list-ui:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 {\n  counter-increment: list-3;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 .ql-ui .ql-list-ui:before {\n  content: counter(list-3, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 {\n  counter-increment: list-4;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 .ql-ui .ql-list-ui:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 {\n  counter-increment: list-5;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 .ql-ui .ql-list-ui:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 {\n  counter-increment: list-6;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 .ql-ui .ql-list-ui:before {\n  content: counter(list-6, decimal) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 {\n  counter-increment: list-7;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 .ql-ui .ql-list-ui:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 {\n  counter-increment: list-8;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 .ql-ui .ql-list-ui:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-8 {\n  counter-reset: list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-9 {\n  counter-increment: list-9;\n}\n.miro-notes--editor .ql-editor li[data-list='ordered'].ql-indent-9 .ql-ui .ql-list-ui:before {\n  content: counter(list-9, decimal) '. ';\n}\n.miro-notes--editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 40px;\n}\n.miro-notes--editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 52px;\n}\n.miro-notes--editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 40px;\n}\n.miro-notes--editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 52px;\n}\n.miro-notes--editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 64px;\n}\n.miro-notes--editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 76px;\n}\n.miro-notes--editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 64px;\n}\n.miro-notes--editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 76px;\n}\n.miro-notes--editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 88px;\n}\n.miro-notes--editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 100px;\n}\n.miro-notes--editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 88px;\n}\n.miro-notes--editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 100px;\n}\n.miro-notes--editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 112px;\n}\n.miro-notes--editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 124px;\n}\n.miro-notes--editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 112px;\n}\n.miro-notes--editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 124px;\n}\n.miro-notes--editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 136px;\n}\n.miro-notes--editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 148px;\n}\n.miro-notes--editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 136px;\n}\n.miro-notes--editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 148px;\n}\n.miro-notes--editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 160px;\n}\n.miro-notes--editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 172px;\n}\n.miro-notes--editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 160px;\n}\n.miro-notes--editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 172px;\n}\n.miro-notes--editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 184px;\n}\n.miro-notes--editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 196px;\n}\n.miro-notes--editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 184px;\n}\n.miro-notes--editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 196px;\n}\n.miro-notes--editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 208px;\n}\n.miro-notes--editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 220px;\n}\n.miro-notes--editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 208px;\n}\n.miro-notes--editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 220px;\n}\n.miro-notes--editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 232px;\n}\n.miro-notes--editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 244px;\n}\n.miro-notes--editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 232px;\n}\n.miro-notes--editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 244px;\n}\n.miro-notes--editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.miro-notes--editor .ql-align-right {\n  text-align: right;\n}\n.miro-notes--editor .ql-toolbar {\n  max-height: 40px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n  background-color: rgba(0, 0, 0, 0.92);\n  display: -ms-flexbox;\n  display: flex;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-toolbar {\n    display: none;\n  }\n}\n.miro-notes--editor .ql-toolbar:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.miro-notes--editor .ql-formats {\n  display: inline-block;\n  vertical-align: middle;\n  padding: 0 8px;\n  box-sizing: border-box;\n  border-right: 1px solid rgba(255, 255, 255, 0.2);\n  border-right: 1px solid var(--whiteAlpha20);\n}\n.miro-notes--editor .ql-formats:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.miro-notes--editor .ql-toolbar .ql-formats:first-child {\n  padding-left: 12px;\n}\n.miro-notes--editor .ql-toolbar .ql-formats:last-child {\n  padding-right: 12px;\n  border-right: none;\n}\n.miro-notes--editor .ql-toolbar button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: -ms-flexbox;\n  display: flex;\n  float: left;\n  height: 100%;\n  padding: 8px 0;\n  width: 24px;\n  margin-right: 8px;\n  color: #8f8f8f;\n}\n.miro-notes--editor .ql-toolbar button svg {\n  pointer-events: none;\n}\n.miro-notes--editor .ql-formats button:last-child {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-toolbar button:hover,\n.miro-notes--editor .ql-toolbar button:focus,\n.miro-notes--editor .ql-toolbar button.ql-active,\n.miro-notes--editor .ql-toolbar .ql-picker-label:hover,\n.miro-notes--editor .ql-toolbar .ql-picker-label.ql-active,\n.miro-notes--editor .ql-toolbar .ql-picker-item:hover,\n.miro-notes--editor .ql-toolbar .ql-picker-item.ql-selected {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n}\n.miro-notes--editor .ql-picker {\n  color: #8f8f8f;\n  display: inline-block;\n  float: left;\n  font-size: 14px;\n  height: 100%;\n  margin-right: 8px;\n  position: relative;\n  vertical-align: middle;\n}\n.miro-notes--editor .ql-picker-label {\n  cursor: pointer;\n  display: inline-block;\n  height: 100%;\n  position: relative;\n  outline: none;\n  padding: 8px 0;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-picker-label svg {\n  pointer-events: none;\n}\n.miro-notes--editor .ql-formats .ql-picker:last-of-type {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-picker-options {\n  background-color: #000000;\n  width: 144px;\n  box-sizing: border-box;\n  display: none;\n  padding: 8px;\n  padding-right: 4px;\n  position: absolute;\n  white-space: nowrap;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  outline: none;\n  max-height: 238px;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: rgba(95, 92, 128, 1) transparent;\n  scrollbar-color: var(--indigo600) transparent;\n  scrollbar-width: thin;\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar-thumb {\n  background-color: rgba(95, 92, 128, 1);\n  background-color: var(--indigo600);\n  border: 0 solid transparent;\n  border-radius: 2px;\n  border-radius: var(--radiusS);\n}\n.miro-notes--editor .ql-picker-options::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.miro-notes--editor .ql-picker.ql-expanded .ql-picker-options {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin-top: 4px;\n  top: 100%;\n  left: -60px;\n  z-index: 1;\n}\n.miro-notes--editor .ql-picker.ql-expanded .ql-picker-label {\n  z-index: 3;\n}\n.miro-notes--editor .ql-picker-item {\n  width: 20px;\n  height: 20px;\n  border-radius: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.16);\n  float: left;\n  margin: 6px;\n  box-sizing: border-box;\n  outline: none;\n  cursor: pointer;\n}\n.miro-notes--editor .ql-picker-item[data-value=''] {\n  border: none;\n  margin: 4px;\n  width: 24px;\n  height: 24px;\n}\n.miro-notes--editor .ql-background .ql-picker-item[data-value='#ffffff'] {\n  display: none;\n}\n.miro-notes--editor .ql-picker-item[data-value='']:after {\n  content: url("+o(n(4481))+");\n  opacity: 0.8;\n  width: 24px;\n  height: 24px;\n  display: block;\n}\n.miro-notes--editor .ql-tooltip.ql-editing .ql-tooltip-editor {\n  display: block;\n}\n.miro-notes--editor .ql-tooltip-editor {\n  display: none;\n}\n.miro-notes--editor .ql-tooltip-editor input[type='text'] {\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  opacity: 0.92;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  border: none;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  line-height: 20px;\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 360px;\n  height: 48px;\n  outline: none;\n  padding: 14px 16px;\n  position: absolute;\n  top: 44px;\n  z-index: 1;\n}\n.miro-notes--editor .ql-tooltip-editor a {\n  top: 10px;\n  position: absolute;\n  right: 20px;\n}\n.miro-notes--editor .ql-tooltip-editor a:before {\n  color: #ccc;\n  content: '\\D7';\n  font-size: 16px;\n  font-weight: bold;\n}\n.miro-notes--editor .ql-editor:not(.ql-disabled) a {\n  text-decoration: underline;\n}\n.miro-notes--editor .ql-link-editor {\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  height: 48px;\n  opacity: 0.92;\n  box-sizing: border-box;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  line-height: 24px;\n  padding: 12px 16px;\n  white-space: nowrap;\n  display: -ms-flexbox;\n  display: flex;\n}\n.miro-notes--editor .ql-link-editor input[type='text'] {\n  display: none;\n  font-size: 14px;\n  height: 24px;\n  margin: 0;\n  padding: 0;\n  width: 241px;\n}\n.miro-notes--editor .ql-link-editor a.ql-preview {\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  display: inline-block;\n  max-width: 200px;\n  text-decoration: underline;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  vertical-align: top;\n}\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-preview,\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-remove {\n  display: none;\n}\n.miro-notes--editor .ql-link-editor.ql-editing input[type='text'] {\n  display: inline-block;\n}\n.miro-notes--editor .ql-link-editor a.ql-action::after {\n  display: block;\n  height: 24px;\n  border-right: 1px solid rgba(5, 0, 56, 1);\n  border-right: 1px solid var(--indigo700);\n  content: url("+o(n(4482))+");\n  opacity: 0.8;\n  margin-left: 8px;\n  padding-right: 8px;\n}\n.miro-notes--editor .ql-link-editor a.ql-remove::before {\n  display: block;\n  height: 24px;\n  content: url("+o(n(2936))+");\n  opacity: 0.8;\n  margin-left: 8px;\n}\n.miro-notes--editor .ql-link-editor a {\n  display: block;\n  line-height: 24px;\n}\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-action::after {\n  display: block;\n  height: 24px;\n  border-right: 0;\n  content: url("+o(n(4483))+");\n  opacity: 0.8;\n  padding-right: 0;\n}\n.miro-notes--editor a.ql-action:hover::after,\n.miro-notes--editor a.ql-remove:hover::before,\n.miro-notes--editor .ql-link-editor.ql-editing a.ql-action:hover::after {\n  opacity: 1;\n}\n.miro-notes--editor .ql-close,\n.miro-notes--editor .ql-tooltip-arrow {\n  display: none;\n}\n.miro-notes--editor .ql-formatpicker {\n  width: auto !important;\n  display: -ms-flexbox !important;\n  display: flex !important;\n  min-width: 0;\n  font-family: Formular;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 24px;\n  transition: opacity 0.1s;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.miro-notes--editor .ql-bui {\n  width: 24px;\n  height: 24px;\n  box-sizing: border-box;\n  outline: none;\n  cursor: pointer;\n}\n.miro-notes--editor .new-line-picker-placeholder {\n  position: absolute;\n  color: #a5a3b7;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  pointer-events: none;\n}\n.miro-notes--editor .new-line-picker-placeholder-text {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.7;\n}\n.miro-notes--editor .ql-format-picker-plus {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  left: -40px;\n  top: 50%;\n  transform: translateY(-50%);\n  box-sizing: border-box;\n  display: none;\n  color: rgba(205, 204, 215, 1);\n  color: var(--indigo400);\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  cursor: pointer;\n  pointer-events: auto;\n  transition: opacity 0.2s;\n}\n.miro-notes--editor .ql-format-picker-plus:hover {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.miro-notes--editor .new-line-picker-placeholder .ql-format-picker-plus {\n  display: -ms-flexbox;\n  display: flex;\n}\n.miro-notes--editor .ql-format-picker {\n  position: absolute;\n  background: rgba(9, 9, 9, 1);\n  background: var(--black);\n  opacity: 0.92;\n  box-sizing: border-box;\n  padding: 0 12px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  z-index: 8;\n}\n.miro-notes--editor .ql-format-picker-row {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.miro-notes--editor .ql-format-picker__group {\n  width: 100%;\n  padding: 12px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  border-bottom: 1px solid var(--whiteAlpha20);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: inherit;\n      flex-direction: inherit;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-format-picker__group-bui {\n  padding: 0;\n}\n.miro-notes--editor .ql-format-picker__group:last-child {\n  border-bottom: none;\n}\n.miro-notes--editor .ql-format-picker-button {\n  height: 24px;\n  display: -ms-flexbox;\n  display: flex;\n  font-family: Formular;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 24px;\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n  opacity: 0.56;\n  cursor: pointer;\n}\n.miro-notes--editor .ql-format-picker-button-picker {\n  padding-bottom: 8px;\n}\n.miro-notes--editor .ql-format-picker-button:last-child {\n  padding-bottom: 0;\n}\n.miro-notes--editor .ql-format-picker-button_icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n  -ms-flex: none;\n      flex: none;\n  min-width: 0;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-format-picker-button-bui {\n  padding: 8px 0;\n}\n.miro-notes--editor .ql-format-picker-button-bui:last-child .ql-format-picker-button_icon {\n  margin-right: 0;\n}\n.miro-notes--editor .ql-format-picker-button_text {\n  min-width: 0;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-format-picker-button:hover,\n.miro-notes--editor .ql-format-picker-button-selected,\n.miro-notes--editor .ql-format-picker-current {\n  opacity: 1;\n}\n.miro-notes--editor .ql-picker-hidden {\n  display: none !important;\n}\n.miro-notes--editor .ql-hidden {\n  display: none !important;\n}\n.miro-notes--editor .ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.miro-notes--editor .ql-tooltip {\n  position: absolute;\n  transform: translateY(0);\n  z-index: 15;\n}\n.miro-notes--editor .ql-cursor.hidden {\n  display: none;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container,\n.miro-notes--editor .ql-cursor .ql-cursor-flag {\n  position: absolute;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag {\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  z-index: 5;\n  transform: translateX(-1px);\n  opacity: 0;\n  visibility: hidden;\n  color: white;\n  font-size: 12px;\n  line-height: 20px;\n  box-sizing: border-box;\n  padding: 2px 6px;\n  transition-property: opacity, visibility;\n  pointer-events: none;\n  @include transition((opacity, visibility));\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag .ql-cursor-name {\n  display: inline-block;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-flag:hover,\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container:hover + .ql-cursor-flag {\n  opacity: 0.9;\n  visibility: visible;\n  transition: none;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container {\n  z-index: 5;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-caret-container .ql-cursor-caret {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  margin-left: -1px;\n}\n.miro-notes--editor .ql-cursor .ql-cursor-selection-block {\n  position: absolute;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-mention {\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-authorship-block-extension {\n  position: absolute;\n  direction: ltr;\n  padding: inherit;\n  top: 0;\n  height: 100%;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  display: -ms-flexbox;\n  display: flex;\n  pointer-events: none !important;\n  -ms-flex-pack: end;\n      justify-content: flex-end;\n  left: -64px;\n  width: 64px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-authorship-block-extension {\n    left: -72px;\n  }\n}\n.miro-notes--editor .ql-authorship-disabled .ql-authorship-block-extension {\n  display: none;\n}\n.miro-notes--editor .ql-authorship-disabled *[class*='author-'] {\n  border-bottom: none !important;\n}\n.miro-notes--editor .ql-author-caption {\n  pointer-events: auto;\n  font-weight: 500;\n  height: 24px;\n  letter-spacing: 0.5px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  cursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-size: 10px;\n  margin-right: 20px;\n  white-space: nowrap;\n}\n.miro-notes--editor .ql-author-caption--touch-device {\n  margin-right: 5px;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor .ql-author-caption--touch-device {\n    font-size: 16px;\n    margin-right: -5px;\n    padding-right: 10px;\n    padding-left: 10px;\n  }\n}\n.miro-notes--editor .ql-user-info-badge-visible {\n  display: -ms-flexbox !important;\n  display: flex !important;\n}\n.miro-notes--editor .ql-user-info-badge {\n  position: absolute;\n  padding: 14px 16px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  top: 0;\n  left: 0;\n  display: none;\n  min-width: 0;\n  min-height: 0;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.12);\n  border-radius: 6px;\n  width: 280px;\n  height: 60px;\n  box-sizing: border-box;\n  z-index: 100;\n}\n.miro-notes--editor .ql-user-info-badge-photo {\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n  width: 32px;\n  height: 32px;\n  margin-right: 12px;\n}\n.miro-notes--editor .ql-user-info-badge-info {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  min-width: 0;\n  min-height: 0;\n  font-size: 14px;\n  line-height: 1.14;\n  -ms-flex-pack: center;\n      justify-content: center;\n}\n.miro-notes--editor .ql-user-info-badge-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 1px;\n}\n.miro-notes--editor .ql-user-info-badge-email {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0.4;\n}\n.miro-notes--editor .ql-drag-button {\n  position: absolute;\n  background: url("+o(n(4484))+");\n  width: 16px;\n  height: 16px;\n  transition: opacity 0.2s;\n  cursor: pointer;\n  opacity: 0;\n  left: -16px;\n  top: 3px;\n  pointer-events: auto;\n}\n.miro-notes--editor .ql-drag-button:hover {\n  opacity: 1 !important;\n}\n.miro-notes--editor .ql-editor li:hover .ql-drag-button {\n  opacity: 0.25;\n}\n.miro-notes--editor .ql-comments {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-comment-highlight {\n  position: absolute;\n  pointer-events: none;\n}\n.miro-notes--editor .ql-comment-line {\n  background-color: #4261ff;\n  position: absolute;\n  opacity: 0.3;\n}\n.miro-notes--editor .ql-open-comment {\n  background-color: #4261ff;\n  opacity: 0.2;\n  position: absolute;\n}\n.miro-notes--editor .ql-add-comment-button {\n  position: absolute;\n  background: url("+o(n(4485))+");\n  width: 24px;\n  height: 24px;\n  transition: opacity 0.2s;\n  display: none;\n  cursor: pointer;\n  z-index: 1;\n  opacity: 0.25;\n  right: 40px;\n}\n.miro-notes--editor .ql-add-comment-button:hover {\n  opacity: 1;\n}\n.miro-notes--editor .ql-add-comment-show {\n  display: block;\n}\n.miro-notes--editor *[data-comments-length='1'] {\n  background-color: rgba(66, 97, 255, 0.16);\n  border-top: 1px solid rgba(66, 97, 255, 0.16);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.16);\n}\n.miro-notes--editor *[data-comments-length='2'] {\n  background-color: rgba(66, 97, 255, 0.24);\n  border-top: 1px solid rgba(66, 97, 255, 0.24);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.24);\n}\n.miro-notes--editor *[data-comments-length='3'] {\n  background-color: rgba(66, 97, 255, 0.32);\n  border-top: 1px solid rgba(66, 97, 255, 0.32);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.32);\n}\n.miro-notes--editor *[data-comments-length='4'] {\n  background-color: rgba(66, 97, 255, 0.4);\n  border-top: 1px solid rgba(66, 97, 255, 0.4);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.4);\n}\n.miro-notes--editor *[data-comments-length='5'] {\n  background-color: rgba(66, 97, 255, 0.48);\n  border-top: 1px solid rgba(66, 97, 255, 0.48);\n  border-bottom: 1px solid rgba(66, 97, 255, 0.48);\n}\n.miro-notes--editor img[data-comments-length='1'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.16);\n}\n.miro-notes--editor img[data-comments-length='2'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.24);\n}\n.miro-notes--editor img[data-comments-length='3'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.32);\n}\n.miro-notes--editor img[data-comments-length='4'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.4);\n}\n.miro-notes--editor img[data-comments-length='5'] {\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 4px solid rgba(66, 97, 255, 0.48);\n}\n.miro-notes--editor [class*='comment-'] {\n  background-clip: content-box;\n}\n.miro-notes--editor [class*='updated-comm-']:before {\n  content: url("+o(n(4486))+");\n  position: absolute;\n  top: 0;\n  line-height: 24px;\n  width: 24px;\n  height: 24px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  cursor: pointer;\n  z-index: 1;\n  right: -48px;\n}\n@media only screen and (max-device-width: 767px) {\n  .miro-notes--editor [class*='updated-comm-']:before {\n    right: -32px;\n  }\n}\n.miro-notes--editor .ql-mobile-comment-button {\n  position: absolute;\n  display: block;\n  left: 0px;\n  width: 44px;\n  height: 24px;\n  margin-top: -1px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  background-repeat: no-repeat;\n  background-position: 5px center;\n  background-clip: unset;\n}\n.miro-notes--editor .ql-mobile-comment-button--hidden {\n  display: none;\n}\n.miro-notes--editor .ql-mobile-comment-button--add {\n  background-image: url("+o(n(4487))+");\n}\n.miro-notes--editor .ql-mobile-comment-button--open {\n  background-image: url("+o(n(4488))+");\n}\n.miro-notes--editor .ql-custom-object,\n.miro-notes--editor .ql-image {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  box-sizing: border-box;\n  margin: 12px 0;\n  cursor: default;\n  outline: 1px solid transparent;\n  transition: border 0.5s;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  color: rgba(9, 9, 9, 1);\n  color: var(--black);\n}\n.miro-notes--editor .ql-embed-object-placeholder {\n  outline: 1px solid rgba(66, 98, 255, 1);\n  outline: 1px solid var(--blue700);\n}\n.miro-notes--editor .ql-drop-line {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 2px;\n  border-radius: 4px;\n  border-radius: var(--radiusM);\n  background-color: rgba(66, 98, 255, 1);\n  background-color: var(--blue700);\n  pointer-events: none;\n}\n.miro-notes--editor .ql-embed-selected {\n  position: absolute;\n  border: 1px solid rgba(66, 98, 255, 1);\n  border: 1px solid var(--blue700);\n  pointer-events: none;\n  box-sizing: border-box;\n}\n.miro-notes--editor .ql-embed-selected * {\n  pointer-events: auto;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-box {\n  position: absolute;\n  bottom: -5px;\n  right: -5px;\n  cursor: nwse-resize;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-box--touch-device {\n  bottom: -20px;\n  right: -20px;\n  padding: 15px;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-resize-square {\n  width: 7px;\n  height: 7px;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: var(--white);\n  border: 1px solid rgba(66, 98, 255, 1);\n  border: 1px solid var(--blue700);\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu {\n  position: absolute;\n  top: -48px;\n  left: -1px;\n  padding: 4px;\n  border-radius: 6px;\n  background-color: rgba(9, 9, 9, 1);\n  background-color: var(--black);\n  box-shadow: 0 8px 16px 0 rgba(5, 0, 56, 0.08);\n  white-space: nowrap;\n  opacity: 0.92;\n  z-index: 15;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button {\n  width: 24px;\n  height: 24px;\n  margin: 4px;\n  opacity: 0.5;\n  padding: 0;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--move-to-widget {\n  background: url("+o(n(4489))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--refresh {\n  background: url("+o(n(4490))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--refresh-spin {\n  animation: spinner 0.75s linear infinite;\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--delete {\n  background: url("+o(n(2936))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button--comment {\n  background: url("+o(n(4491))+");\n}\n.miro-notes--editor .ql-embed-selected .ql-embed-actions-menu__button:hover {\n  opacity: 1;\n}\n",""])},7677:function(t,e,n){t.exports='<div class="notes-panel" ng-class="{\'notes-panel_expanded\': expanded}">\n\t<div\n\t\tclass="notes-panel--header"\n\t\tng-class="{\'notes-panel--header_expanded\': expanded, \'mobile-app\': isMobileApp}"\n\t\tng-show="ctrl.uiVisible"\n\t>\n\t\t<notes-pin ng-if="!isMobileApp"></notes-pin>\n\n\t\t<div class="notes-panel--header__title" ng-class="{\'notes-panel--header__title--mobileApp\': isMobileApp}">\n\t\t\tNote\n\t\t</div>\n\n\t\t<div class="notes-panel__separator"></div>\n\t\t\x3c!-- TODO: if undo || redo || export enabled --\x3e\n\n\t\t<div\n\t\t\tclass="notes-panel--header__export-button"\n\t\t\tng-if="ctrl.isExportAvailable"\n\t\t\tng-class="{\'notes-panel__button--active\': exportMenuVisibility}"\n\t\t>\n\t\t\t<svg    hm-tap="ctrl.toggleExportMenu()"  role="none" ><use xlink:href="'+n(7678)+'"></use></svg>\n\t\t\t<div class="notes-panel--header__export-menu" ng-if="exportMenuVisibility && !ctrl.shouldShowSignUp">\n\t\t\t\t<div class="notes-panel--header__export-menu--item" hm-tap="ctrl.copyLink()">Copy link</div>\n\t\t\t\t<div class="notes-panel--header__export-menu--item" hm-tap="ctrl.exportNote(\'pdf\')">Export as PDF</div>\n\t\t\t\t<div class="notes-panel--header__export-menu--item" hm-tap="ctrl.exportNote(\'docx\')">Export as DOCX</div>\n\t\t\t</div>\n\t\t\t<div class="notes-panel--header__export-sign-trigger" ng-if="exportMenuVisibility && ctrl.shouldShowSignUp">\n\t\t\t\t<div class="notes-panel--header__export-sign-trigger--item">\n\t\t\t\t\t<span class="rtb-link rtb-link--primary" hm-tap="ctrl.showSignUpPage()">Sign up</span> to export Notes\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass="undo-redo board-panel--transparent backdrop-blur board-panel--hidden-top"\n\t\t\tng-class="{\'undo-redo--mobileApp\': isMobileApp}"\n\t\t\tng-show="ctrl.undoEnabled || ctrl.redoEnabled"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass="svg-button"\n\t\t\t\tdata-autotest-id="notes-panel-undo"\n\t\t\t\tng-class="{\'svg-button--disabled\': !ctrl.undoEnabled}"\n\t\t\t\thm-tap="ctrl.undo()"\n\t\t\t\ttooltip="undo"\n\t\t\t\ttooltip-hotkey="%@%+Z"\n\t\t\t\ttooltip-placement="bottom"\n\t\t\t\ttooltip-append-to-body="true"\n\t\t\t>\n\t\t\t\t<svg  class="icon"    role="none" ><use xlink:href="'+n(7679)+'"></use></svg>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass="svg-button"\n\t\t\t\tdata-autotest-id="notes-panel-redo"\n\t\t\t\tng-class="{\'svg-button--disabled\': !ctrl.redoEnabled}"\n\t\t\t\thm-tap="ctrl.redo()"\n\t\t\t\ttooltip="redo"\n\t\t\t\ttooltip-hotkey="%@%+Shift+Z"\n\t\t\t\ttooltip-placement="bottom"\n\t\t\t\ttooltip-append-to-body="true"\n\t\t\t>\n\t\t\t\t<svg  class="icon"    role="none" ><use xlink:href="'+n(7680)+'"></use></svg>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="notes-panel--header__right-container">\n\t\t\t<svg  class="notes-panel--header__button margin-left"   hm-tap="ctrl.close()"  role="none" ><use xlink:href="'+n(3876)+'"></use></svg>\n\n\t\t\t<svg \n\t\t\t\tng-if="ctrl.fullscreen && !isMobileApp"\n\t\t\t\tclass="notes-panel--header__button notes-fullscreen-button"\n\t\t\t\t \n\t\t\t\thm-tap="ctrl.fullscreen = false"\n\t\t\t role="none" ><use xlink:href="'+n(3712)+'"></use></svg>\n\t\t\t<svg \n\t\t\t\tng-if="!ctrl.fullscreen && !isMobileApp"\n\t\t\t\tclass="notes-panel--header__button notes-fullscreen-button"\n\t\t\t\t \n\t\t\t\thm-tap="ctrl.fullscreen = true"\n\t\t\t role="none" ><use xlink:href="'+n(3711)+'"></use></svg>\n\n\t\t\t<div class="notes-panel__separator"></div>\n\n\t\t\t<user-icons-row\n\t\t\t\tng-show="allOnlineUsersCount"\n\t\t\t\tclass="margin-left"\n\t\t\t\tusers="onlineUsersToDisplay"\n\t\t\t\tall-users-count="allOnlineUsersCount"\n\t\t\t\tmax-visible="maxVisibleUserIcons"\n\t\t\t\tshow-more="true"\n\t\t\t\tclicked="ctrl.userClicked($user)"\n\t\t\t>\n\t\t\t</user-icons-row>\n\n\t\t\t<div\n\t\t\t\tclass="btn notes-panel__button notes-authorship-button"\n\t\t\t\tng-if="!ctrl.isIE"\n\t\t\t\tng-class="{\'notes-panel__button--active\': isAuthorshipActive}"\n\t\t\t\thm-tap="ctrl.toggleAuthorship()"\n\t\t\t\ttooltip="{{isAuthorshipActive ? \'hide\' : \'show\'}}&nbsp;authorship"\n\t\t\t\ttooltip-append-to-body="true"\n\t\t\t\ttooltip-placement="bottom"\n\t\t\t>\n\t\t\t\t<svg>\n\t\t\t\t\t<use xlink:href="'+n(7681)+'"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<div class="disconnect-button" ng-show="ctrl.allowDisconnect" hm-tap="ctrl.toggleFun()">\n\t\t\t\t{{ctrl.subscribed ? \'Disconnect\' : \'Connect\'}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<notes-comments ng-if="ctrl.isCommentsAvailable"></notes-comments>\n\n\t<div\n\t\tid="noteEditor"\n\t\tclass="miro-notes--editor-container"\n\t\tng-class="{\'miro-notes--editor-locked\' : !ctrl.uiVisible}"\n\t></div>\n\n\t<notes-templates\n\t\ton-select="ctrl.onTemplateSelect($template)"\n\t\tng-show="ctrl.noteEditorBlankState && ctrl.noteEditorMode == \'edit\' && !ctrl.isComposition"\n\t></notes-templates>\n\n\t<div id="wordCounter"></div>\n\n\t<div class="notes-notification" ng-class="{\'mobile-app\': isMobileApp}" ng-show="ctrl.notificationVisibility">\n\t\t<div class="notes-notification-message">{{ctrl.notificationMessage}}</div>\n\t</div>\n\n\t<notes-font-size ng-show="ctrl.uiVisible && ctrl.fontSizeModule"></notes-font-size>\n\n\t<div class="notes-panel__help" ng-class="{\'mobile-app\': isMobileApp}" ng-show="ctrl.uiVisible">\n\t\t<div\n\t\t\tclass="notes-panel__help-btn"\n\t\t\thm-tap="ctrl.toggleRate(true)"\n\t\t\ttooltip="How do you like Visual Notes?"\n\t\t\ttooltip-append-to-body="true"\n\t\t\ttooltip-placement="right"\n\t\t>\n\t\t\t<svg  class="svg-button"    role="none" ><use xlink:href="'+n(981)+'"></use></svg>\n\t\t</div>\n\n\t\t<div class="sep"></div>\n\n\t\t<div\n\t\t\tclass="notes-panel__help-btn"\n\t\t\thm-tap="ctrl.toggleHelp(true)"\n\t\t\ttooltip="Help and shortcuts"\n\t\t\ttooltip-append-to-body="true"\n\t\t\ttooltip-placement="right"\n\t\t>\n\t\t\t<svg  class="svg-button"    role="none" ><use xlink:href="'+n(1706)+'"></use></svg>\n\t\t</div>\n\t</div>\n\n\t<div\n\t\tclass="notes-panel__help-shade ng-hide use-ng-animate"\n\t\tng-show="(showRatePopup || showHelpPopup) && ctrl.uiVisible"\n\t\thm-tap="ctrl.toggleHelp(false); ctrl.toggleRate(false)"\n\t></div>\n\n\t<notes-help-popup\n\t\tclass="notes-panel__help-popup use-ng-animate"\n\t\tng-if="showHelpPopup && ctrl.uiVisible"\n\t\ton-close="ctrl.toggleHelp(false)"\n\t></notes-help-popup>\n\n\t<notes-rate\n\t\tclass="notes-panel__rate-popup use-ng-animate"\n\t\tng-if="showRatePopup && ctrl.uiVisible"\n\t\ton-close="ctrl.toggleRate(false)"\n\t></notes-rate>\n</div>\n'},7678:function(t,e){t.exports="#img__export"},7679:function(t,e){t.exports="#img__undo"},7680:function(t,e){t.exports="#img__redo"},7681:function(t,e){t.exports="#img__authorship"},7682:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(181),s=n(296),a=n(4237),l=n(235),d=n(3403),c=n(187),p=n(2078),u=n(4492),h=n(7683),m=n(1336),g=n(186),f=n(1883),b=n(485),v=n(2009),x=n(822),y=t.Signal,w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.log.apply(o,Object(i.j)(["notes-cmt"],t))},C=function(){function e(e){var n=this;this.commentLoaded=new t.Signal,this.commentWantsToBeDeleted=new y,this.commentCreationConfirmed=new y,this.commentMessagesUpdated=new y,this.commentProviderUpdated=new t.Signal,this.commentSource="Note",this.history=[],this._comments=[],this.connected=!1,this.connect=function(){n.connected=!0,n.model=r.adaptBoardToModel(a.a),n.model.setListener(n),n.threadModel=r.adaptBoardToModel(d.a),n.threadModel.setListener(n),n.model.subscribe()},this.disconnect=function(){n.connected&&(n.connected=!1,n.model.unsubscribe(),n.model=void 0,n.threadModel=void 0,n._comments.forEach((function(t){t.destroy()})),n._comments=[],n.history=[])},this.module=e,Object(m.a)().registerProvider(this),r.doOnCanvasLoaded(this.connect),r.onCanvasUnloading.add(this.disconnect)}return e.prototype.moveToComment=function(t,e){var n=this;w("moveToComment",t,e),new Promise((function(t){return n.module.onPanelOpen.addOnce(t)})).then((function(){return new Promise((function(t){return n.module.panelController.noteEditor.finishNotesLoading.addOnce(t)}))})).then((function(){return r.objectsRegistry.getObjectAsync(t)})).then((function(t){return new Promise((function(e){return t.onMessagesReady.addOnce((function(){return e(t)}))}))})).then((function(t){return n.moveToCommentInternal(t,e)})).catch((function(){return Object(g.a)().show(f.a)}))},e.prototype.moveToCommentInternal=function(t,e){this.module.panelController&&(void 0!==e&&t.messages.some((function(n,o){var i=n.__tk.id==e;return i&&(t.lastReadableMessage=o),i})),this.module.panelController.noteEditor.scrollToComment(t))},e.prototype.getExistingComments=function(){return this._comments},e.prototype.create=function(t,e){var n=new u.a(r.objectsRegistry.getTokenizerById(null),new p.e(void 0,0,!1,!1),!1,this);return n.range={index:t,range:e},this.registerComment(n),n},e.prototype.registerComment=function(t){r.objectsRegistry.registerObject(t),r.presenceController.__onObjectCreated(t),this._comments.push(t),t.created&&this.commentLoaded.dispatch(t),this.dispatchProviderUpdated()},Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments},enumerable:!1,configurable:!0}),e.prototype.subscriptionConfirmed=function(){},e.prototype.subscriptionRejected=function(t){},e.prototype.created=function(t,e,n){var o=new u.a(r.objectsRegistry.getTokenizerById(t),e,!0,this);return this.registerComment(o),o},e.prototype.loaded=function(t,e,n){this.created(t,e)},e.prototype.updated=function(t,e,n){var o=r.objectsRegistry.getObjectById(t);o&&(o.color=e.state,o.resolved=e.resolved,e.message&&(o.messages[0]=E(e.message)),e.hidden)},e.prototype.createConfirmed=function(t,e,n){w("createConfirmed",n),r.objectsRegistry.updateTokenizer(t),r.objectsRegistry.updateTokenizer(e);var o=r.objectsRegistry.getObject(t);o&&(o.messages[0].id=e.id,o.objectCreated()),this.dispatchProviderUpdated(),x.a.noteCommentMessageChanged(t.id.toString(),e.id.toString(),"added",n.text.length)},e.prototype.createRejected=function(t,e,n){var o=r.objectsRegistry.getObject(r.objectsRegistry.getTokenizerByToken(t));o&&this.commentDelete(o)},e.prototype.updateConfirmed=function(t){},e.prototype.updateRejected=function(t,e){},e.prototype.createOnServer=function(t,e){var n=k(t,e);t.created=!0;var o=new p.b(e,0,!1,!1);this.model.create(t.tokenizer.token,n.token,o)},e.prototype.updateOnServer=function(t){if(t.created){var e=new p.b(void 0,t.color,t.resolved,!t.isPresent);this.model.update(t.tokenizer,e)}},e.prototype.replyCreated=function(t,e,n,o){var i=r.objectsRegistry.getObjectById(t);if(i){var s=i.messages,a=new h.a(e,n.timestampData,n.senderId,n.text,n.mentions,n.emojis);a.__tk=r.objectsRegistry.getTokenizerById(e);for(var l=s.length-1;l>=0&&"0"==s[l].__tk.id.toString();l--);var d=l+1;w("replyCreated. len",s.length,"insert",d,"all",s),s.splice(d,0,a),i.messages=s,this.dispatchProviderUpdated()}},e.prototype.replyUpdated=function(t,e,n,o){var i=r.objectsRegistry.getObjectById(t);if(i){var s=!0,a=r.objectsRegistry.getTokenizerById(e),l=new h.a(e,n.timestampData,n.senderId,n.text,n.mentions,n.emojis);l.__tk=a,this.history.some((function(t,e){if(t.tk==a){if("delete"==t.action)return!0;if(n.text&&"update"==t.action)return s=!1,t.text=n.text,!0}return!1})),s&&(i.updateMessage(l),i.messages=i.messages,this.dispatchProviderUpdated()),n.emojis&&this.history.forEach((function(t,e){if(t.tk==a&&"emoji"==t.action){var n=t.comment.messages.find((function(t){return t.__tk==a}));n&&t.comment.toggleEmoji(n,t.emoji)}}))}},e.prototype.replyDeleted=function(t,e,n){var o=this,i=r.objectsRegistry.getObjectById(t);if(i){var s=r.objectsRegistry.getTokenizerById(t);this.history.forEach((function(t,e){t.tk==s&&(o.history[e]={})}));var a=r.objectsRegistry.getTokenizerById(e);i.removeMessage(a),this.dispatchProviderUpdated()}},e.prototype.getRepliesResponse=function(t){this.history.shift(),w("getRepliesResponse",t),r.objectsRegistry.getObject(t.thread).getRepliesResponse(t)},e.prototype.createReplyResponse=function(t){var e=this,n=this.history.shift();w("createReplyResponse",n,t),t.ok?(r.objectsRegistry.updateTokenizer(t.reply),n.comment.messages.some((function(e){e.__tk==t.reply&&(e.id=t.reply.id)})),this.dispatchProviderUpdated(),x.a.noteCommentMessageChanged(t.thread.id.toString(),t.reply.id.toString(),"added",t.message.text.length)):n&&"create"==n.action?(n.comment.removeMessage(n.tk),this.history.forEach((function(t,o){t.tk==n.tk&&(e.history[o]={})}))):w("could not rollback create",n)},e.prototype.updateReplyResponse=function(t){var e=this.history.shift();if(!t.ok)if(e&&"update"==e.action){var n=!1;if(this.history.some((function(t,o){if(t.tk==e.tk){if("delete"==t.action)return n=!0,!0;if("update"==t.action)return t.text=e.text,!0}return!1}))||(n=!0),n){var o=new h.a(e.tk.token,void 0,e.text);o.__tk=e.tk,e.comment.updateMessage(o)}}else w("could not rollback update",e)},e.prototype.deleteReplyResponse=function(t){var e=this.history.shift(),n=e.comment.messages.find((function(t){return t.__tk==e.tk}));if(n)if(t.ok){var o=e.comment.messages.indexOf(n);-1!=o&&e.comment.messages.splice(o,1)}else e&&"delete"==e.action?(n.hidden=!1,e.comment.messages=e.comment.messages):w("could not rollback delete",e)},e.prototype.toggleEmojiResponse=function(t){var e=this.history.shift();if(!t.ok&&"emoji"==e.action){var n=e.comment.messages.find((function(t){return t.__tk==e.tk}));n&&e.comment.toggleEmoji(n,e.emoji)}},e.prototype.markAsReadResponse=function(t){this.history.shift()},e.prototype.markAllAsReadResponse=function(t){this.history.shift()},e.prototype.createReply=function(t,e){var n=r.objectsRegistry.getObject(t),o=k(n,e);w("createReply. tk",t,"text:",e),this.threadModel.createReply(t,o.token,e),this.history.push({action:"create",comment:n,tk:o}),this.dispatchProviderUpdated()},e.prototype.updateReply=function(t,e,n,o){n?this.threadModel.updateReply(t,e,n):this.threadModel.deleteReply(t,e),this.history.push({action:"update",comment:r.objectsRegistry.getObject(t),tk:e,text:o}),this.dispatchProviderUpdated()},e.prototype.deleteReply=function(t,e){var n=e.__tk;e.hidden=!0,this.threadModel.deleteReply(t,n),this.history.push({action:"delete",comment:r.objectsRegistry.getObject(t),tk:n,data:e}),this.dispatchProviderUpdated()},e.prototype.toggleEmoji=function(t,e,n){this.threadModel.toggleEmoji(t,e,n),this.history.push({action:"emoji",comment:r.objectsRegistry.getObject(t),tk:e,emoji:n})},e.prototype.getReplies=function(t){this.threadModel.getReplies(t),this.history.push({})},e.prototype.markAllAsRead=function(){this.comments.forEach((function(t){return t.markAsReadLocal()})),this.threadModel.markAllAsRead(),this.history.push({}),this.dispatchProviderUpdated()},e.prototype.markAsRead=function(t){t.markAsReadLocal(),t.created&&(this.threadModel.markAsRead(t.tokenizer),this.history.push({})),this.dispatchProviderUpdated()},e.prototype.dispatchProviderUpdated=function(){this.commentProviderUpdated.dispatch(this)},e.prototype.commentDelete=function(t){this.commentWantsToBeDeleted.dispatch(t)},e.prototype.commentConfirmed=function(t){this.commentCreationConfirmed.dispatch(t)},e.prototype.commentGotUpdates=function(t){this.commentMessagesUpdated.dispatch(t)},e.prototype.subscribeResponse=function(t){var e=this.comments.find((function(e){return e.tokenizer.id===t.thread.id}));e&&(e.subscriptionMode=b.c.MANUALLY_SUBSCRIBED)},e.prototype.unsubscribeResponse=function(t){var e=this.comments.find((function(e){return e.tokenizer.id===t.thread.id}));e&&(e.subscriptionMode=b.c.MANUALLY_UNSUBSCRIBED)},e.prototype.subscribeToAllResponse=function(t){this.comments.forEach((function(t){return t.subscriptionMode=b.c.MANUALLY_SUBSCRIBED}))},e.prototype.unsubscribeFromAllResponse=function(t){this.comments.forEach((function(t){return t.subscriptionMode=b.c.MANUALLY_UNSUBSCRIBED}))},e.prototype.subscribeThread=function(t,e){this.threadModel.subscribe(t),Object(v.a)("thread_follow",{thread_id:[t.id.toString()],manual_from:e,thread_location:"note",medium:"app"})},e.prototype.unsubscribeThread=function(t,e){this.threadModel.unsubscribe(t),Object(v.a)("thread_unfollow",{thread_id:[t.id.toString()],manual_from:e,thread_location:"note",medium:"app"})},e}();e.a=C;var k=function(t,e){var n=t.messages,o=Object(c.a)().myUserId;o instanceof s.a||(o=s.a.fromString("-1"));var i=r.objectsRegistry.getTokenizerById(null),a=s.a.fromString((-i.token).toString()),d=new h.a(a,l.d(),o,e);return d.__tk=i,n.push(d),t.messages=n,t.resolved=!1,t.cmtMessagesChanged.dispatch(n),i},E=function(t){var e=t;if(!e.__tk){var n=r.objectsRegistry.getTokenizerById(t.id);e.__tk=n}return e}}).call(this,n(110),n(54))},7683:function(t,e,n){"use strict";var o=n(0),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hidden=!1,e}return Object(o.d)(e,t),e}(n(203).y);e.a=i},7684:function(t,e,n){"use strict";(function(t,o){var i=n(0),r=n(4236),s=n(181),a=n(3441),l=n(712),d=n.n(l),c=n(540),p=n(1477),u=c.b(),h=d.a.import("delta"),m=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.log.apply(t,Object(i.j)(["notes"],e))},g=function(){function t(t){this.syncStateChanged=new o.Signal,this.deltaFlushedToServer=new o.Signal,this.documentId="",this.version=0,this.unconfirmed=[],this.shadow=new h,this.unsentOps=[],this.sendHelper=a.a(this.flushToServer.bind(this),800),this._isSyncing=!1,this.module=t,this.module.connection.onStateChanged.add(this.onConnectionStateChanged,this),s.onCanvasUnloading.add(this.onCanvasUnloading,this)}return t.prototype.onConnectionStateChanged=function(t){t==p.a.CONNECTING?(this.changeModel=s.adaptBoardToModel(r.a),this.changeModel.setListener(this),this.noteEditor=this.module.editor,this.noteEditor.noteContentChanged.add(this.textChanged,this),this.noteEditor.modules.cursors.cursorChanged.add(this.cursorChanged,this),this.module.connection.onDocumentReceived.add(this.onDocumentReceived,this),this.sendHelper.start()):t==p.a.DISCONNECTED&&(this.sendHelper.stop(!1),this.noteEditor.noteContentChanged.remove(this.textChanged,this),this.noteEditor.modules.cursors.cursorChanged.remove(this.cursorChanged,this),this.module.connection.onDocumentReceived.remove(this.onDocumentReceived,this),this.noteEditor=void 0,this.changeModel=void 0)},t.prototype.onCanvasUnloading=function(){this.version=0,this.unconfirmed=[],this.shadow=new h,this.unsentOps=[],this.unsentCursor=void 0},t.prototype.onDocumentReceived=function(t){var e=t.version,n=t.key,o=JSON.parse(t.ops);m("doc received",e,o),this.version=e,this.documentId=n;var i,r=new h(o),s=this.unconfirmed;if(this.unsentOps.length&&(s=s.concat([this.unsentOps])),m("unconf",this.unconfirmed),m("unsent",this.unsentOps),s.length){i=new h,s.forEach((function(t){i=i.compose(new h(t))}));var a=this.shadow.diff(r);m("composed local",i),m("diff",a),i=a.transform(i,!0),m("transf. composed local",i)}this.unsentOps=[],this.unconfirmed=[],this.shadow=r,this.noteEditor.setInitContent(r),i&&(this.textChanged(i),this.noteEditor.updateContent(i))},t.prototype.changeConfirmed=function(t){this.version=t;var e=this.unconfirmed.shift();this.shadow=this.shadow.compose(new h(e)),this.updateSyncState()},t.prototype.changeRejected=function(t){if(409!=t.code){var e=this.unconfirmed.shift(),n=this.shadow.compose(new h(e)).diff(this.shadow),o=this.unconfirmed.concat([this.unsentOps]).reduce((function(t,e){return t.compose(new h(e))}),new h),i=o.transform(n,!1);this.noteEditor.updateContent(i),this.unconfirmed=[],this.unsentOps=[],this.changeModel.sendRecover(),o=new h(n).transform(o,!0),this.textChanged(o),this.updateSyncState()}},t.prototype.changed=function(t,e){this.version=t.version;var n=new h(JSON.parse(t.ops));this.shadow=this.shadow.compose(n),this.unsentCursor&&(this.unsentCursor.start=n.transformPosition(this.unsentCursor.start,!0),this.unsentCursor.end=n.transformPosition(this.unsentCursor.end,!0));var o=[];this.unconfirmed.forEach((function(t){var e=n.transform(new h(t),!0).ops;o.push(e),n=new h(t).transform(n,!1)})),this.unconfirmed=o,this.unsentOps.length&&(n=new h(this.unsentOps).transform(n,!1),this.unsentOps=n.transform(new h(this.unsentOps),!0).ops),this.noteEditor.updateContent(n.ops);var i=n.ops.reduce((function(t,e){return e.retain?t+=e.retain:e.insert&&(t+=e.insert.length),t}),0);this.updateCursor(e,i,i)},t.prototype.cursor=function(t,e){var n=t.index,o=t.index+t.length;this.unconfirmed.concat([this.unsentOps]).forEach((function(t){var e=new h(t);n=e.transformPosition(n,!1),o=e.transformPosition(o,!1)})),this.updateCursor(e,n,o)},t.prototype.cursorConfirmed=function(){},t.prototype.cursorRejected=function(t){},t.prototype.textChanged=function(t){this.unsentOps=new h(this.unsentOps).compose(t).ops,this.sendHelper.change()},t.prototype.cursorChanged=function(t){this.unsentCursor=t,this.sendHelper.change()},t.prototype.flushToServer=function(){var t={v:this.version};this.unsentOps.length&&(t.ops=this.unsentOps,this.unconfirmed.push(this.unsentOps)),this.unsentCursor&&(t.cursor=this.unsentCursor),t.ops&&this.changeModel.sendChange(t.ops,this.version),t.cursor&&this.changeModel.sendCursor(t.cursor.start,t.cursor.end,this.version),this.deltaFlushedToServer.dispatch(this.unsentOps),this.unsentOps=[],this.unsentCursor=null,this.updateSyncState()},Object.defineProperty(t.prototype,"isSyncing",{get:function(){return this._isSyncing},enumerable:!1,configurable:!0}),t.prototype.updateSyncState=function(){var t=this._isSyncing,e=this.unconfirmed.length;e<3.5?t=!1:e>=7&&(t=!0),t!=this._isSyncing&&(this._isSyncing=t,this.syncStateChanged.dispatch(t))},t.prototype.updateCursor=function(t,e,n){var o=this;u().getUserInfo(t).then((function(i){return o.noteEditor.modules.cursors.setCursor(t,i.name,{start:e,end:n})}))},t}();e.a=g}).call(this,n(54),n(110))},7685:function(t,e,n){"use strict";(function(t){var o=n(3402),i=n(181),r=n(1477),s=function(){function e(e){var n=this;this.onStateChanged=new t.Signal,this.onDocumentReceived=new t.Signal,this.state=r.a.DISCONNECTED,this.onCanConnect=function(){i.isCanvasLoaded()&&n.module.panelController&&setTimeout((function(){return n.connect()}))},this.onShouldDisconnect=function(){n.disconnect()},this.module=e,this.module.onPanelOpen.add(this.onCanConnect),i.doOnCanvasLoaded(this.onCanConnect),i.onCanvasUnloading.add(this.onShouldDisconnect)}return e.prototype.subscribeConfirmed=function(t){this.changeState(r.a.CONNECTED),this.onDocumentReceived.dispatch(t.document)},e.prototype.subscribeRejected=function(t){},e.prototype.connect=function(){this.state==r.a.DISCONNECTED&&(this.changeState(r.a.CONNECTING),this.connectModel=i.adaptBoardToModel(o.a),this.connectModel.setListener(this),this.connectModel.subscribe())},e.prototype.disconnect=function(){this.state!=r.a.DISCONNECTED&&(this.changeState(r.a.DISCONNECTED),this.connectModel.unsubscribe(),this.connectModel=void 0)},e.prototype.changeState=function(t){t!=this.state&&(this.state=t,this.onStateChanged.dispatch(t))},e}();e.a=s}).call(this,n(110))},7686:function(t,e,n){"use strict";(function(t){var o=n(3404),i=n(181),r=n(2018),s=n(1477),a=function(){function e(e){this.objectLoaded=new t.Signal,this.module=e,this.module.connection.onStateChanged.add(this.onConnectionStateChanged,this)}return e.prototype.onConnectionStateChanged=function(t){t==s.a.CONNECTING?(this.docJson=new r.b,this.docJson.registerPathProcessor("widgetsRefs",this),this.docJson.registerPathProcessor("images",this),this.docJson.objectLoaded.add(this.onObjectLoaded,this),this.docJson.subscribeModel(i.adaptBoardToModel(o.a))):t==s.a.DISCONNECTED&&(this.docJson.objectLoaded.remove(this.onObjectLoaded,this),this.docJson.unsubscribeModel())},e.prototype.onObjectLoad=function(t){},e.prototype.create=function(t,e){return this.docJson.create(e,t)},e.prototype.update=function(t,e){this.docJson.update(t,e)},e.prototype.onObjectLoaded=function(t,e){this.objectLoaded.dispatch(t)},e}();e.a=a}).call(this,n(110))},7687:function(t,e,n){"use strict";var o=n(188),i=n.n(o),r=n(410),s=n(239),a=n(197),l=n(181),d=n(407),c=n(1092),p=n(305),u=n(4597),h=n(538),m=n(265),g=n(219),f=n(1933),b=new i.a.Point(-1e4,-1e4),v=function(){function t(t){this.ignoreNextTransform=!1,this.module=t,this.module.onPanelOpen.add(this.init,this),this.module.onPanelClose.add(this.deinit,this)}return t.prototype.init=function(t){this.panelCtrl=t,l.transformationController.transformationStart.add(this.onTransformStart,this,-100)},t.prototype.deinit=function(){l.transformationController.transformationStart.remove(this.onTransformStart,this)},t.prototype.onTransformStart=function(t,e,n){t==r.a.MOVE&&"keyboard"!=n&&Object(s.a)().rightSidebar.activePluginId==a.a.NOTES&&(this.panelCtrl.noteEditor.modules.dnd.onDragStart(),l.transformationController.transformationChanged.add(this.onTransformChange,this),l.transformationController.transformationEnd.add(this.onTransformEnd,this),this.ignoreNextTransform=!1)},t.prototype.onTransformChange=function(t,e){f.e()?this.panelCtrl.noteEditor.modules.dnd.onDragMove(b):this.ignoreNextTransform?this.ignoreNextTransform=!1:(this.isOverNotes()&&(this.ignoreNextTransform=!0,l.transformationController.move(0,0,!1)),this.panelCtrl.noteEditor.modules.dnd.onDragMove(this.getMousePos()))},t.prototype.onTransformEnd=function(t,e,n){var o;l.transformationController.transformationChanged.remove(this.onTransformChange,this),l.transformationController.transformationEnd.remove(this.onTransformEnd,this),this.isOverNotes()&&(o=this.createObjects(e),Object(g.a)().resetChangesFor(e)),this.panelCtrl.noteEditor.modules.dnd.onDragEnd(o)},t.prototype.createObjects=function(t){var e=this,n=t.slice(0);t.forEach((function(t){h.a.isFramework(t)?m.b(n,t.getChildren()):t.isContainer&&m.b(n,t.asContainer.children)})),t=n;var o={widgets:d.b.fromObjects(t)},i={alias:Object(c.a)().create("widgetsAliases",o).id},r=this.module.notesObjects.create(i,"widgetsRefs"),s=u.a.createPreview(this.module.collab.documentId,t,this.panelCtrl.element.width()-100,this.panelCtrl.element.height()/2),a=s.width,l=s.height,p=s.preview,g={id:r.id,width:a,height:l};return p.then((function(t){return e.module.notesObjects.update(r,{resource:t.id})})),g},t.prototype.getMousePos=function(){return new i.a.Point(p.e.xPos,p.e.yPos)},t.prototype.isOverNotes=function(){var t=this.panelCtrl.sidebarElement.position();return p.e.xPos>=t.left},t}();e.a=v},7688:function(t,e,n){"use strict";var o=n(188),i=n.n(o),r=n(194),s=n(211),a=n(618),l=n(265),d=n(1883),c=r.b(),p=s.b(),u=function(){function t(t){this.enterWrapper=this.onEnter.bind(this),this.leaveWrapper=this.onLeave.bind(this),this.overWrapper=this.onOver.bind(this),this.dropWrapper=this.onDrop.bind(this),this.prevPos=new i.a.Point,this.dragAffectedElements=[],this.isListening=!1,this.module=t,this.module.onPanelOpen.add(this.init,this),this.module.onPanelClose.add(this.deinit,this)}return t.prototype.init=function(t){this.element=t.noteEditor.editor.container,this.editor=t.noteEditor,this.element.addEventListener("dragenter",this.enterWrapper,!1),this.element.addEventListener("dragover",this.overWrapper),this.element.addEventListener("dragleave",this.leaveWrapper),this.element.addEventListener("dragend",this.leaveWrapper),this.element.addEventListener("drop",this.dropWrapper)},t.prototype.deinit=function(){this.element.removeEventListener("dragenter",this.enterWrapper,!1),this.element.removeEventListener("dragover",this.overWrapper),this.element.removeEventListener("dragleave",this.leaveWrapper),this.element.removeEventListener("dragend",this.leaveWrapper),this.element.removeEventListener("drop",this.dropWrapper)},t.prototype.onEnter=function(t){t.stopPropagation(),t.preventDefault(),this.prevPos=this.getMousePos(t),this.isListening=this.checkType(t.dataTransfer)&&c().currentBoard.canCreateAndEditWidgets()&&!p().getCurrentModalName(),l.a(this.dragAffectedElements,t.target),this.isListening&&this.editor.modules.dnd.onDragStart()},t.prototype.onLeave=function(t){t.stopPropagation(),t.preventDefault(),this.isListening&&this.getOut(),l.h(this.dragAffectedElements,t.target),this.isListening&&!this.dragAffectedElements.length&&(this.isListening=!1,this.editor.modules.dnd.onDragEnd())},t.prototype.onOver=function(t){if(t.stopPropagation(),t.preventDefault(),this.isListening){var e=this.getMousePos(t);e.x==this.prevPos.x&&e.y==this.prevPos.y||(this.prevPos=e,this.editor.modules.dnd.onDragMove(e))}},t.prototype.onDrop=function(t){t.stopPropagation(),t.preventDefault(),this.checkType(t.dataTransfer)||this.module.panelController.showNotesNotification(d.c,!0),this.isListening&&this.getOut(),this.isListening=!1,this.dragAffectedElements.length=0},t.prototype.checkType=function(t){if(t.items)for(var e=0;e<t.items.length;e++){var n=t.items[e];if(n&&"file"==n.kind&&n.type.match(a.t))return!0}return!1},t.prototype.getMousePos=function(t){return new i.a.Point(t.clientX,t.clientY)},t.prototype.getOut=function(){this.editor.modules.dnd.onDragMove(new i.a.Point(-1e4,-1e4))},t}();e.a=u},7689:function(t,e,n){"use strict";var o=n(1193),i=n(239),r=n(27),s=n(181),a=n(4494),l=n(1062),d=function(){function t(t){this.enabled=!1,this.module=t,o.d.add(this.onScreenShareChanged,this),this.onScreenShareChanged(Object(o.a)())}return t.prototype.onScreenShareChanged=function(t){var e=t==r.v.BROADCASTER;e!=this.enabled&&(this.enabled=e,e?this.module.onPanelOpen.add(this.onPanelOpen,this):(this.module.onPanelOpen.remove(this.onPanelOpen,this),this.onPanelClose()))},t.prototype.onPanelOpen=function(t){this.currentPanel=t,this.module.onPanelClose.add(this.onPanelClose,this),Object(i.a)().rightSidebar.resized.add(this.sendPanelSize,this),Object(i.a)().rightSidebar.fullscreenChanged.add(this.sendFullscreen,this),s.pixiCanvas.canvasResized.add(this.sendPanelSize,this,-100),this.currentPanel.noteEditor.scrollProcessor.scrolled.add(this.sendPanelScroll,this),this.currentPanel.fontSizeModule&&this.currentPanel.fontSizeModule.changed.add(this.sendFontSize,this),this.sendPanelState(!0),this.sendPanelSize(),this.sendFullscreen(Object(i.a)().rightSidebar.fullscreen),this.sendPanelScroll(this.currentPanel.noteEditor.scrollProcessor.scrollOffset),this.currentPanel.fontSizeModule&&this.sendFontSize(this.currentPanel.fontSizeModule.size)},t.prototype.onPanelClose=function(){this.currentPanel&&(this.sendPanelState(!1),this.module.onPanelClose.remove(this.onPanelClose,this),Object(i.a)().rightSidebar.resized.remove(this.sendPanelSize,this),Object(i.a)().rightSidebar.fullscreenChanged.remove(this.sendFullscreen,this),s.pixiCanvas.canvasResized.remove(this.sendPanelSize,this),this.currentPanel.noteEditor.scrollProcessor.scrolled.remove(this.sendPanelScroll,this),this.currentPanel.fontSizeModule&&this.currentPanel.fontSizeModule.changed.remove(this.sendFontSize,this),this.currentPanel=void 0)},t.prototype.sendPanelState=function(t){Object(l.a)().then((function(e){e.screenVideoChatService.sendData(a.c,t)}))},t.prototype.sendPanelScroll=function(t){Object(l.a)().then((function(e){e.screenVideoChatService.sendData(a.d,t)}))},t.prototype.sendPanelSize=function(){var t=this.currentPanel.noteEditor.getMaxWidthEditorContent(),e=s.pixiCanvas.canvasHeight-64,n=t/s.pixiCanvas.canvasWidth;Object(l.a)().then((function(o){o.screenVideoChatService.sendData(a.e,{width:t,height:e,percent:n})}))},t.prototype.sendFontSize=function(t){Object(l.a)().then((function(e){e.screenVideoChatService.sendData(a.a,t)}))},t.prototype.sendFullscreen=function(t){Object(l.a)().then((function(e){e.screenVideoChatService.sendData(a.b,t)}))},t}();e.a=d},7690:function(t,e,n){"use strict";(function(t){var o=n(181),i=n(3402),r=n(1477),s=function(){function e(e){this.module=e,this.changed=new t.Signal,this._onlineUsers=[],this.module.connection.onStateChanged.add(this.onConnectionStateChanged,this),this.module.connection.state!=r.a.DISCONNECTED&&this.connect()}return e.prototype.onConnectionStateChanged=function(t){t==r.a.DISCONNECTED?this.disconnect():this.connect()},e.prototype.connect=function(){o.adaptBoardToModel(i.a).setUsersListener(this)},e.prototype.disconnect=function(){this._onlineUsers=[]},e.prototype.documentSubscribed=function(t){var e=this;t.forEach((function(t){return e.subscribed(t)}))},e.prototype.subscribed=function(t){var e={id:t.user,clientId:t.id};this._onlineUsers.push(e),this.changed.dispatch(this.getOnlineUsers(),[e],void 0)},e.prototype.unsubscribed=function(t){var e=this.findClientIndex(t);if(-1!=e){var n=this._onlineUsers.splice(e,1);this.changed.dispatch(this.getOnlineUsers(),void 0,n)}},e.prototype.getOnlineUsers=function(){return this._onlineUsers},e.prototype.findClientIndex=function(t){return this._onlineUsers.findIndex((function(e){return e.clientId==t}))},e}();e.a=s}).call(this,n(110))},7691:function(t,e,n){"use strict";var o,i=n(187),r=n(209),s=n(278),a=n(747),l=n(822),d=s.d.toMillis(10);e.a=function(t){o||(o=new c(t))};var c=function(){function t(t){this.timeoutId=0,this.editsLength=0,this.module=t,t.onPanelOpen.add(this.startListen,this)}return t.prototype.startListen=function(){var t=this;this.module.onPanelClose.add(this.stopListen,this),this.module.collab.deltaFlushedToServer.add(this.onEdit,this),this.timeoutId=setTimeout((function(){t.timeoutId=0,t.openAchievement()}),d)},t.prototype.stopListen=function(){this.module.collab.deltaFlushedToServer.remove(this.onEdit,this),this.module.onPanelClose.remove(this.stopListen,this),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},t.prototype.onEdit=function(t){this.editsLength+=a.a.getEditsLength(t),this.editsLength>=20&&this.openAchievement()},t.prototype.openAchievement=function(){Object(i.a)().achievements.isOpened(r.b.NOTES_TRIED)||Object(i.a)().achievements.open(r.b.NOTES_TRIED),l.a.noteActivated(1),this.module.onPanelOpen.remove(this.startListen,this),this.stopListen()},t}()},7692:function(t,e,n){"use strict";var o,i=n(181),r=n(1092),s=n(224),a=n(967),l=n(187),d=n(209),c=n(278),p=n(3344),u=n(44),h=n(297);e.a=function(t){o||(o=new b(t))};var m=c.a.toMillis(7),g=[a.a.AUTO_PINNED,a.a.SCREEN_SHARE_WATCH],f="properties",b=function(){function t(t){var e=this;this.needShowBanner=!1,this.checkPinned=function(){var t=Object(u.b)(),e=Object(r.a)().documentJson,n=function(o){o&&o.delta&&o.delta.pinnedNote?t.reject(a.a.AUTO_PINNED):t.resolve(),e.unsubscribe(f,n)};return e.subscribe(f,n),t.promise},this.checkEdited=function(){var t=Object(u.b)();return Object(p.a)().subscribed.addOnce((function(e,n){e||n?t.resolve():t.reject(a.a.AUTO_FIRST_EDIT)})),t.promise},this.checkShowBanner=function(){return e.needShowBanner?Promise.reject(a.a.AUTO_SHOW_BANNER):Promise.resolve()},this.module=t,i.onScopeCreated.add(this.onScopeCreated,this),i.isScopeCreated()&&this.onScopeCreated()}return t.prototype.onScopeCreated=function(){var t=this;this.needShowBanner=this.itsTimeToShowBanner(),this.needShowBanner&&this.module.onPanelOpen.addOnce(this.onPanelOpen,this);var e=this.module;i.onScopeDestroyed.addOnce((function(){t.module.onPanelOpen.remove(t.onPanelOpen,t),e=void 0})),this.checkPinned().then(this.checkEdited).then(this.checkShowBanner).catch((function(t){e&&e.openPanelAfterContentLoad(t)}))},t.prototype.onPanelOpen=function(t){this.needShowBanner&&!g.includes(this.module.activatedFromSource)&&(t.toggleHelp(!0,"auto_showing"),Object(l.a)().achievements.open(d.b.NOTES_FIRST_TIME_BANNER),this.needShowBanner=!1)},t.prototype.itsTimeToShowBanner=function(){var t=!Object(l.a)().achievements.isOpened(d.b.NOTES_FIRST_TIME_BANNER),e=!Object(l.a)().achievements.isOpened(d.b.NOTES_TRIED),n=Object(l.a)().userInfo.createdAt,o=Date.parse(n),i=Date.now()-o>m,r=s.a.getInfo();return!Object(h.a)()&&t&&e&&i&&r&&!r.demo},t}()},811:function(t,e,n){"use strict";(function(t){var o=n(220),i=function(){function e(){}return e.start=function(e,n,o){var i=this;void 0===n&&(n=function(){}),void 0===o&&(o=function(){}),t.when(e).then((function(t){i.downloadFile(t),n()}),o)},e.downloadFile=function(t){var e,n,i=t.attrs||{},r=t.urlOrBlob instanceof Blob,s=window.URL||window.webkitURL||window,a=i.download||"download";r?(e=s.createObjectURL(t.urlOrBlob),n="download-link-help"):(e=t.urlOrBlob,n="_blank"),o.e(e).download(a,n),r&&(window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(t.urlOrBlob,a),setTimeout((function(){return s.revokeObjectURL(e)}),1e4))},e}();e.a=i}).call(this,n(193))},818:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var o=n(235),i=n(1278),r=n(1003),s=n(1840),a=n(1841),l=n(182),d=n(244),c=n(906),p=n(276),u=n(1842),h=n(16),m=h.a.ios||h.a.mac;function g(){Object(s.a)(),Object(a.a)(),n(1843),Object(l.b)().directive("uiTextarea",f)}function f(){return{replace:!0,restrict:"E",require:["uiTextarea","ngModel"],template:n(1845),controller:b,scope:{editable:"=?",maxlength:"=?",placeholder:"=",editByClick:"=?",autoblur:"=?",autosave:"=?",autofocus:"=?",useInput:"=?",useAutosize:"=?",saveOnChange:"=?",saveOnEnter:"=?",editAsHtml:"=?",controller:"=?",onEsc:"&",onEnter:"&",onFocus:"&",onChange:"&"},link:function(e,n,o,s){var a=s[0],l=s[1],h=n.find("textarea"),g=n.find("input"),f=Object(d.a)().$sce,b=function(t){return"undefined"===typeof t};e.editAsHtml=!b(e.editAsHtml)&&e.editAsHtml,e.useInput=!b(e.useInput)&&e.useInput,e.useAutosize=!!b(e.useAutosize)||e.useAutosize,e.edit=e.useInput?g:h,e.forceEdit=!1,e.maxlength=e.maxlength||2e3,e.editable=!!b(e.editable)||e.editable,e.editByClick=!!b(e.editByClick)||e.editByClick,e.autoblur=!b(e.autoblur)&&e.autoblur,e.autosave=!!b(e.autosave)||e.autosave,e.autofocus=!b(e.autofocus)&&e.autofocus,e.saveOnChange=!b(e.saveOnChange)&&e.saveOnChange,e.saveOnEnter=!!b(e.saveOnEnter)||e.saveOnEnter,e.controller={view:function(){e.setEditMode(!1),e.safeApply()},edit:function(){if(e.editable){e.forceEdit=!0;var o=t.Event("click");o.target=n.get(0),o.preventDefault(),e._onClick(o)}},save:function(t){void 0===t&&(t=!0),r.b.execute(null,e,a,l,t),e.safeApply()},cancel:function(){l.$rollbackViewValue(),e.setEditMode(!1),e.safeApply()},getScrollTop:function(){return e.useInput?0:i.c(e.edit[0])},getLineHeight:function(){return e.useInput?0:i.b(e.edit[0])},scrollIntoView:function(){if(!e.useInput){var t=e.edit[0];t.style.height=i.a(t)+"px",t.scrollTop=i.c(t)}},getEditor:function(){return e.edit[0]},change:function(t){e.editValue=t,e._onChange()},getParseResult:function(){return a.parseResult}},e.setEditMode=function(t){e.viewMode=!t,e.edit.toggleClass("ng-hide",!t)},e.setEditMode(!1),l.$formatters.push((function(t){return a.formatter.reduce((function(t,n){return n.execute(t,e)}),Object(p.c)(t))})),l.$parsers.push((function(t){return a.parser.reduce((function(t,e){return e.execute(t)}),t)})),l.$render=function(){e.editValue=Object(p.c)(l.$viewValue),m&&(e.editValue=Object(c.a)(e.editValue)),e.viewValue=Object(u.a)(l.$modelValue).map((function(t){return t.isHtml&&(t.text=f.trustAsHtml(t.text)),t}))},e._onFocus=function(t){return a.focus.forEach((function(n){return n.execute(t,e,a,l)}))},e._onClick=function(t){return a.click.some((function(n){return n.execute(t,e,a,l)}))},e._onChange=function(){return a.change.forEach((function(t){return t.execute(e,a,l)}))},e._onKeyUp=function(t){return a.keyup.some((function(n){return n.execute(t,e,a,l)}))},e._onKeyDown=function(t){return a.keydown.some((function(n){return n.execute(t,e,a,l)}))},e.autofocus&&e.controller.edit()}}}var b=function(){function t(t,e){this.$scope=t,this.$element=e,this.clickListenerWrapper=this.clickListener.bind(this),this._click=[],this._blur=[],this._focus=[],this._change=[],this._keyUp=[],this._keyDown=[],this._parser=[],this._formatter=[],this.addBlur(r.b),this.addClick(r.d),this.addChange(r.c),this.addKeyUp(r.i),this.addFormatter(r.a),m&&this.addParser(r.e),this.addKeyDown(r.k),this.addKeyDown(r.h),this.addKeyDown(r.j),this.addKeyDown(r.g)}return Object.defineProperty(t.prototype,"click",{get:function(){return this._click},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focus",{get:function(){return this._focus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyup",{get:function(){return this._keyUp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keydown",{get:function(){return this._keyDown},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatter",{get:function(){return this._formatter},enumerable:!1,configurable:!0}),t.prototype.addClick=function(t,e){void 0===e&&(e=this._click.length),this._click.splice(e,0,t)},t.prototype.addBlur=function(t){this._blur.push(t)},t.prototype.addFocus=function(t){this._focus.push(t)},t.prototype.addChange=function(t){this._change.push(t)},t.prototype.addKeyUp=function(t){this._keyUp.push(t)},t.prototype.addKeyDown=function(t){this._keyDown.push(t)},t.prototype.addParser=function(t){this._parser.push(t)},t.prototype.addFormatter=function(t){this._formatter.push(t)},t.prototype.addClickListener=function(){this.$scope.autoblur&&document.addEventListener("click",this.clickListenerWrapper,!0)},t.prototype.removeClickListener=function(){this.$scope.autoblur&&document.removeEventListener("click",this.clickListenerWrapper,!0)},t.prototype.clickListener=function(t){var e=this.$scope;e.$parent.$root=e.$root;var n=this.$element[0];o.c(t.target,(function(t){return t===n}))||(e.autosave?e.controller.save():e.controller.view())},Object.defineProperty(t.prototype,"parseResult",{get:function(){return this._parseResult},set:function(t){this._parseResult=t},enumerable:!1,configurable:!0}),t.$inject=["$scope","$element"],t}()}).call(this,n(193))},822:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m}));var o=n(0),i=n(42),r=n(7620),s=n(547),a=n(239),l=n(257),d=n(194),c=n(224),p=function(e,n){return t.log("notes-stat",{key:e,params:n})},u=function(){return Object(o.b)(void 0,void 0,Promise,(function(){return Object(o.e)(this,(function(t){return[2,Object(s.a)().then((function(t){return t}))]}))}))},h=function(){return Object(o.b)(void 0,void 0,Promise,(function(){return Object(o.e)(this,(function(t){return[2,Object(s.a)().then((function(t){return t.editor&&t.editor.editor}))]}))}))},m=(d.b(),function(){function t(){}return t.noteOpened=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,e,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,h()];case 1:return t=o.sent(),n={document_length:t.getLength(),count_widgets:Object(r.b)(t),count_images:Object(r.a)(t),count_lines:t.getLines().length},[4,u()];case 2:return n.source=o.sent().activatedFromSource||"",p("note_opened",e=n),Object(i.a)().sendApiEvent("note_opened",e),[2]}}))}))},t.noteClosed=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,e,n;return Object(o.e)(this,(function(o){switch(o.label){case 0:return[4,h()];case 1:return t=o.sent(),n={document_length:t.getLength(),count_widgets:Object(r.b)(t),count_images:Object(r.a)(t),count_lines:t.getLines().length},[4,u()];case 2:return n.source=o.sent().deactivatedFromSource||"",p("note_closed",e=n),Object(i.a)().sendApiEvent("note_closed",e),[2]}}))}))},t.noteTransformed=function(){var t={transformation_type:"resized",set_value:Math.floor(100*Object(a.a)().rightSidebar.width/document.body.clientWidth)+"%"};p("note_transformed",t),Object(i.a)().sendApiEvent("note_transformed",t)},t.noteAuthorshopSwitched=function(t){var e={state:t};p("note_authorship_switched",e),Object(i.a)().sendApiEvent("note_authorship_switched",e)},t.noteExport=function(t){var e={content_type:"note",export_type:t};p("content_exported",e),Object(i.a)().sendApiEvent("content_exported",e)},t.noteTemplateAdded=function(t){var e={template_name:t};p("note_template_added",e),Object(i.a)().sendApiEvent("note_template_added",e)},t.embedActionsMenuUsed=function(t,e){var n={content_type:t,action_type:e};p("note_object_toolbar_used",n),Object(i.a)().sendApiEvent("note_object_toolbar_used",n)},t.noteFormatted=function(t){var e=Object(o.a)({},t);p("note_formatted",e),Object(i.a)().sendApiEvent("note_formatted",e)},t.noteEdited=function(t){var e=t.find((function(t){return t.insert&&t.insert.widgetsRef})),n=t.find((function(t){return t.insert&&t.insert.image})),o=t.reduce((function(t,e){return e.insert&&"string"===typeof e.insert?t+e.insert.length:e.delete?t-e.delete:t}),0);if(e||n||o){var r={action_type:o<0?"deleted":"inserted",text_symbols:Math.abs(o)||0};e&&e.insert&&e.insert.widgetsRef&&(r.widgets_ref=e.insert.widgetsRef),n&&n.insert&&n.insert.image&&(r.image_id=n&&n.insert&&n.insert.image),p("note_edited",r),Object(i.a)().sendApiEvent("note_edited",r)}},t.noteToolbarUsed=function(t){var e={button:t};p("note_toolbar_used",e),Object(i.a)().sendApiEvent("note_toolbar_used",e)},t.noteFormatPickerUsed=function(t){var e={button:t};p("note_format_picker_used",e),Object(i.a)().sendApiEvent("note_format_picker_used",e)},t.noteCommentParagraphUsed=function(){p("note_comment_paragraph_used",{}),Object(i.a)().sendApiEvent("note_comment_paragraph_used",{})},t.noteLinkCopied=function(t){var e={source:t};p("note_link_copied",e),Object(i.a)().sendApiEvent("note_link_copied",e)},t.noteBannerOpened=function(){Object(l.d)("new_feature_window_showed",{feature:this.FEATURE_NAME})},t.noteHelpOpened=function(t){Object(l.d)("feature_help_opened",{feature:this.FEATURE_NAME,source:t})},t.noteHelpInteracted=function(t){Object(l.d)("feature_help_user_interacted",{feature:this.FEATURE_NAME,action_type:t})},t.noteBannerClosed=function(t){Object(l.d)("new_feature_window_button_clicked",{feature:this.FEATURE_NAME,button:t})},t.noteFirstTimeBannerClick=function(t){Object(l.d)("note_first_time_banner_clicked",{target:t})},t.noteActivated=function(t){Object(l.d)("user_feature_activated",{feature:this.FEATURE_NAME,version:t})},t.notePinUsed=function(t){Object(l.d)("note_pin_used",{action_type:t})},t.noteCommentMessageChanged=function(t,e,n,o){var r={comment_message_id:e,change_type:n,widget_id:t,text_length:o,source:"notes",medium:"app",account_plan:c.a.getInfo().account.type};p("comment_message_changed",r),Object(i.a)().sendApiEvent("comment_message_changed",r)},t.FEATURE_NAME="notes",t}())}).call(this,n(54))}}]);
//# sourceMappingURL=https://miro.com/app/static/Notes.b057347e85937052617f.js.map