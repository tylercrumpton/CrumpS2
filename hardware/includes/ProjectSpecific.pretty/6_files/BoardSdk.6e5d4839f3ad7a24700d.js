(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1058:function(t,e,n){"use strict";n.d(e,"k",(function(){return mt})),n.d(e,"m",(function(){return bt})),n.d(e,"g",(function(){return yt})),n.d(e,"f",(function(){return vt})),n.d(e,"j",(function(){return Ot})),n.d(e,"l",(function(){return jt})),n.d(e,"i",(function(){return St})),n.d(e,"o",(function(){return Et})),n.d(e,"n",(function(){return Dt})),n.d(e,"r",(function(){return Ct})),n.d(e,"b",(function(){return xt})),n.d(e,"d",(function(){return At})),n.d(e,"e",(function(){return Pt})),n.d(e,"c",(function(){return Nt})),n.d(e,"a",(function(){return Ut})),n.d(e,"h",(function(){return Mt})),n.d(e,"p",(function(){return Bt})),n.d(e,"q",(function(){return Ft}));var r,o=n(27),i=n(0),a=n(1736),c=n(188),s=n.n(c),l=n(184),u=n(3),d=n(7941),p=n.n(d),h=n(2012),f=n(786),g=n(879),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.EMBED,e.supportedFieldsForWrite={x:Object(f.e)("embed.x"),y:Object(f.e)("embed.y"),scale:Object(f.e)("embed.scale"),html:Object(f.g)("embed.html")},e.requiredFieldsToCreate=["html"],e}return Object(i.d)(e,t),e.prototype.create=function(t){var e=this;if(void 0===t&&(t={}),!t.html)throw new Error("'html' field is required for EmbedWidget");var n=t.html;return Object(a.a)().isEmbed(n)?this.createEmbed((function(t,e){Object(a.a)().createFromIFrame(n,t,e)}),t):this.createEmbed((function(t,r){e.createEmbedURL(n,t,r)}),t)},e.prototype.update=function(t,e){var n=this.convertSdkToInnerData(e,t);return t.setData(n),Promise.resolve(t)},e.prototype.createEmbed=function(t,e){var n=this;return new Promise((function(r){Object(a.a)().widgetCreated.addOnce((function(t){setTimeout((function(){r(t)}),1e3)}));var o=new s.a.Point(e.x||0,e.y||0),i=n.convertSdkToInnerData(e).custom_data;t(i,o)}))},e.prototype.createEmbedURL=function(t,e,n){l.a.embedly.get(t).then((function(r){var o=p()(r,e,(function(t,e){return e||t}));Object(a.a)().createFromEmbedly(t,o,n||new s.a.Point,!0)})).catch((function(t){var e=u.b.getJsonError(t).message||"Create embed widget failed";throw new Error(e)}))},e.prototype.convertSdkToInnerData=function(t,e){var n=Object(f.a)(e&&e.height,0),r=Object(f.a)(e&&e.width,0);return{custom_data:{height:n,width:r,html:t.html||"",prv:h.a.UNKNOWN},size:{height:n,width:r},position:{x:Object(f.a)(t.x,e&&e.x),y:Object(f.a)(t.y,e&&e.y)},rotation:{rotation:e&&e.rotation||0},scale:{scale:e&&e.scale||1}}},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.html=t.getHTML(),e},e}(g.a),b=n(409),y=n(181),v=n(529),O=n(1887),j=n(2019),S=n(2945),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.SHAPE,e.supportedFieldsForWrite={x:Object(f.e)("shape.x"),y:Object(f.e)("shape.y"),width:Object(f.e)("shape.width"),height:Object(f.e)("shape.height"),rotation:Object(f.e)("shape.rotation"),text:Object(f.g)("shape.text"),style:Object(f.h)("shape.style")},e.supportedStylesForRead={shapeType:!0,backgroundColor:!0,backgroundOpacity:!0,borderColor:!0,borderWidth:!0,borderStyle:!0,borderOpacity:!0,fontSize:!0,fontFamily:!0,textColor:!0,textAlign:!0,textAlignVertical:!0,highlighting:!0,italic:!0,strike:!0,underline:!0,bold:!0},e.defaultNewShapeData={x:0,y:0,width:100,height:100,rotation:0,text:"",style:{shapeType:b.a.RECTANGLE,backgroundColor:"transparent",backgroundOpacity:1,borderColor:"#1a1a1a",borderWidth:2,borderStyle:2,borderOpacity:1,fontSize:14,fontFamily:0,textColor:"#1a1a1a",textAlign:j.a.CENTER,textAlignVertical:S.a.MIDDLE,italic:0,strike:0,underline:0,bold:0,highlighting:""}},e}return Object(i.d)(e,t),e.prototype.create=function(t){void 0===t&&(t={});var e=this.convertSdkToInnerData(this.getDefaultData(t));this.fixBugWithShapeStyle(e);var n=y.shapeWidgetController.createFromData(e,!0);return n.updateVisual(),Promise.resolve(n)},e.prototype.getDefaultData=function(t){var e=Object.assign({},this.defaultNewShapeData,t);return e.style=Object.assign({},this.defaultNewShapeData.style,t.style),e},e.prototype.fixBugWithShapeStyle=function(t){if(t.style){var e=JSON.parse(t.style),n=Object.assign({},v.STYLE,e);t.style=JSON.stringify(n)}else t.style=JSON.stringify(v.STYLE)},e.prototype.update=function(t,e){var n=this.convertSdkToInnerData(e,t);return y.shapeWidgetController.update(t,n),Promise.resolve(t)},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.rotation=t.rotation,e.text=t.text,e.plainText=t.getPlainText(),e.style.shapeType=t.shapeType,e},e.prototype.convertSdkToInnerData=function(t,e){return Object(O.e)(t,e,(function(e){"string"===typeof t.text&&(e.text=t.text),t.style&&t.style.shapeType&&(e.shape=t.style.shapeType.toString())}))},e}(g.a),E=n(1888),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.TEXT,e.supportedFieldsForWrite={x:Object(f.e)("text.x"),y:Object(f.e)("text.y"),width:Object(f.e)("text.width"),rotation:Object(f.e)("text.rotation"),scale:Object(f.e)("text.scale"),text:Object(f.g)("text.text"),style:Object(f.h)("text.style")},e.supportedStylesForRead={backgroundColor:!0,backgroundOpacity:!0,borderColor:!0,borderWidth:!0,borderStyle:!0,borderOpacity:!0,fontFamily:!0,textColor:!0,textAlign:!0,highlighting:!0,italic:!0,strike:!0,underline:!0,bold:!0,padding:!0},e.defaultTextStyles={backgroundColor:"transparent",backgroundOpacity:1,borderColor:"transparent",borderOpacity:1,borderStyle:2,borderWidth:2,fontFamily:0,textAlign:"l",textColor:"#1a1a1a",highlighting:0,italic:0,strike:0,underline:0,bold:0,padding:0},e}return Object(i.d)(e,t),e.prototype.create=function(t){void 0===t&&(t={});var e=y.textWidgetController.create({x:t.x||0,y:t.y||0,canvasScale:0,text:t.text||"",style:Object(E.d)(Object(i.a)(Object(i.a)({},this.defaultTextStyles),t.style)),textScale:t.scale||1,addToHistory:!0,width:t.width,rotation:t.rotation,enableEditMode:!1,__overrideXForSdk:!1,__overrideWidthForSdk:!1,setLastUsedTextType:!1});return Promise.resolve(e)},e.prototype.update=function(t,e){null!=e.style&&null!=e.style.padding&&0!==e.style.padding&&8!==e.style.padding&&(e.style.padding=0);var n=this.convertSdkToInnerData(e,t);return y.textWidgetController.update(t,n),Promise.resolve(t)},e.prototype.convertSdkToInnerData=function(t,e){return Object(O.e)(t,e,(function(e){e.text=t.text}))},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.width=t.width,e.scale=t.scale,e.rotation=t.rotation,e.text=t.text,e.plainText=t.getPlainText(),e},e}(g.a),w=n(2970),D=n(203),C=n(3890),T=n(738),x=new(function(){function t(){}return t.prototype.getSDKStickerDataWithDefaultParams=function(t){var e=Object.assign({stickerType:T.a.SQUARE,textAlign:j.a.CENTER,textAlignVertical:S.a.MIDDLE},t.style),n="undefined"===typeof t.text?"":"string"===typeof t.text?t.text:String(t.text);return Object(i.a)(Object(i.a)({x:0,y:0},t),{text:n,style:e})},t}()),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.STICKER,e.supportedFieldsForWrite={x:Object(f.e)("sticker.x"),y:Object(f.e)("sticker.y"),scale:Object(f.e)("sticker.scale"),text:Object(f.g)("sticker.text"),style:Object(f.h)("sticker.style"),tags:Object(f.f)("sticker.tags")},e.supportedStylesForRead={stickerBackgroundColor:!0,fontSize:!0,textAlign:!0,textAlignVertical:!0,stickerType:!0,fontFamily:!0},e}return Object(i.d)(e,t),e.prototype.create=function(t){void 0===t&&(t={});var e=x.getSDKStickerDataWithDefaultParams(t),n=this.convertSdkToInnerData(e),r=y.stickerWidgetController.createFromData(n,!1);return Promise.resolve(r)},e.prototype.update=function(t,e){var n=this.convertSdkToInnerData(e,t);return y.stickerWidgetController.update(t,n),Promise.resolve(t)},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.text=t.text,e.plainText=t.getPlainText(),e.tags=t.tags.map(C.a),e.style.stickerType=t.shapeType,e},e.prototype.convertSdkToInnerData=function(t,e){var n,r,o,i,a,c,s,l,u,d=new w.c;d.transformationData=new D.J,Object(O.a)(d.transformationData,t,e),Object(O.c)(d.transformationData,t),Object(O.d)(d,t,e);var p=t.style&&t.style.stickerType;return"number"!==typeof p&&(p=e&&e.shapeType),y.stickerWidgetController.createWidgetData((null===(r=null===(n=d.transformationData)||void 0===n?void 0:n.positionData)||void 0===r?void 0:r.x)||0,(null===(i=null===(o=d.transformationData)||void 0===o?void 0:o.positionData)||void 0===i?void 0:i.y)||0,(null===(c=null===(a=d.transformationData)||void 0===a?void 0:a.scaleData)||void 0===c?void 0:c.scale)||1,p,t.text,d.styleData?JSON.parse(null===(s=d.styleData)||void 0===s?void 0:s.style):void 0,null===(u=null===(l=d.transformationData)||void 0===l?void 0:l.rotationData)||void 0===u?void 0:u.rotation)},e}(g.a),A=n(7942),P=n(1327),R=n(208),L=n(1288),N=n(219),U=n(258),M=n(407),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.LINE,e.supportedFieldsForWrite={startWidgetId:Object(f.g)("line.endWidgetId"),endWidgetId:Object(f.g)("line.endWidgetId"),startPosition:Object(f.d)("line.startPosition"),endPosition:Object(f.d)("line.endPosition"),captions:Object(f.d)("line.captions"),style:Object(f.h)("shape.style")},e.supportedStylesForRead={lineColor:!0,lineThickness:!0,lineStyle:!0,lineType:!0,lineStartStyle:!0,lineEndStyle:!0},e}return Object(i.d)(e,t),e.prototype.create=function(t){void 0===t&&(t={});var e=this.convertSdkToInnerData(t),n=y.lineWidgetController.createFromData(e);return Promise.resolve(n)},e.prototype.update=function(t,e){var n=this.convertSdkToInnerData(e,t);return Object(N.a)().update([t],[n],!0,U.a.LINE),Promise.resolve(t)},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t),n=t.end0.linkedWidgetTk?t.end0.linkedWidgetTk.id.toString(10):void 0,r=t.end1.linkedWidgetTk?t.end1.linkedWidgetTk.id.toString(10):void 0;return e.startWidgetId=n,e.endWidgetId=r,e.startPosition=t.end0.position.getJson(),e.endPosition=t.end1.position.getJson(),e.captions=t.captionLayer.getCaptions().sort((function(t,e){return t.position.x-e.position.x})).map((function(t){return{text:t.text}})),e},e.prototype.convertSdkToInnerData=function(t,e){return t.startWidgetId===t.endWidgetId&&L.a.equalStartAndEndWidgetsInLine(),{points:[],style:this.getStyle(t,e),primary:this.getEndData(t.startWidgetId,t.startPosition,null===e||void 0===e?void 0:e.end0),secondary:this.getEndData(t.endWidgetId,t.endPosition,null===e||void 0===e?void 0:e.end1),line:{captions:[]}}},e.prototype.getStyle=function(t,e){if(t.style){var n=Object(E.d)(t.style);n[R.a.VERSION]=2;var r=e?e.getStyle():void 0;if(r)for(var o in r)n.hasOwnProperty(o)||(n[o]=r[o]);return JSON.stringify(n)}return"{}"},e.prototype.getEndData=function(t,e,n){var r=t?Bt(t):null===n||void 0===n?void 0:n.linkedWidget,o=e?new D.r(e.x,e.y):n?new D.r(n.globalX,n.globalY):void 0,i=P.a.RELATIVE_SNAP_TO_EDGE;return{widget:r&&M.b.fromTokenizer(r.tokenizer),point:o,positionType:i}},e}(g.a),W=n(301),F=n(2821),z=n(276),K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.FRAME,e.supportedFieldsForWrite={x:Object(f.e)("frame.x"),y:Object(f.e)("frame.y"),width:Object(f.e)("frame.width"),height:Object(f.e)("frame.height"),title:Object(f.g)("frame.title"),frameIndex:Object(f.e)("frame.frameIndex"),childrenIds:Object(f.b)("frame.childrenIds"),style:Object(f.h)("frame.style")},e.supportedStylesForRead={backgroundColor:!0},e.defaultData={x:0,y:0,width:100,height:100,style:{backgroundColor:"transparent"}},e}return Object(i.d)(e,t),e.prototype.create=function(t){var e=this;return void 0===t&&(t={}),new Promise((function(n){var r=Object(W.a)().createFrameBySettings(new F.a(t.x||e.defaultData.x,t.y||e.defaultData.y,t.width||e.defaultData.width,t.height||e.defaultData.height,Object(E.d)(e.prepareStyle(t.style)),t.title||""),!1,!1);y.objectsRegistry.getConfirmedTokenizer(r).then((function(t){r.tokenizer.token===t.token&&n(r)}))}))},e.prototype.update=function(t,e){return Object(W.a)().update(t,this.convertSdkToInnerData(e,t)),Promise.resolve(t)},e.prototype.prepareStyle=function(t){return t?{shapeColor:t.backgroundColor}:{}},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.title=Object(z.c)(t.text),e.frameIndex=t.index,e.childrenIds=t.asContainer.existingChildren.map((function(t){return t.tokenizer.id.toString()})),e},e.prototype.convertSdkToInnerData=function(t,e){return t.style&&(t.style=this.prepareStyle(t.style)),Object(O.e)(t,e,(function(e){"string"===typeof t.title?e.name=t.title:e.name=""}))},e}(g.a),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.DOCUMENT,e.supportedFieldsForWrite={x:Object(f.e)("document.x"),y:Object(f.e)("document.y"),rotation:Object(f.e)("document.rotation"),scale:Object(f.e)("document.scale"),title:Object(f.g)("document.title")},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.rotation=t.rotation,e.title=t.getTitleData(),e},e}(g.a),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.CURVE,e.supportedFieldsForWrite={x:Object(f.e)("curve.x"),y:Object(f.e)("curve.y"),rotation:Object(f.e)("curve.rotation"),scale:Object(f.e)("curve.scale"),points:Object(f.b)("curve.points"),style:Object(f.h)("curve.style")},e.supportedStylesForRead={lineColor:!0,lineWidth:!0},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.rotation=t.rotation,e.points=t.points,e},e}(g.a),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.MOCKUP,e.supportedFieldsForWrite={x:Object(f.e)("mockup.x"),y:Object(f.e)("mockup.y"),rotation:Object(f.e)("mockup.rotation"),mockupType:Object(f.g)("mockup.mockupType")},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.rotation=t.rotation,e.mockupType=t.mockupType,e},e}(g.a),q=n(3961),J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.WEBSCREEN,e.supportedFieldsForWrite={x:Object(f.e)("webscreen.x"),y:Object(f.e)("webscreen.y"),scale:Object(f.e)("webscreen.scale"),url:Object(f.g)("webscreen.url")},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.url=t.externalUrl(),e},e.prototype.convertSdkToInnerData=function(t,e){var n=new q.b;n.transformationData=new D.J,Object(O.a)(n.transformationData,t,e),Object(O.c)(n.transformationData,t);var r={image:{}};n.cropData&&(r.crop={x:n.cropData.x,y:n.cropData.y,width:n.cropData.width,height:n.cropData.height});var o=void 0;n.resourceData&&(o={generated:n.resourceData.generated,name:n.resourceData.name});var a=void 0;n.resourceIdentificationData&&(a={id:n.resourceIdentificationData.resourceId.toString(),boardId:n.resourceIdentificationData.boardId});var c=void 0;return n.resourceSizeData&&(c={width:n.resourceSizeData.width,height:n.resourceSizeData.height}),o&&a&&c&&(r.resource=Object(i.a)(Object(i.a)(Object(i.a)({},o),a),c)),n.titleData&&(r.title=n.titleData.title),n.transformationData&&(n.transformationData.positionData&&(r.position={x:n.transformationData.positionData.x,y:n.transformationData.positionData.y}),n.transformationData.rotationData&&(r.rotation={rotation:n.transformationData.rotationData.rotation}),n.transformationData.scaleData&&(r.scale={scale:n.transformationData.scaleData.scale})),n.pathData&&(r.path=n.pathData.path),r},e}(g.a),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.PREVIEW,e.supportedFieldsForWrite={x:Object(f.e)("preview.x"),y:Object(f.e)("preview.y"),scale:Object(f.e)("preview.scale"),url:Object(f.g)("preview.url")},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.url=t.externalUrl(),e},e}(g.a),Q=n(2239),X=n(1035),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSvgWidgetData={position:{x:0,y:0},rotation:{rotation:0},scale:{scale:1},size:{height:X.d,width:X.d},code:"\ud83d\ude04"},e.svgWidgetController=Object(Q.a)(),e.widgetType=o.G.EMOJI,e.supportedFieldsForWrite={x:Object(f.e)("emoji.x"),y:Object(f.e)("emoji.y"),scale:Object(f.e)("emoji.scale"),code:Object(f.g)("emoji.code"),rotation:Object(f.e)("emoji.rotation")},e}return Object(i.d)(e,t),e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);return e.x=t.x,e.y=t.y,e.scale=t.scale,e.code=t.getData().code,e.rotation=t.rotation,e},e.prototype.create=function(t){var e=this.convertSdkToInnerDataBasedOnSource(t,this.defaultSvgWidgetData),n=this.svgWidgetController.createFromData(e);return Promise.resolve(n)},e.prototype.update=function(t,e){var n=t.getData(),r=this.convertSdkToInnerDataBasedOnSource(e,n);return t.update(r),Promise.resolve(t)},e.prototype.convertSdkToInnerDataBasedOnSource=function(t,e){var n,r,o,i;return{position:{x:null!==(n=t.x)&&void 0!==n?n:e.position.x,y:null!==(r=t.y)&&void 0!==r?r:e.position.y},rotation:{rotation:null!==(o=t.rotation)&&void 0!==o?o:e.rotation.rotation},scale:{scale:null!==(i=t.scale)&&void 0!==i?i:e.scale.scale},size:e.size,code:t.code||e.code}},e}(g.a),Z=n(397),tt=n(909),et=n(449),nt=n(610),rt=n(4277),ot=n(231),it=n.n(ot),at=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.CARD,e.supportedFieldsForWrite={x:Object(f.e)("card.x"),y:Object(f.e)("card.y"),rotation:Object(f.e)("card.rotation"),scale:Object(f.e)("card.scale"),width:Object(f.e)("card.width"),height:Object(f.e)("card.height"),title:Object(f.g)("card.title"),description:Object(f.g)("card.description"),date:Object(f.g)("card.date",!0),assignee:Object(f.f)("card.assignee"),card:Object(f.f)("card.card"),style:Object(f.h)("card.style"),tags:Object(f.f)("card.tags")},e.supportedStylesForRead={backgroundColor:!0},e.defaultNewCardWidgetData={x:0,y:0,title:"",description:""},e}return Object(i.d)(e,t),e.prototype.getDefaultData=function(t){return Object.assign({},this.defaultNewCardWidgetData,t)},e.prototype.create=function(t){void 0===t&&(t={});var e=this.convertSdkToInnerData(this.getDefaultData(t)),n=Object(nt.a)().createFromCardWidgetData(e,!1);return n.showAllContent(),Promise.resolve(n)},e.prototype.update=function(t,e){var n=this.convertSdkToInnerData(e,t);return Object(nt.a)().update(t,n),Promise.resolve(t)},e.prototype.convertSdkToInnerData=function(t,e){var n=Object(O.e)(t,e,(function(n){t.title&&(n.title={title:t.title||e&&e.text||""}),t.description&&(n.description={description:t.description||e&&e.getDescription()||""})}));if(t.hasOwnProperty("card")&&"object"===typeof t.card){var r={};"object"===typeof t.card.logo&&"string"===typeof t.card.logo.iconUrl&&(r.logo=t.card.logo),Array.isArray(t.card.customFields)&&(r.customFields=t.card.customFields,r.customFields.forEach((function(t){return t.fieldType=rt.a.STRING}))),Z.a.setNsData(tt.a.CARD,r,n)}if(t.hasOwnProperty("date"))if("string"===typeof t.date){var o=it()(t.date,"YYYY-MM-DD").toDate().getTime();Z.a.setNsData(tt.a.DUE_DATE,{dueDate:[o]},n)}else Z.a.setNsData(tt.a.DUE_DATE,{dueDate:[]},n);return t.hasOwnProperty("assignee")&&("object"===typeof t.assignee&&"string"===typeof t.assignee.userId?Z.a.setNsData(tt.a.ASSIGNEE,{assignee:[t.assignee.userId]},n):Z.a.setNsData(tt.a.ASSIGNEE,{assignee:[]},n)),n},e.prototype.convertInnerToSdkData=function(t){var e=St(this,t);e.x=t.x,e.y=t.y,e.scale=t.scale,e.rotation=t.rotation,e.title=t.text,e.description=t.getDescription(),e.tags=t.tags.map(C.a);var n=t.getExtensionData(et.a.ASSIGNEE);n&&n.assignee.length&&(e.assignee={userId:n.assignee[0]});var r=t.getExtensionData(et.a.DUE_DATE);if(r&&r.dueDate[0]){var o=new Date(r.dueDate[0]);e.date=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()}var i={},a=t.getExtensionData(et.a.CUSTOM_FIELDS),c=t.getExtensionData(et.a.LOGO);return a&&(i.customFields=a),c&&(i.logo=c),e.card=i,e},e}(g.a),ct=n(4519),st=n(296),lt=n(1889),ut=n(4289),dt=1e6,pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widgetType=o.G.SVG,e.supportedFieldsForWrite={x:Object(f.e)("svg.x"),y:Object(f.e)("svg.y"),scale:Object(f.e)("svg.scale"),rotation:Object(f.e)("svg.rotation"),content:Object(f.g)("svg.content"),colorPickerVisible:Object(f.c)("svg.colorPickerVisible"),style:Object(f.h)("svg.style")},e.supportedStylesForRead={color:!0},e.requiredFieldsToCreate=["content"],e.defaultSvgWidgetData={colorPickerVisible:!1,position:{x:0,y:0},rotation:{rotation:0},scale:{scale:1},size:{height:0,width:0},svg:void 0},e.svgWidgetController=Object(ut.a)(),e}return Object(i.d)(e,t),e.prototype.create=function(t){Object(lt.a)(100),this.validateSvgContent(t.content);var e=this.convertSdkToInnerDataBasedOnSource(t,this.defaultSvgWidgetData),n=this.svgWidgetController.createFromData(e);return Promise.resolve(n)},e.prototype.update=function(t,e){Object(lt.a)(100),e.content&&!this.safeValidateSvgContent(e.content)&&(L.a.invalidSvgContent(),e.content=void 0);var n=t.getData(),r=this.convertSdkToInnerDataBasedOnSource(e,n);return t.update(r),Promise.resolve(t)},e.prototype.convertInnerToSdkData=function(t){var e=t.styleObject.getStyle()[R.a.BACKGROUND_COLOR],n=Object(E.a)(e),r=St(this,t);return r.style={color:n},r},e.prototype.convertSdkToInnerDataBasedOnSource=function(t,e){var n,r,o,i,a,c;return{colorPickerVisible:null!==(n=t.colorPickerVisible)&&void 0!==n?n:e.colorPickerVisible,position:{x:null!==(r=t.x)&&void 0!==r?r:e.position.x,y:null!==(o=t.y)&&void 0!==o?o:e.position.y},rotation:{rotation:null!==(i=t.rotation)&&void 0!==i?i:e.rotation.rotation},scale:{scale:null!==(a=t.scale)&&void 0!==a?a:e.scale.scale},size:e.size,svg:null!==(c=t.content)&&void 0!==c?c:e.svg,style:t.style?JSON.stringify(Object(E.d)(t.style)):e.style}},e.prototype.safeValidateSvgContent=function(t){try{return this.validateSvgContent(t),!0}catch(t){return!1}},e.prototype.validateSvgContent=function(t){if(!t)throw new Error(L.a.svgContentFieldIsRequired());if(t.length>dt)throw new Error(L.a.maximumSvgSizeExceeded(t.length,dt));var e=(new DOMParser).parseFromString(t,"application/xml");if(!this.isSvgValid(null===e||void 0===e?void 0:e.documentElement))throw new Error(L.a.invalidSvgContent());e.documentElement.getAttribute("width")||e.documentElement.getAttribute("height")||L.a.svgSizeNotSet()},e.prototype.isSvgValid=function(t){var e;return"svg"===(null===(e=null===t||void 0===t?void 0:t.nodeName)||void 0===e?void 0:e.toLowerCase())},e}(g.a),ht=((r={})[o.G.TEXT]=_,r[o.G.STICKER]=k,r[o.G.IMAGE]=A.a,r[o.G.DOCUMENT]=G,r[o.G.MOCKUP]=V,r[o.G.SHAPE]=I,r[o.G.LINE]=B,r[o.G.CURVE]=H,r[o.G.WEBSCREEN]=J,r[o.G.FRAME]=K,r[o.G.PREVIEW]=Y,r[o.G.EMOJI]=$,r[o.G.EMBED]=m,r[o.G.CARD]=at,r[o.G.SVG]=pt,r),ft=new Map;function gt(t){var e=ft.get(t);if(!e){var n=ht[t];e=n?new n:void 0,ft.set(t,e)}return e}function mt(t){var e=gt(t.widgetType);return e?e.convertInnerToSdkData(t):St(e,t)}function bt(t){return t.map((function(t){return mt(t)}))}function yt(t){return{id:t.tokenizer.id.toString(),bounds:It(t.bounds),childrenIds:t.asContainer.existingChildren.map((function(t){return t.tokenizer.id.toString()}))}}function vt(t){return{id:t.tokenizer.id.toString(),type:"COMMENT",bounds:It(new s.a.Rectangle(t.x,t.y,0,0)),groupId:void 0,style:{},metadata:{},capabilities:_t,clientVisible:!t.isHidden("sdk"),createdUserId:t.historyData.creationUserId.toString(),lastModifiedUserId:t.historyData.lastChangeUserId.toString()}}function Ot(t){return{id:t.tokenizer.id.toString(),type:o.G[t.widgetType],metadata:Et(t)}}function jt(t){return t.map(Ot)}function St(t,e){var n=t&&function(t){return!!t.getStyle}(e)?Object(E.b)(e.getStyle(),t.supportedStylesForRead):{};return{id:e.tokenizer.id.toString(),type:o.G[e.widgetType],bounds:It(e.bounds),groupId:e.group?e.group.tokenizer.id.toString():void 0,style:n,metadata:Et(e),capabilities:wt(e),clientVisible:!e.isHidden("sdk"),createdUserId:e.historyData.creationUserId.toString(),lastModifiedUserId:e.historyData.lastChangeUserId.toString()}}function It(t){return{x:t.left+t.width/2,y:t.top+t.height/2,top:t.top,left:t.left,bottom:t.bottom,right:t.right,width:t.width,height:t.height}}function Et(t){var e=t.as("metadata");return e?e.getJsonData():{}}var _t={editable:!0};function wt(t){return t.is("capabilities")?t.as("capabilities").getJsonData():_t}function Dt(t){var e=gt(Wt(t.type));if(e)return Object(lt.a)(1),e.create(t).then((function(e){return kt(e,t),Object(ct.a)(e,t),Tt(e,t),e}));throw new Error(L.a.createNotSupported(t.type))}function Ct(t,e){return function(t,e,n){if(Object.keys(n).some((function(t){return"id"!==t&&"clientVisible"!==t&&"clientVisible"!==t}))){if(t)return Object(lt.a)(1),t.update(e,n);throw new Error(L.a.updateNotSupported(Ft(e.widgetType)))}return Promise.resolve(e)}(gt(t.widgetType),t,e).then((function(t){return kt(t,e),Object(ct.a)(t,e),Tt(t,e),t}))}function Tt(t,e){return xt(t,"capabilities",e)}function xt(t,e,n){if(n&&n[e]){var r=Z.a.setNsData(e,n[e]);Object(N.a)().update([t],[r])}return t}function kt(t,e){return void 0!==e.clientVisible&&t.setHidden("sdk",!e.clientVisible),t}function At(t){if("object"!==typeof t)throw new Error(L.a.creatingWidgetIsNotAnObject());if("string"!==typeof t.type)throw new Error(L.a.typeFieldIsRequiredForCreate());var e=gt(Wt(t.type));if(!e)throw new Error(L.a.createNotSupported(t.type));!function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=e.supportedFieldsForWrite;if(r[n])r[n](t[n]);else if(Lt[n])Lt[n](t[n]);else Rt.includes(n)||L.a.fieldIsUnsupported(n,Ft(e.widgetType))}}(t,e)}function Pt(t){if("object"!==typeof t)throw new Error(L.a.updatingWidgetIsNotAnObject());if("string"!==typeof t.id)throw new Error(L.a.idFieldIsRequiredForUpdate())}var Rt=["id","type","bounds","groupId","zIndex","createdUserId","lastModifiedUserId","metadata","clientVisible","capabilities","plainText"],Lt={metadata:Object(f.f)("metadata"),clientVisible:Object(f.c)("clientVisible"),capabilities:Object(f.f)("capabilities")};function Nt(){return y.canvasHistory.awaitTransactionComplete(y.canvasHistory.getCurrentTransactionId())}function Ut(t){if(Array.isArray(t))return function(t){return"string"===typeof t[0]}(t)?t:t.map((function(t){return t.id}));if("string"===typeof t)return[t];if(t&&t.id)return[t.id];throw new Error(L.a.noInputWidgetsPassed())}function Mt(t){if(Array.isArray(t))return t;if("object"===typeof t)return[t];throw new Error(L.a.noWidgetsPassedForCreateOrUpdate())}function Bt(t){var e=y.objectsRegistry.getObjectById(st.a.fromString(t));return e&&e.isPresent?e:void 0}function Wt(t){return o.G[t.toUpperCase()]}function Ft(t){return o.G[t]}},1126:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n(190),o=n(1127),i=n(182),a=n(613),c=n(200);function s(){n(546),Object(i.b)().directive("searchInput",l),Object(i.b)().component("searchInputReact",Object(c.c)(t)(a.a,["key","search","placeholder","throttle","onChange","onFocus","onBlur"]))}function l(){return Object(r.a)({restrict:"E",template:n(1128),controller:o.a,controllerAs:"controller",scope:{search:"=",placeholder:"=",throttle:"=",onChange:"=",onFocus:"=",onBlur:"="}})}}).call(this,n(111)(t))},11269:function(t,e,n){"use strict";var r=n(0),o=n(619),i=n(181),a=n(224),c=n(2933),s=n.n(c),l=n(1161),u=n(2944),d=n(301),p=n(1058),h=n(203),f=n(4519),g=n(188),m=n.n(g),b=n(608),y=n(53),v=n(1162),O=n(1288),j=n(1889),S=n(189),I=n(27),E=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.widgetsReceiver=r,o}return Object(r.d)(e,t),e.prototype.createByURL=function(t,e){return void 0===e&&(e={}),e.type="IMAGE",e.url=t,this.widgetsReceiver.create(e).then((function(t){return t[0]}))},e.prototype.get=function(){return this.widgetsReceiver.get({type:"image"})},Object(r.c)([o.d,v.b],e.prototype,"createByURL",null),Object(r.c)([o.d,v.b],e.prototype,"get",null),e}(l.a),_=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.widgetsReceiver=r,o}return Object(r.d)(e,t),e.prototype.create=function(t){return void 0===t&&(t={}),Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return t.type="STICKER",[2,this.widgetsReceiver.create(t).then((function(t){return t[0]}))]}))}))},e.prototype.get=function(){return this.widgetsReceiver.get({type:"sticker"})},Object(r.c)([o.d,v.b],e.prototype,"create",null),Object(r.c)([o.d,v.b],e.prototype,"get",null),e}(l.a),w=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.widgetsReceiver=r,o}return Object(r.d)(e,t),e.prototype.create=function(t){return void 0===t&&(t={}),Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return t.type="SHAPE",[2,this.widgetsReceiver.create(t).then((function(t){return t[0]}))]}))}))},e.prototype.update=function(t,e){var n=(t=Object(p.a)(t)).map((function(t){return Object(r.a)({id:t},e)}));return this.widgetsReceiver.update(n)},Object(r.c)([o.d,v.b],e.prototype,"create",null),Object(r.c)([o.d,v.b],e.prototype,"update",null),e}(l.a),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.images=new E(e.controller,e.root,e),e.stickers=new _(e.controller,e.root,e),e.shapes=new w(e.controller,e.root,e),e}return Object(r.d)(e,t),e.prototype.get=function(t){var e=Object(r.j)(Object(d.a)().framesList.items,i.widgetController.existingWidgets),n=Object(p.m)(e);return t&&("string"===typeof t.type&&(t.type=t.type.toUpperCase()),n=s()(n,t)),Promise.resolve(n)},e.prototype.create=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e,n,o=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return t=Object(p.h)(t),this.sendWidgetsBeforeCreateStat(t),t.forEach((function(t){Object(p.d)(t),Object(f.b)(t,o.controller)})),e=t.map((function(t){return Object(p.n)(t)})),[4,Promise.all(e)];case 1:return n=r.sent(),[4,Object(p.c)()];case 2:return r.sent(),this.sendWidgetsCreatedStat(n),[2,n.map((function(t){return Object(p.k)(t)}))]}}))}))},e.prototype.update=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e,n,o=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return t=Object(p.h)(t),this.sendWidgetsBeforeUpdateStat(t),e=[],t.forEach((function(t){Object(f.b)(t,o.controller),Object(p.e)(t);var n=Object(p.p)(t.id);n?e.push(n):O.a.updatingWidgetNotFound(t.id)})),n=t.map((function(t,n){return Object(p.r)(e[n],t)})),[4,Object(p.c)()];case 1:return r.sent(),[2,Promise.all(n).then((function(t){return o.sendWidgetsUpdatedStat(t),t.map((function(t){return Object(p.k)(t)}))}))]}}))}))},e.prototype.transformDelta=function(t,e,n,o){return Object(r.b)(this,void 0,Promise,(function(){var a,c,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:return t=Object(p.a)(t),Object(j.a)(100),a=[],c=[],t.forEach((function(t){var r=Object(p.p)(t);if(r){var i=new h.J;(e||n)&&(i.positionData=new h.r(r.x+(e||0),r.y+(n||0))),o&&(i.rotationData=new h.z(r.rotation+o)),a.push(r),c.push(i)}})),i.transformationController.transform(a,c),[4,Object(p.c)()];case 1:return r.sent(),t=Object(p.a)(t),s=[],t.forEach((function(t){var e=Object(p.p)(t);e&&s.push(e)})),[2,Object(p.m)(s)]}}))}))},e.prototype.deleteById=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return t=Object(p.a)(t),this.sendWidgetsBeforeRemoveStat(t),Object(j.a)(t.length),e=[],t.forEach((function(t){var n=Object(p.p)(t);n&&e.push(n.tokenizer)})),e.length>0?(i.presenceController.removeObjects(e),[4,Object(p.c)()]):[3,2];case 1:n.sent(),this.sendWidgetsRemovedStat(e.map((function(t){return t.id.toString()}))),n.label=2;case 2:return[2]}}))}))},e.prototype.bringForward=function(t){t=Object(p.a)(t),Object(j.a)(t.length);var e=t.map((function(t){return Object(p.p)(t)}));return i.widgetController.setTopmostZIndex(e),Promise.resolve()},e.prototype.sendBackward=function(t){t=Object(p.a)(t),Object(j.a)(t.length);var e=t.map((function(t){return Object(p.p)(t)}));return i.widgetController.setLowermostZIndex(e),Promise.resolve()},e.prototype.__blinkWidget=function(t){return Object(p.a)(t).forEach((function(t){var e=Object(p.p)(t);e&&i.widgetController.blinkWidget(e)})),Promise.resolve()},e.prototype.__getIntersectedObjects=function(t){var e="width"in t?t:{x:t.x,y:t.y,width:1,height:1},n=m.a.Rectangle.createFromRect(e),r=i.quadTree.getIntersectedObjects(n,b.a.TOUCH);return Promise.resolve(Object(p.m)(r))},e.prototype.areAllWidgetsLoaded=function(){return Promise.resolve(i.widgetController.isAllWidgetsLoaded())},e.prototype.sendWidgetsCreatedStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){return Object(S.sdkWidgetCreated)(t.tokenizer.id.toString(),e.initiatorId,e.accountId,e.boardId,e.appId,I.G[t.widgetType])}))},e.prototype.sendWidgetsUpdatedStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){Object(S.sdkWidgetUpdated)(t.tokenizer.id.toString(),e.initiatorId,e.accountId,e.boardId,e.appId,I.G[t.widgetType])}))},e.prototype.sendWidgetsRemovedStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){Object(S.sdkWidgetRemoved)(t,e.initiatorId,e.accountId,e.boardId,e.appId)}))},e.prototype.sendWidgetsBeforeCreateStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){Object(S.sdkMethodWidgetsUsed)("create",e.initiatorId,e.accountId,e.boardId,e.appId,t.type,{id:t.id})}))},e.prototype.sendWidgetsBeforeUpdateStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){Object(S.sdkMethodWidgetsUsed)("update",e.initiatorId,e.accountId,e.boardId,e.appId,t.type,{id:t.id})}))},e.prototype.sendWidgetsBeforeRemoveStat=function(t){var e=this.getStatCommonParameters();t.forEach((function(t){Object(S.sdkMethodWidgetsUsed)("deleteById",e.initiatorId,e.accountId,e.boardId,e.appId,void 0,{id:t})}))},e.prototype.getStatCommonParameters=function(){return{accountId:this.controller.getAccountId(),appId:this.controller.appKey,boardId:this.controller.getBoardId(),initiatorId:this.controller.getUserId()}},Object(r.c)([o.d,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"get",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"create",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"update",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"transformDelta",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"deleteById",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"bringForward",null),Object(r.c)([o.d,Object(v.a)(u.a.EDIT_CONTENT),Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"sendBackward",null),Object(r.c)([o.d,v.c],e.prototype,"__blinkWidget",null),Object(r.c)([o.d,v.c,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"__getIntersectedObjects",null),Object(r.c)([o.d],e.prototype,"areAllWidgetsLoaded",null),Object(r.c)([Object(o.e)(E)],e.prototype,"images",void 0),Object(r.c)([Object(o.e)(_)],e.prototype,"stickers",void 0),Object(r.c)([Object(o.e)(w)],e.prototype,"shapes",void 0),e}(l.a),C=n(340),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.get=function(){return Promise.resolve(Object(C.a)().getAllComments().map((function(t){return Object(p.f)(t)})))},Object(r.c)([o.d,v.c,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"get",null),e}(l.a),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.get=function(){return Promise.resolve(i.groupController.getPresentedGroups().map((function(t){return Object(p.g)(t)})))},Object(r.c)([o.d,v.c,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"get",null),e}(l.a),k=n(194),A=n(2946),P=n(184),R=n(3891),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.get=function(){var t=a.a.getInfo();return Promise.resolve({id:t.id,title:t.title,description:t.description,owner:t.owner?Object(A.b)(t.owner):void 0,picture:Object(A.a)(t.picture),currentUserPermissions:Object(R.a)(),lastModifyingUser:Object(A.b)(t.lastModifyingUser),lastViewedByMeDate:t.lastViewedByMeDate,modifiedByMeDate:t.modifiedByMeDate,createdAt:t.createdAt,updatedAt:t.updatedAt})},e.prototype.__getBoardAccessByLink=function(){return Object(r.b)(this,void 0,Promise,(function(){var t;return Object(r.e)(this,(function(e){switch(e.label){case 0:return Object(j.a)(100),[4,P.a.boards.selectById(a.a.getInfo().id).get({fields:"sharingPolicy"})];case 1:return t=e.sent(),[2,Promise.resolve(t.sharingPolicy)]}}))}))},e.prototype.__setBoardAccessByLink=function(t){return Object(r.b)(this,void 0,Promise,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return Object(j.a)(100),[4,P.a.boards.selectById(a.a.getInfo().id).changePublicity(t)];case 1:return e.sent(),[4,Object(k.a)().currentBoard.updateUserPermissions()];case 2:return e.sent(),[2,this.__getBoardAccessByLink()]}}))}))},Object(r.c)([o.d],e.prototype,"get",null),Object(r.c)([o.d,v.c,Object(v.a)(u.a.EDIT_CONTENT)],e.prototype,"__getBoardAccessByLink",null),Object(r.c)([o.d,v.c,Object(v.a)(u.a.EDIT_CONTENT)],e.prototype,"__setBoardAccessByLink",null),e}(l.a),N=n(2005),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.enterSelectWidgetsMode=function(t){return new Promise((function(e){var n=function(t){"Escape"===t.key&&(e({selectedWidgets:[]}),Object(N.a)().exitSelectionMode(),window.removeEventListener("keydown",n))};window.addEventListener("keydown",n),Object(N.a)().enterSelectionMode((function(t){e({selectedWidgets:t.map((function(t){return Object(p.k)(t)}))}),Object(N.a)().exitSelectionMode(),window.removeEventListener("keydown",n)}),void 0,t&&t.allowMultiSelection)}))},e.prototype.get=function(){return Promise.resolve(i.mySelection.selection.map((function(t){return Object(p.k)(t)})))},e.prototype.selectWidgets=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){return t=Object(p.a)(t),i.mySelection.clearSelection(),e=t.map((function(t){return Object(p.p)(t)})).filter((function(t){return void 0!==t})),i.mySelection.addToSelection(e),[2,this.get()]}))}))},e.prototype.clear=function(){return i.mySelection.clearSelection(),Promise.resolve()},Object(r.c)([o.d,v.c],e.prototype,"enterSelectWidgetsMode",null),Object(r.c)([o.d,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"get",null),Object(r.c)([o.d,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"selectWidgets",null),Object(r.c)([o.d],e.prototype,"clear",null),e}(l.a),M=n(239),B=n(375),W=n(443),F=n(211),z=n(205),K=n(202),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loaded=!1,e}return Object(r.d)(e,t),e.prototype.init=function(){this.params.fullscreen?this.element.find(".md-content").css({width:document.body.clientWidth,height:document.body.clientHeight}):this.element.find(".md-content").css({width:Math.min(document.body.clientWidth,this.params.maxWidth),height:Math.min(document.body.clientHeight,this.params.maxHeight)})},e.prototype.getIFrameURL=function(){return this.params.iframeUrl},e.prototype.getIFrameAllow=function(){return this.params.iframeAllow||""},e.prototype.onLoad=function(){this.loaded=!0},e}(n(206).b),H=n(324),V=n(303),q=n(240),J=n(315),Y=n(551),Q=n(213),X=n(244),$=n(285),Z=n(3942),tt="There is no opened iframe modal",et="microphone; camera";function nt(t){return Object(X.a)().$sce.trustAsResourceUrl(t)}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.openLeftSidebar=function(t,e){var n=this;return new Promise((function(e){n.controller.deactivateBottomBarButtonHandler=function(){Object(M.a)().leftSidebar.deactivate()},Object(M.a)().leftSidebar.activate(n.controller.appKey,{iframeURL:nt(n.controller.getIframeURL(t)),iframeAllow:et}),Object(M.a)().leftSidebar.activePluginsChanged.addOnce((function(){n.controller.deactivateBottomBarButtonHandler=void 0,e()}))}))},e.prototype.openLibrary=function(t,e){var n=this;if(void 0===e&&(e=Z.a),!e||!e.title)throw new Error("'title' option should be provided");return new Promise((function(r){n.controller.deactivateToolBarButtonHandler=function(){Object(B.b)().close()},Object(B.b)().showIframeContent(n.controller.appKey,nt(n.controller.getIframeURL(t)),e,et),Object(B.b)().activePluginIdChanged.addOnce((function(){n.controller.deactivateToolBarButtonHandler=void 0,r()}))}))},e.prototype.openModal=function(t,e){var r={iframeUrl:nt(this.controller.getIframeURL(t)),fullscreen:e&&"fullscreen"in e&&e.fullscreen,maxWidth:e&&"width"in e&&e.width||800,maxHeight:e&&"height"in e&&e.height||600,iframeAllow:et};return new Promise((function(t){var e,o=Object(F.a)().show((e=r,Object(V.a)(),Object(H.a)(),n(7943),z.b(K.a.IFRAME_EXTENSION_POINT,G,n(7945),e)));o.submitted.add(t),o.canceled.add(t)}))},e.prototype.openBottomPanel=function(t,e){var n=this;return new Promise((function(r){n.controller.deactivateBottomBarButtonHandler=function(){n.closeBottomPanel()};var o=(null===e||void 0===e?void 0:e.width)||120,i=(null===e||void 0===e?void 0:e.height)||48;o=Math.min(Math.max(o,80),320),i=Math.min(Math.max(i,48),200),Object($.a)().bottomPanel.activate(n.controller.appKey,{iframeURL:nt(n.controller.getIframeURL(t)),iframeAllow:et,width:o,height:i}),Object($.a)().bottomPanel.activePluginsChanged.addOnce((function(){n.controller.deactivateBottomBarButtonHandler=void 0,r()}))}))},e.prototype.closeBottomPanel=function(t){Object($.a)().bottomPanel.deactivate(this.controller.appKey)},e.prototype.closeLeftSidebar=function(t){Object(M.a)().leftSidebar.deactivate(this.controller.appKey)},e.prototype.closeLibrary=function(t){if(Object(W.a)().getActivePluginId()!==this.controller.appKey)throw new Error(tt);Object(B.b)().close()},e.prototype.closeModal=function(t){var e=Object(F.a)().currentModal;if(!e||Object(F.a)().getCurrentModalName()!==K.a.IFRAME_EXTENSION_POINT)throw new Error(tt);e.submit(t)},e.prototype.__hideButtonsPanels=function(t){this.applyPanelsVisible(t,!1)},e.prototype.__showButtonsPanels=function(t){this.applyPanelsVisible(t,!0)},e.prototype.applyPanelsVisible=function(t,e){var n=[];(n="all"===t?["toolbar","top","bottomBar","map"]:"string"===typeof t?[t]:t).includes("toolbar")&&Object(q.a)().setPanelVisible(J.a.CANVAS_TOOLS,e),n.includes("top")&&Object(q.a)().setPanelVisible(J.a.CANVAS_TOP,e),n.includes("bottomBar")&&Object(q.a)().setPanelVisible(J.a.BOTTOM_BAR,e),n.includes("map")&&(Object(q.a)().setPanelVisible(J.a.MINI_MAP,e),Object(q.a)().setPanelVisible(J.a.ZOOM_BUTTON,e))},e.prototype.__limitToolbarMode=function(t){switch(t.toLowerCase()){case"editor":Y.e(y.D.EDITOR);break;case"commentor":Y.e(y.D.COMMENTATOR);break;case"viewer":Y.e(y.D.VIEWER);break;default:throw new Error("Unknown toolbar mode '"+t+"'")}},e.prototype.__clearToolbarModeLimit=function(){this.__limitToolbarMode("editor")},e.prototype.__selectDefaultTool=function(){Object(Q.a)().setDefaultTool()},e.prototype.resizeTo=function(t){},e.prototype.resizeToInner=function(t){var e=this.root.currentIframeInfo.iframeElement.getAttribute("data-container-type");switch(e){case"sandbox":throw new Error("Use 'resizeTo' in iframe custom views only");case"bottom-panel":Object($.a)().bottomPanel.changeSize(t);break;case"modal":var n=Object(F.a)().currentModal;null!==n&&n.changeSize(t);break;case"library":t.height&&Object(B.b)().changeHeight(t.height);break;case"left-sidebar":case"right-sidebar":default:throw new Error("Unknown containerType '"+e+"'")}},e.prototype.initDraggableItemsContainer=function(t,e){},Object(r.c)([o.d],e.prototype,"openLeftSidebar",null),Object(r.c)([o.d],e.prototype,"openLibrary",null),Object(r.c)([o.d],e.prototype,"openModal",null),Object(r.c)([o.d],e.prototype,"openBottomPanel",null),Object(r.c)([o.d],e.prototype,"closeBottomPanel",null),Object(r.c)([o.d],e.prototype,"closeLeftSidebar",null),Object(r.c)([o.d],e.prototype,"closeLibrary",null),Object(r.c)([o.d],e.prototype,"closeModal",null),Object(r.c)([o.d,v.c],e.prototype,"__hideButtonsPanels",null),Object(r.c)([o.d,v.c],e.prototype,"__showButtonsPanels",null),Object(r.c)([o.d,v.c],e.prototype,"__limitToolbarMode",null),Object(r.c)([o.d,v.c],e.prototype,"__clearToolbarModeLimit",null),Object(r.c)([o.d,v.c],e.prototype,"__selectDefaultTool",null),Object(r.c)([o.d],e.prototype,"resizeToInner",null),e}(l.a),ot=n(539),it=n(2234),at=n(192),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.get=function(){var t=Object(M.a)(),e={left:t.leftSidebar.visibleWidth,right:t.rightSidebar.visibleWidth,top:0,bottom:0},n=this.translateOffsetFromScreenToCanvas(e),r=i.canvasController.viewport,o=this.addMarginToRect(r,n);return Promise.resolve(o)},e.prototype.set=function(t,e){var n,r=this,o=null!==(n=null===e||void 0===e?void 0:e.padding)&&void 0!==n?n:{top:0,left:0,bottom:0,right:0},a=Object(M.a)(),c={left:a.leftSidebar.visibleWidth+o.left,right:a.rightSidebar.visibleWidth+o.right,top:o.top,bottom:o.bottom},s=this.addScreenPaddingToViewport(t,c),l=m.a.Rectangle.createFromRect(s);return(null===e||void 0===e?void 0:e.animationTimeInMS)?new Promise((function(t){var n,o=null!==(n=null===e||void 0===e?void 0:e.animationTimeInMS)&&void 0!==n?n:0;ot.a.setViewport(l).jumpWithAnimation(o),setTimeout((function(){r.get().then(t)}),10*o)})):(i.canvasController.setViewport(l),Promise.resolve(s))},e.prototype.getScale=function(){return Promise.resolve(i.canvasController.canvasScale)},e.prototype.getBoardUIPadding=function(){throw new Error("fake implementation to mute TypeScript")},e.prototype.__mask=function(t,e){e||(e={top:0,bottom:0,left:0,right:0});var n=this.addScreenPaddingToViewport(t,e);Object(it.a)().showMask(t),i.canvasController.restrictMoveAndScaleLimits(m.a.Rectangle.createFromRect(n))},e.prototype.__unmask=function(){Object(it.a)().hideMask(),i.canvasController.freeMoveAndScaleLimits()},e.prototype.translateOffsetFromScreenToCanvas=function(t){return{left:t.left*i.canvasController.canvasScale,right:t.right*i.canvasController.canvasScale,top:t.top*i.canvasController.canvasScale,bottom:t.bottom*i.canvasController.canvasScale}},e.prototype.addMarginToRect=function(t,e){return{x:t.x+e.left,y:t.y+e.top,width:t.width-(e.left+e.right),height:t.height-(e.top+e.bottom)}},e.prototype.addScreenPaddingToViewport=function(t,e){var n=document.body.clientHeight,r=document.body.clientWidth,o=(n-e.top-e.bottom)/t.height,i=(r-e.left-e.right)/t.width;return{x:t.x-e.left/i,y:t.y-e.top/o,width:t.width+(e.left+e.right)/i,height:t.height+(e.top+e.bottom)/o}},e.prototype.getViewport=function(){var t=i.canvasController.viewport;return Promise.resolve({x:t.x,y:t.y,width:t.width,height:t.height})},e.prototype.setViewport=function(t,e){e||(e={top:0,bottom:0,left:0,right:0});var n=this.addScreenPaddingToViewport(t,e);return i.canvasController.setViewport(m.a.Rectangle.createFromRect(n)),this.getViewport()},e.prototype.setViewportWithAnimation=function(t){var e=this;return new Promise((function(n){ot.a.setViewport(m.a.Rectangle.createFromRect(t)).jumpWithAnimation(100),setTimeout((function(){e.getViewport().then(n)}),1e3)}))},e.prototype.getZoom=function(){return Promise.resolve(i.canvasController.canvasScale)},e.prototype.setZoom=function(t){var e=this;return new Promise((function(n){i.canvasActions.applyScale(t),setTimeout((function(){e.getZoom().then(n)}),800)}))},e.prototype.zoomToObject=function(t){var e=Object(p.a)(t).map((function(t){return Object(p.p)(t)})).filter((function(t){return"undefined"!==typeof t}));if(e.length>0){var n=Object(at.g)(e);ot.a.setViewport(n).calculateScreenOffset().jumpWithAnimation()}return new Promise((function(t){setTimeout(t,200)}))},Object(r.c)([o.d],e.prototype,"get",null),Object(r.c)([o.d],e.prototype,"set",null),Object(r.c)([o.d],e.prototype,"getScale",null),Object(r.c)([o.d,v.c],e.prototype,"__mask",null),Object(r.c)([o.d,v.c],e.prototype,"__unmask",null),Object(r.c)([o.d,v.b],e.prototype,"getViewport",null),Object(r.c)([o.d,v.b],e.prototype,"setViewport",null),Object(r.c)([o.d,v.b],e.prototype,"setViewportWithAnimation",null),Object(r.c)([o.d,v.b],e.prototype,"getZoom",null),Object(r.c)([o.d,v.b],e.prototype,"setZoom",null),Object(r.c)([o.d,v.b],e.prototype,"zoomToObject",null),e}(l.a),st=n(2197),lt=n(3890),ut=n(1092),dt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.metadataPath="app_metadata/"+r.controller.appKey,r}return Object(r.d)(e,t),e.prototype.get=function(){var t=Object(ut.a)().documentJson.getJson(this.metadataPath);return Promise.resolve(t||{})},e.prototype.update=function(t){var e=Object(ut.a)().documentJson;e.jsonUpdate(this.metadataPath,t),Object(j.a)(1);var n=e.getJson(this.metadataPath)||{};return Promise.resolve(n)},Object(r.c)([v.c,o.d,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"get",null),Object(r.c)([v.c,o.d,Object(v.d)(y.o.BOARDS_WRITE)],e.prototype,"update",null),e}(l.a),pt=n(4520),ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info=new L(e.controller,e.root),e.widgets=new D(e.controller,e.root),e.tags=new lt.b(e.controller,e.root),e.metadata=new dt(e.controller,e.root),e.comments=new T(e.controller,e.root),e.groups=new x(e.controller,e.root),e.selection=new U(e.controller,e.root),e.ui=new rt(e.controller,e.root),e.viewport=new ct(e.controller,e.root),e}return Object(r.d)(e,t),e.prototype.getOnlineUsers=function(){return Object(pt.a)()},e.prototype.__getParamsFromURL=function(){var t=new URL(location.href),e=JSON.parse(t.searchParams.get("miro_sdk"));return Promise.resolve(e||{})},e.prototype.__disableLeftClickOnCanvas=function(){st.a.leftClickEnabled=!1},e.prototype.__enableLeftClickOnCanvas=function(){st.a.leftClickEnabled=!0},e.prototype.getAllObjects=function(){return Promise.resolve(Object(p.m)(i.quadTree.allObjects))},e.prototype.openLeftSidebar=function(t){this.ui.openLeftSidebar(t)},e.prototype.openLibrary=function(t,e){this.ui.openLibrary(e,{title:t,isOldStyles:!0})},e.prototype.openModal=function(t,e){void 0===e&&(e={}),this.ui.openModal(t)},e.prototype.getInfo=function(){return Promise.resolve(a.a.getInfo())},e.prototype.getSelection=function(){return Promise.resolve(i.mySelection.selection.map((function(t){return Object(p.k)(t)})))},Object(r.c)([Object(o.e)(L)],e.prototype,"info",void 0),Object(r.c)([Object(o.e)(D)],e.prototype,"widgets",void 0),Object(r.c)([Object(o.e)(lt.b)],e.prototype,"tags",void 0),Object(r.c)([Object(o.e)(dt)],e.prototype,"metadata",void 0),Object(r.c)([Object(o.e)(T)],e.prototype,"comments",void 0),Object(r.c)([Object(o.e)(x)],e.prototype,"groups",void 0),Object(r.c)([Object(o.e)(U)],e.prototype,"selection",void 0),Object(r.c)([Object(o.e)(rt)],e.prototype,"ui",void 0),Object(r.c)([Object(o.e)(ct)],e.prototype,"viewport",void 0),Object(r.c)([o.d,v.c],e.prototype,"getOnlineUsers",null),Object(r.c)([o.d,v.c],e.prototype,"__getParamsFromURL",null),Object(r.c)([o.d,v.c],e.prototype,"__disableLeftClickOnCanvas",null),Object(r.c)([o.d,v.c],e.prototype,"__enableLeftClickOnCanvas",null),Object(r.c)([o.d],e.prototype,"getAllObjects",null),Object(r.c)([o.d],e.prototype,"openLeftSidebar",null),Object(r.c)([o.d],e.prototype,"openLibrary",null),Object(r.c)([o.d],e.prototype,"openModal",null),Object(r.c)([o.d],e.prototype,"getInfo",null),Object(r.c)([o.d],e.prototype,"getSelection",null),e}(l.a);e.a=ht},1127:function(t,e,n){"use strict";var r=n(222),o=n.n(r),i=function(){function t(t){var e=this;this.scope=t;var n=this.onChangeHandler;t.$watchGroup(["throttle","onChange"],(function(){e.scope.onChange&&e.scope.throttle&&e.scope.throttle>0?e.onChangeHandler=o()(n,e.scope.throttle,{leading:!1,trailing:!0}):e.onChangeHandler=n}))}return t.prototype.onFocusHandler=function(){this.scope.onFocus&&this.scope.onFocus()},t.prototype.onBlurHandler=function(){this.scope.onBlur&&this.scope.onBlur()},t.prototype.onChangeHandler=function(){this.scope.onChange&&this.scope.onChange(this.scope.search||"")},t.$inject=["$scope","$element"],t}();e.a=i},1128:function(t,e,n){t.exports='<div class="search-input">\n\t<input\n\t\ttype="text"\n\t\tclass="search-input__input rtb-input"\n\t\tplaceholder="{{placeholder || \'Search\'}}"\n\t\tng-focus="controller.onFocusHandler()"\n\t\tng-blur="controller.onBlurHandler()"\n\t\tng-change="controller.onChangeHandler()"\n\t\tng-model="search"\n\t/>\n\t<div class="search-input__icon">\n\t\t<svg     role="none" ><use xlink:href="'+n(656)+'"></use></svg>\n\t</div>\n</div>\n'},1161:function(t,e,n){"use strict";var r=function(t,e){this.controller=t,this.root=e};e.a=r},1162:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return s}));var r=n(3891),o=n(619);function i(t){return function(e,n,o){void 0===o&&(o=Object.getOwnPropertyDescriptor(e,n));var i=o.value;return o.value=function(){return Object(r.a)().includes(t)?i.apply(this,arguments):Promise.reject("Operation requires '"+t+"' which user does not have")},o}}function a(t){return function(e,n,r){void 0===r&&(r=Object.getOwnPropertyDescriptor(e,n));var i=r.value;return r.value=function(){var e=this;if(!e.controller.isCurrentUserAuthorizedScope(t)){var a="root"in e?e.root:e,c=Object(o.c)(a,r.value)||n;throw new Error("Method '"+c+"' requires scope '"+t+"'")}return i.apply(this,arguments)},r}}function c(t,e,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(t,e));var r=n.value;return n.value=function(){return console.info("'"+e+"' is experimental api. It can be changed at any moment."),r.apply(this,arguments)},n}function s(t,e,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(t,e));var r=n.value;return n.value=function(){return console.info("'"+e+"' is deprecated api. It will be removed soon."),r.apply(this,arguments)},n}},1288:function(t,e,n){"use strict";e.a={wrongInputWidgetArgument:function(){return"..."},valueHasNotAssignableType:function(t,e){return"Value '"+t+"' is not assignable to '"+e+"'"},rateLimitExceeded:function(t,e){return"Plugins calls are limited for "+t+" points per "+e+"sec"},totalPointsLimitsExceeded:function(){return"Total points limits exceeded for all plugins. Please reload the page"},noInputWidgetsPassed:function(){return"No widgets passed. Method can accept string[] or {id: string}[]"},noWidgetsPassedForCreateOrUpdate:function(){return"Wrong argument. Please, pass array of widgets"},fieldIsUnsupported:function(t,e){return"Field '"+t+"' is unsupported for '"+e+"' widget"},updatingWidgetNotFound:function(t){return"Widget with id="+t+" not found and skipped"},createNotSupported:function(t){return"Sorry, miro.board.widgets.create() does not support widgetType '"+t+"' yet"},updateNotSupported:function(t){return"Sorry, miro.board.widgets.update() does not support widgetType '"+t+"' yet"},creatingWidgetIsNotAnObject:function(){return"Wrong argument passed to miro.board.widgets.create(widgets: {type: string; [index: string]: any}[]).\n\n\t\t'widgets' should have 'object' type.\n"},updatingWidgetIsNotAnObject:function(){return"Wrong argument passed to miro.board.widgets.update(widgets: {id: string; [index: string]: any}[]).\n\n\t\t'widgets' should have 'object' type.\n"},typeFieldIsRequiredForCreate:function(){return"Wrong argument passed to miro.board.widgets.create(widgets: {type: string; [index: string]: any}[]).\n\n\t\tField 'type:string' is required.\n"},idFieldIsRequiredForUpdate:function(){return"Wrong argument passed to miro.board.widgets.update(widgets: {id: string; [index: string]: any}[]).\n\n\tField 'id:string' is required\n"},equalStartAndEndWidgetsInLine:function(){return"'line.startWidgetId' can not be equal 'line.endWidgetId'"},urlSchemaNotWhitelisted:function(t,e){return"URL schema not supported for '"+t+"'. Supported schemas are: "+e},pluginUrlHasWrongFormat:function(t){return'Plugin main uri "'+t+'" has wrong format'},pluginUrlMustBeAbsoluteOutsidePlugin:function(){return"Url must be absolute when API is called outside plugin"},tagDoesntExist:function(t){return"Tag with id: "+t+" does not exist"},widgetDoesntExist:function(t){return"Widget with id: "+t+" does not exist"},widgetWithTypeDoesntSupportTags:function(t,e){return"Widget with id: "+t+" - "+e+" does not support tags"},tagWithTitleAlreadyExists:function(t){return"Widget with title: "+t+" already exists"},tagMustHaveNonEmptyTitle:function(){return"The tag must have a non-empty title"},totalTagsOnBoardLimitsExceeded:function(){return"Total tags on board limits exceeded"},unsupportedFieldForTag:function(t){return"Field '"+t+"' is unsupported for tag"},svgContentFieldIsRequired:function(){return"Field 'content' is required"},invalidSvgContent:function(){return"Invalid svg content"},maximumSvgSizeExceeded:function(t,e){return"Exceeded maximum SVG size. "+t+"/"+e},svgSizeNotSet:function(){return"Size of the svg element are not set explicitly and will set by default. Use 'width' and 'height' attributes on the svg root."}}},1886:function(t,e,n){"use strict";var r;!function(t){t.HELLO_APP_FROM_IFRAME="HELLO_APP_FROM_IFRAME",t.HELLO_IFRAME_FROM_APP="HELLO_IFRAME_FROM_APP",t.IFRAME_CHANNEL_COMMAND="IFRAME_CHANNEL_COMMAND"}(r||(r={})),e.a=r},1887:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return f}));var r=n(0),o=n(203),i=n(1888),a=n(786),c=n(208),s=n(27),l=n(415);function u(t,e,n){n?"number"!==typeof e.x&&"number"!==typeof e.y||(t.positionData=new o.r(Object(a.a)(e.x,n.x),Object(a.a)(e.y,n.y))):"number"===typeof e.x&&"number"===typeof e.y&&(t.positionData=new o.r(e.x,e.y))}function d(t,e){"number"===typeof e.rotation&&(t.rotationData=new o.z(e.rotation))}function p(t,e){"number"===typeof e.scale&&(t.scaleData=new o.A(e.scale))}function h(t,e,n){if(e.style){var r=n?Object.assign({},n.getStyle(),Object(i.d)(e.style)):Object(i.d)(e.style);t.styleData=new o.D(JSON.stringify(r))}}function f(t,e,n){var o={};e?"number"!==typeof t.x&&"number"!==typeof t.y||(o.position={x:Object(a.a)(t.x,e.x),y:Object(a.a)(t.y,e.y)}):"number"===typeof t.x&&"number"===typeof t.y&&(o.position={x:t.x,y:t.y}),"number"===typeof t.rotation&&(o.rotation={rotation:t.rotation}),"number"===typeof t.scale&&(o.scale={scale:t.scale});var u=function(t,e){if((null===e||void 0===e?void 0:e.widgetType)!==s.G.TEXT||null==t.style)return 0;var n=e?e.getStyle(!1):{};return 0===n[c.a.PADDING]&&t.style.padding===l.a?l.a:n[c.a.PADDING]===l.a&&0===t.style.padding?-l.a:0}(t,e);if(e?"number"===typeof t.width||"number"===typeof t.height?o.size={width:Object(a.a)(t.width,e.width),height:Object(a.a)(t.height,e.height)}:e.width&&e.height&&(o.size={width:Object(a.a)(t.width,e.width)+2*u,height:Object(a.a)(t.height,e.height)+2*u}):"number"===typeof t.width&&"number"===typeof t.height&&(o.size={width:t.width,height:t.height}),t.style){var d=e?e.getStyle():{};o.style=JSON.stringify(Object(r.a)(Object(r.a)({},d),Object(i.d)(t.style)))}return n&&n(o),o}},1888:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return f}));var r=n(282),o=n(208),i=n(1951),a=function(t){return t},c={},s={};function l(t,e,n,r){c[t]={name:e,converter:n||a},s[e]={name:t,converter:r||a}}l("backgroundOpacity",o.a.BACKGROUND_OPACITY),l("backgroundColor",o.a.BACKGROUND_COLOR,d,p),l("stickerBackgroundColor",o.a.STICKER_BACKGROUND_COLOR,d,p),l("borderColor",o.a.BORDER_COLOR,d,p),l("borderWidth",o.a.BORDER_WIDTH),l("borderStyle",o.a.BORDER_STYLE),l("borderOpacity",o.a.BORDER_OPACITY),l("fontSize",o.a.FONT_SIZE),l("fontFamily",o.a.FONT_FAMILY),l("textColor",o.a.TEXT_COLOR,d,p),l("textAlign",o.a.TEXT_ALIGN),l("textAlignVertical",o.a.TEXT_ALIGN_VERTICAL),l("shapeType",o.a.SHAPE_STYLE),l("lineColor",o.a.LINE_COLOR,d,p),l("lineStyle",o.a.LINE_STYLE),l("lineThickness",o.a.LINE_THICKNESS),l("lineType",i.a.STYLE.LINE_TYPE),l("lineStartStyle",i.a.STYLE.HEAD_TYPE_START),l("lineEndStyle",i.a.STYLE.HEAD_TYPE_END),l("padding",o.a.PADDING),l("bold",o.a.BOLD),l("italic",o.a.ITALIC),l("underline",o.a.UNDERLINE),l("strike",o.a.STRIKE),l("highlighting",o.a.HIGHLIGHTING),l("stickerType",o.a.STICKER_TYPE),l("shapeColor",o.a.SHAPE_COLOR,d,p);var u=new r.a;function d(t){return"number"===typeof t?t:"transparent"===t?-1:"string"===typeof t?(u.setColor(t),u.getNumber()):0}function p(t){return-1===t?"transparent":(u.setIntColor(t),u.getHEX())}function h(t){var e={};for(var n in t)if(t.hasOwnProperty(n)&&c.hasOwnProperty(n)){var r=c[n];e[r.name]=r.converter(t[n])}return e}function f(t,e){var n={};if(e)for(var r in t)if(t.hasOwnProperty(r)&&s.hasOwnProperty(r)){var o=s[r];e[o.name]&&(n[o.name]=o.converter(t[r]))}return n}},1889:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1288),o=0,i=0;function a(t){if(o>=5e5)throw new Error(r.a.totalPointsLimitsExceeded());if(i>=1e4)throw new Error(r.a.rateLimitExceeded(1e4,60));o+=t,i+=t}setInterval((function(){i=0}),6e4)},2059:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return u}));var r=n(1022),o=n(181),i=n(186),a=n(219);function c(t,e){var n=e.data.meta.animated,a=t instanceof r.a;if(n&&a||!n&&!a)return o.imageWidgetController.replaceImageByResource(t,e),l(),!0;var c=a?"Sorry, you can replace this image only with animated GIF":"Sorry, you can\u2019t replace this image with animated GIF";return Object(i.a)().showError(c),u(t),!1}function s(t){Object(a.a)().lock([t]),t.startReload()}function l(){Object(a.a)().unlock()}function u(t){t.revertReload(),l()}},2769:function(t,e,n){"use strict";var r=n(274),o=n(0),i=function(t){function e(e,n,r){var o=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,o.prototype),i.name=e,i.commandId=r.commandId,i.pluginId=r.context.pluginId,i}return Object(o.d)(e,t),e}(Error),a=function(t){function e(e,n){var r=this,o=n instanceof Error?n.message:"Some error while command execution";return(r=t.call(this,"CommandExecutionError",o,e)||this).originalError=n,r}return Object(o.d)(e,t),e}(i),c=function(t){function e(e){return t.call(this,"CommandNotFoundError","Command for '"+JSON.stringify(e.context)+"' not found",e)||this}return Object(o.d)(e,t),e}(i),s=function(t){function e(e){return t.call(this,"CommandReceiverNotFoundError","Command "+e.commandId+" not found. Context ='"+JSON.stringify(e.context)+"'",e)||this}return Object(o.d)(e,t),e}(i),l=function(t){function e(e){return t.call(this,"CommandResponseByTokenNotFoundError","Response by token not found "+e.commandToken,e)||this}return Object(o.d)(e,t),e}(i),u=function(){function t(t,e){this.waitingForResponseCommands=new Map,this.sendHandler=t,this.findReceiverByContext=e}return t.prototype.sendCommand=function(t,e,n){var o=this;return new Promise((function(i,a){var c=t+"-"+Object(r.a)(),s={commandId:t,commandToken:c,context:e,data:n};o.waitingForResponseCommands.set(c,{resolve:i,reject:a}),o.sendHandler(s)}))},t.prototype.processCommand=function(e){var n=this;if(e.commandId===t.RESPONSE_COMMAND_ID){var r=this.waitingForResponseCommands.get(e.commandToken);if(r)return this.waitingForResponseCommands.delete(e.commandToken),e.errorInResponse?(r.reject(e.data),Promise.resolve({error:e.data})):(r.resolve(e.data),Promise.resolve({result:e.data}));var o=new l(e);return console.error(o.message),Promise.resolve({error:o})}var i=this.findReceiverByContext(e.context);if(!i){o=new s(e);return console.error(o.message),Promise.resolve({error:o})}var u,d=e.commandId.slice(1).split("."),p=i;if(d.forEach((function(t,e){e===d.length-1?u=p[t]:p=p[t]})),!u){o=new c(e);return console.error(o.message),Promise.resolve({error:o})}try{var h=u.apply(p,e.data);return this.isPromise(h)?h.then((function(t){return n.sendResponse(e,t,!0),{result:t}})).catch((function(t){return console.error(t),n.sendResponse(e,"Some error while command execution",!1),{error:new a(e,t)}})):(this.sendResponse(e,h,!0),Promise.resolve({result:h}))}catch(t){return this.sendResponse(e,"Error while command execution: "+t.message,!1),Promise.resolve({error:new a(e,t)})}},t.prototype.isPromise=function(t){return t&&void 0!==t.then&&void 0!==t.catch},t.prototype.sendResponse=function(e,n,r){var o={commandId:t.RESPONSE_COMMAND_ID,commandToken:e.commandToken,context:e.context,errorInResponse:!r,data:n};this.sendHandler(o)},t.RESPONSE_COMMAND_ID="IS_RESPONSE_FOR_SOME_COMMAND",t}();e.a=u},2933:function(t,e,n){var r=n(2994),o=n(3868),i=n(306),a=n(56);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},2943:function(t,e,n){"use strict";var r=n(0),o=n(619),i=n(2177),a=Promise.resolve(!0);function c(t){return"object"===typeof t&&(t.hasOwnProperty("tooltip")&&"string"===typeof t.tooltip?t.hasOwnProperty("svgIcon")&&"string"===typeof t.svgIcon?!(!t.hasOwnProperty("onClick")||"function"!==typeof t.onClick)||(t.onClick,!1):(t.svgIcon,!1):(t.tooltip,!1))}var s=function(){function t(t){this.buttonsClickListeners={},this.menuItemsClickListeners={},this.currentDraggableItemOptions={},this.eventDispatcher=t}return t.prototype.setDraggableItemOption=function(t,e){this.currentDraggableItemOptions[t]=e},t.prototype.setDraggableItem=function(t){this.currentDraggableItem=t},t.prototype.addOnWidgetSelectedListener=function(t){"function"!==typeof t||(this.getMenuItems=t)},t.prototype.addButtonClickListener=function(t,e){this.buttonsClickListeners[t]=e},t.prototype.onWidgetsSelected=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,o=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,this.getMenuItems(t,e)];case 1:return n=r.sent(),Array.isArray(n)||(n=[n]),n.every(c)?(n.forEach((function(t,e){t.onClick&&(o.menuItemsClickListeners["widgetMenuItems_"+e]=t.onClick)})),[2,n.map((function(t){return{tooltip:t.tooltip,svgIcon:t.svgIcon}}))]):[2,[]]}}))}))},t.prototype.callMenuItemClickListener=function(t){this.menuItemsClickListeners["widgetMenuItems_"+t]()},t.prototype.dispatchEvent=function(t){var e=!1;return this.eventDispatcher.dispatchEvent(new i.a(t.type,t.data,(function(){e=!0}))),Promise.resolve(e)},t.prototype.callExtensionPointClickListener=function(t){this.buttonsClickListeners[t]()},t.prototype.areYouAlive=function(){return a},t.prototype.currentDraggableItemDropped=function(t,e,n){this.currentDraggableItemOptions[t]&&this.currentDraggableItem&&this.currentDraggableItemOptions[t].onDrop(e,n,this.currentDraggableItem)},t.prototype.currentDraggableItemCanceled=function(t){var e,n=null===(e=this.currentDraggableItemOptions[t])||void 0===e?void 0:e.onCancel;n&&n()},Object(r.c)([o.d],t.prototype,"onWidgetsSelected",null),Object(r.c)([o.d],t.prototype,"callMenuItemClickListener",null),Object(r.c)([o.d],t.prototype,"dispatchEvent",null),Object(r.c)([o.d],t.prototype,"callExtensionPointClickListener",null),Object(r.c)([o.d],t.prototype,"areYouAlive",null),Object(r.c)([o.d],t.prototype,"currentDraggableItemDropped",null),Object(r.c)([o.d],t.prototype,"currentDraggableItemCanceled",null),t}();e.a=s},2944:function(t,e,n){"use strict";var r;!function(t){t.EDIT_INFO="EDIT_INFO",t.EDIT_CONTENT="EDIT_CONTENT",t.EDIT_COMMENTS="EDIT_COMMENTS"}(r||(r={})),e.a=r},2945:function(t,e,n){"use strict";var r;!function(t){t.TOP="t",t.MIDDLE="m",t.BOTTOM="b"}(r||(r={})),e.a=r},2946:function(t,e,n){"use strict";function r(t){return{big:t.big,medium:t.medium,small:t.small,image:t.image}}function o(t){return{id:t.id,name:t.name,email:t.email,picture:r(t.picture)}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}))},2947:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(184),o=n(195),i=n(2946),a=n(187),c=n(228),s=n(3).d.createFieldStr({id:{},title:{},createdAt:{},currentUserConnection:{id:{},permissions:{}},installedApplications:{array:!0,fields:{currentUserAuthorization:{},application:{id:{}}}},picture:{}});function l(t,e){if(Object(a.a)().userType!==c.a.REGULAR)throw Error("Account requests not available for guests");return r.a.accounts.selectById(e).get({fields:s}).then((function(e){var n,r=[];e.currentUserConnection&&e.currentUserConnection.permissions.includes(o.e.SETUP_PLUGINS)&&r.push("MANAGE_APPS");var a=e.installedApplications.find((function(e){return e.application.id===t}));return{scopes:(null===(n=null===a||void 0===a?void 0:a.currentUserAuthorization)||void 0===n?void 0:n.scopes)||[],account:{id:e.id,title:e.title,currentUserPermissions:r,createdAt:e.createdAt,picture:Object(i.a)(e.picture)}}}))}},2948:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(0),o=n(184),i=n(3),a=i.d.createFieldStr({currentUserAuthorization:{scopes:{array:!0,fields:{}}},application:{scopes:{array:!0,fields:{}}}});function c(t,e){return Object(r.b)(this,void 0,Promise,(function(){var n,c,s,l,u,d,p,h,f;return Object(r.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.a.accounts.selectById(t).getInstalledApplication(e,{fields:a})];case 1:return n=r.sent(),[3,3];case 2:throw c=r.sent(),s="An error occurred when retrieving application scopes.",l=i.b.getJsonError(c),(u=l.message||c&&c.responseText)&&(s+=" Reason: "+u+"."),new Error(s);case 3:return d=n.currentUserAuthorization,p=n.application,d&&d.scopes?(h=p.scopes.map((function(t){return t.key})),f=d.scopes,[2,h.every((function(t){return f.includes(t)}))]):[2,!1]}}))}))}},2949:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var r,o="data-miro-app-key";!function(t){t.MAIN="MAIN",t.PANEL="PANEL"}(r||(r={}))},3802:function(t,e,n){"use strict";(function(t){var r=n(0),o=n(184),i=n(42),a=n(375),c=n(551),s=n(285),l=n(222),u=n.n(l),d=n(3803),p=n.n(d),h=n(220),f=function(t){function e(){var e=this.constructor,n=t.call(this)||this;return Object.setPrototypeOf(n,e.prototype),n.name="SearchQueryChangedError",n}return Object(r.d)(e,t),e}(Error),g=function(e){var n=this;this.nonInstalledSearchResults=[],this.nonInstalledPluginsLoading=!1,this.searchQuery="",this.librarySearchResultsUpdated=new t.Signal,this.destroy=function(){n.searchId=void 0,c.f.unpinnedPluginsChanged.remove(n.onUnpinnedPluginsChanged),n.librarySearchResultsUpdated.dispose()},this.applySearchQuery=function(t){n.searchId=p()("library-search-"),n.searchQuery=t.trim(),n.nonInstalledPluginsLoading=!1;var e=n.getInstalledSearchResults();if(n.nonInstalledSearchResults=[],n.searchQuery&&Object(a.b)().canShowMarketplaceModal()){n.nonInstalledPluginsLoading=!0;var r=(new Date).getTime();n.getNonInstalledPlugins().then((function(t){var o=(new Date).getTime()-r;n.nonInstalledSearchResults=t,n.nonInstalledPluginsLoading=!1,n.dispatchSearchResultsChanged(),n.sendNonInstalledSearchCompletedStat(o),e.length||t.length||n.sendEmptyResultsStat()})).catch((function(t){if(!(t instanceof f)){var e=(new Date).getTime()-r;n.nonInstalledSearchResults=[],n.nonInstalledPluginsLoading=!1,n.dispatchSearchResultsChanged(),n.sendNonInstalledSearchFailedStat(t,e)}}))}else e.length||n.sendEmptyResultsStat();n.dispatchSearchResultsChanged(),n.sendSearchPanelUsedStat()},this.getInstalledSearchResults=function(){var t=n.searchQuery,e=c.f.getUnpinnedPlugins().map((function(t){return Object(s.a)().toolbar.getButtonByPluginId(t)}));if(t){var r=t.toLowerCase();e=e.filter((function(t){return t.title.toLowerCase().includes(r)}))}return e},this.getNonInstalledSearchResults=function(){return n.nonInstalledSearchResults},this.hasInstalledSearchResults=function(){return n.getInstalledSearchResults().length>0},this.hasNonInstalledSearchResults=function(){return n.getNonInstalledSearchResults().length>0},this.hasSearchResults=function(){return n.hasInstalledSearchResults()||n.hasNonInstalledSearchResults()},this.hasNothingFoundResults=function(){return!!n.searchQuery&&!n.nonInstalledPluginsLoading&&!n.hasSearchResults()},this.getNonInstalledPlugins=function(){var t=n.searchQuery,e=n.searchId;return new Promise((function(r,i){setTimeout((function(){if(e===n.searchId){var a=o.a.getDataByURL(h.a.marketplaceLink()+"search/"+encodeURIComponent(t)+"/").then((function(t){return e!==n.searchId?Promise.reject(new f):t.values.filter((function(t){return!Object(s.a)().isPluginStarted(t.appKey)}))}));r(a)}else i(new f)}),300)}))},this.dispatchSearchResultsChanged=function(){n.librarySearchResultsUpdated.dispatch({installedPlugins:n.getInstalledSearchResults(),nonInstalledPlugins:n.getNonInstalledSearchResults(),nonInstalledPluginsLoading:n.nonInstalledPluginsLoading,searchQuery:n.searchQuery})},this.onUnpinnedPluginsChanged=function(){n.dispatchSearchResultsChanged()},this.sendEmptyResultsStat=function(){Object(i.a)().sendApiEvent("app_library_empty_search_results_shown",{search_query:n.searchQuery,session_id:n.librarySessionId})},this.sendNonInstalledSearchCompletedStat=function(t){Object(i.a)().sendApiEvent("app_library_non_installed_search_completed",{has_search_results:n.getNonInstalledSearchResults().length>0,duration:t,search_query:n.searchQuery,session_id:n.librarySessionId})},this.sendNonInstalledSearchFailedStat=function(t,e){var r,o;t instanceof XMLHttpRequest&&(r=t.status,""!==t.responseType&&"text"!==t.responseType||(o=t.responseText)),Object(i.a)().sendApiEvent("app_library_non_installed_search_failed",{duration:e,search_query:n.searchQuery,session_id:n.librarySessionId,response_code:r,response_text:o})},this.sendSearchPanelUsedStat=function(){var t=n.searchQuery,e=n.getInstalledSearchResults().length>0;t&&n.debouncedSendSearchPanelUsedStat(e,t)},this.debouncedSendSearchPanelUsedStat=u()((function(t,e){Object(i.a)().sendApiEvent("search_panel_used",{result_showed:t,source:"library",query:e,session_id:n.librarySessionId})}),300),this.librarySessionId=e,c.f.unpinnedPluginsChanged.add(this.onUnpinnedPluginsChanged)};e.a=g}).call(this,n(110))},3803:function(t,e,n){var r=n(348),o=0;t.exports=function(t){var e=++o;return r(t)+e}},3804:function(t,e,n){t.exports='<div class="library-root-container">\n\t<div class="library-root__search-box search-input">\n\t\t<input\n\t\t\ttype="text"\n\t\t\tclass="rtb-input search-input__input library-search-input"\n\t\t\tplaceholder="Search for apps & tools"\n\t\t\tfocus-if="ctrl.searchAutofocusEnabled"\n\t\t\tng-model="ctrl.searchQuery"\n\t\t\tng-keydown="ctrl.onSearchKeyDown($event)"\n\t\t/>\n\t\t<svg \n\t\t\tng-if="ctrl.searchQuery"\n\t\t\thm-tap-down="ctrl.onResetSearchQueryClick($event)"\n\t\t\tclass="library-root__search-box-icon"\n\t\t\t \n\t\t role="none" ><use xlink:href="'+n(221)+'"></use></svg>\n\t</div>\n\t<div\n\t\tclass="library-root toolbar-library__inner"\n\t\tng-class="{\'library-root--no-more-plugins-button\': !ctrl.canShowMarketplaceModal()}"\n\t>\n\t\t<div class="library-root__empty-search" ng-if="ctrl.hasNothingFoundResults()">\n\t\t\t<strong>No results match your search.</strong>\n\t\t\tSuggestions:\n\t\t\t<ul>\n\t\t\t\t<li>Try a different keyword</li>\n\t\t\t\t<li>Try using terms like \u201cDesign\u201d, \u201cMeeting\u201d, \u201cWorkshop\u201d etc.</li>\n\t\t\t\t<li ng-if="ctrl.canShowMarketplaceModal()">Browse the <a hm-tap="ctrl.openMarketplace()">Marketplace</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div\n\t\t\tclass="library-root__items-title library-root__items-title--first"\n\t\t\tng-if="ctrl.hasInstalledSearchResults() && ctrl.canShowMarketplaceModal()"\n\t\t>\n\t\t\tInstalled apps\n\t\t</div>\n\t\t<div class="library-root__items library-root__items--installed"></div>\n\t\t<div\n\t\t\tclass="library-root__items-title"\n\t\t\tng-class="{\'library-root__items-title--first\': !ctrl.hasInstalledSearchResults()}"\n\t\t\tng-if="ctrl.hasNonInstalledSearchResults()"\n\t\t>\n\t\t\tAvailable apps\n\t\t</div>\n\t\t<div class="library-root__items library-root__items--non-installed"></div>\n\t\t<a\n\t\t\thm-tap="ctrl.openMarketplace()"\n\t\t\tclass="library-root__get-more-apps-btn"\n\t\t\tng-if="(!ctrl.searchQuery || ctrl.hasSearchResults()) && ctrl.canShowMarketplaceModal()"\n\t\t\t>Get more apps <svg   \n\t\t role="none" ><use xlink:href="'+n(3805)+'"></use></svg></a>\n\t</div>\n</div>\n'},3805:function(t,e){t.exports="#img__arrow-forward-24"},3806:function(t,e){t.exports='<div class="library-iframe toolbar-library__inner">\n\t<iframe\n\t\tclass="iframe-extension-point"\n\t\tng-if="ctrl.getIFrameURL()"\n\t\tdata-container-type="library"\n\t\tng-src="{{ ctrl.getIFrameURL() }}"\n\t\tscrolling="no"\n\t\tng-attr-allow="{{ctrl.getIFrameAllow() }}"\n\t\tng-attr-data-miro-app-key="{{ ctrl.getIFrameAppKey() }}"\n\t></iframe>\n\t\x3c!-- spinner not implemented yet --\x3e\n\t<material-spinner ng-show="ctrl.loading"></material-spinner>\n</div>\n'},3868:function(t,e,n){var r=n(439);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},3890:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var r=n(0),o=n(1161),i=n(619),a=n(1162),c=n(53),s=n(2944),l=n(807),u=n(181),d=n(1061),p=n(203),h=n(1058),f=n(1888),g=n(2933),m=n.n(g),b=n(1288),y=n(27),v=n(1889),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MAX_BOARD_TAGS=100,e.TagsService=Object(l.a)(),e}return Object(r.d)(e,t),e.prototype.get=function(t){var e=this.TagsService.tags.map(j),n=this.filterTags(e,t);return Promise.resolve(n)},e.prototype.create=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e,n,o,i,a,c,s,l,u,d;return Object(r.e)(this,(function(r){switch(r.label){case 0:e=Object(h.h)(t),n={color:null,title:"",widgetIds:null},this.checkInputFields(e,Object.keys(n)),Object(v.a)(e.length),o=[],i=0,a=e,r.label=1;case 1:if(!(i<a.length))return[3,6];c=a[i],r.label=2;case 2:return r.trys.push([2,4,,5]),c.title?this.isTagWithTitleExist(c.title)?(b.a.tagWithTitleAlreadyExists(c.title),[3,5]):this.getTagsCount()+1>this.MAX_BOARD_TAGS?(b.a.totalTagsOnBoardLimitsExceeded(),[3,5]):(s=Object(f.c)(c.color),l=this.findTargetTagHolders(c.widgetIds),u=this.TagsService.create(c.title,s,l),[4,Object(h.c)()]):(b.a.tagMustHaveNonEmptyTitle(),[3,5]);case 3:return r.sent(),o&&o.push(u),[3,5];case 4:return r.sent(),[3,5];case 5:return i++,[3,1];case 6:return d=o.map(j),[2,Promise.resolve(d)]}}))}))},e.prototype.update=function(t){var e,n=Object(h.h)(t);this.checkInputFields(n,Object.keys({id:"",color:null,title:"",widgetIds:null})),Object(v.a)(n.length);for(var r=this.findTargetTags(n.map((function(t){return t.id}))),o=r.map((function(t){return t.tokenizer.id.toString()})),i=n.filter((function(t){return o.includes(t.id)})),a=this.getTagsUpdateData(i),c=0,s=a;c<s.length;c++){var l=s[c];(null===(e=l.textData)||void 0===e?void 0:e.text)&&this.isTagWithTitleExist(l.textData.text)&&(b.a.tagWithTitleAlreadyExists(l.textData.text),l.textData=void 0)}r.length>0&&a.length>0&&this.TagsService.update(i.map((function(t){return r.find((function(e){return t.id===e.tokenizer.id.toString()}))})),a);var u=this.findTargetTags(o).map(j);return Promise.resolve(u)},e.prototype.delete=function(t){var e=Object(h.a)(t);Object(v.a)(e.length);var n=this.findTargetTags(e);return n.length>0&&this.TagsService.remove(n),Promise.resolve()},e.prototype.findTargetTagHolders=function(t){var e=this,n=Object(h.a)(t||[]),r=u.widgetController.existingWidgets.filter((function(t){return n.includes(t.tokenizer.id.toString())}));this.checkWidgetsExisting(r,n);var o=r.filter((function(t){return e.isWidgetTypeSupportTags(t.widgetType)&&e.isTagsHolder(t)}));if(o.length<r.length)for(var i=0,a=r;i<a.length;i++){var c=a[i];if(!o.includes(c)){var s=c.tokenizer.id.toString(),l=c.type.toString();b.a.widgetWithTypeDoesntSupportTags(s,l)}}return o},e.prototype.checkWidgetsExisting=function(t,e){if(t.length<e.length)for(var n=t.map((function(t){return t.tokenizer.id.toString()})),r=0,o=e;r<o.length;r++){var i=o[r];n.includes(i)||b.a.widgetDoesntExist(i)}},e.prototype.findTargetTags=function(t){var e=this.TagsService.tags.filter((function(e){return t.includes(e.tokenizer.id.toString())}));if(e.length<t.length)for(var n=e.map((function(t){return t.tokenizer.id.toString()})),r=0,o=t;r<o.length;r++){var i=o[r];n.includes(i)||b.a.tagDoesntExist(i)}return e},e.prototype.isTagWithTitleExist=function(t){return this.TagsService.tags.some((function(e){return e.text===t}))},e.prototype.getTagsCount=function(){return this.TagsService.tags.length},e.prototype.filterTags=function(t,e){return e?("string"===typeof e.type&&(e.type=e.type.toUpperCase()),m()(t,e)):t},e.prototype.getTagsUpdateData=function(t){var e=this;return t.map((function(t){var n=void 0!==t.widgetIds?e.findTargetTagHolders(null===t||void 0===t?void 0:t.widgetIds):void 0,r=void 0!==n?n.map((function(t){return t.tokenizer})):void 0,o=void 0!==t.color?Object(f.c)(t.color):void 0,i=void 0!==t.color?new p.D(JSON.stringify({c:o})):void 0,a=void 0!==t.title?new p.E(t.title):void 0;return new d.g(i,a,r)}))},e.prototype.isTagsHolder=function(t){return"tags"in t&&"addTags"in t&&"removeTags"in t},e.prototype.isWidgetTypeSupportTags=function(t){return t===y.G.CARD||t===y.G.STICKER},e.prototype.checkInputFields=function(t,e){for(var n=0,r=t;n<r.length;n++){var o=r[n];Object.keys(o).filter((function(t){return!e.includes(t)})).forEach((function(t){return console.warn(b.a.unsupportedFieldForTag(t))}))}},Object(r.c)([i.d,Object(a.d)(c.o.BOARDS_READ)],e.prototype,"get",null),Object(r.c)([i.d,Object(a.a)(s.a.EDIT_CONTENT),Object(a.d)(c.o.BOARDS_WRITE)],e.prototype,"create",null),Object(r.c)([i.d,Object(a.a)(s.a.EDIT_CONTENT),Object(a.d)(c.o.BOARDS_WRITE)],e.prototype,"update",null),Object(r.c)([i.d,Object(a.a)(s.a.EDIT_CONTENT),Object(a.d)(c.o.BOARDS_WRITE)],e.prototype,"delete",null),e}(o.a);function j(t){return{id:t.tokenizer.id.toString(),title:t.text,color:Object(f.a)(t.color),widgetIds:t.widgetTks.map((function(t){return t.id.toString()}))}}e.b=O},3891:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2944),o=n(194),i=n(53);function a(){var t=[];return Object(o.a)().currentBoard.hasPermission(i.C.EDIT_BOARD_PARAMS)&&t.push(r.a.EDIT_INFO),Object(o.a)().currentBoard.canCreateAndEditWidgets()&&t.push(r.a.EDIT_CONTENT),Object(o.a)().currentBoard.canCreateAndEditComments()&&t.push(r.a.EDIT_COMMENTS),t}},3892:function(t,e,n){"use strict";var r=n(0),o=n(181),i=n(43),a=n(1058),c=n(340),s=n(305),l=n(192),u=n(845),d=n(1092),p=n(2018),h=n(540),f=n(4520),g=n(4521),m=function(){function t(){}return t.init=function(t){this.getPluginControllers=t,window.addEventListener("blur",(function(){var t=function(){Object(i.v)(),document.body.removeEventListener("click",t,!0)};document.activeElement&&"IFRAME"===document.activeElement.nodeName&&document.body.addEventListener("click",t,!0)}))},t.destroy=function(){var t=this;this.alreadyListeningEvents.forEach((function(e){switch(e){case g.a.SELECTION_UPDATED:t.stopListenSelectionUpdated();break;case g.a.WIDGETS_CREATED:t.stopListenWidgetsCreated();break;case g.a.WIDGETS_TRANSFORMATION_UPDATED:t.stopListenWidgetsTransformationUpdated();break;case g.a.WIDGETS_DELETED:t.stopListenWidgetsDeleted();break;case g.a.COMMENT_CREATED:t.stopListenCommentCreated();break;case g.a.ESC_PRESSED:t.stopListenEscPressed();break;case g.a.CANVAS_CLICKED:t.stopListenCanvasClicked();break;case g.a.ALL_WIDGETS_LOADED:case g.a.DATA_BROADCASTED:break;case g.a.METADATA_CHANGED:t.stopListenMetadataChanged();break;case g.a.ONLINE_USERS_CHANGED:t.stopListenOnlineUsersChanged();break;default:throw new Error("'"+e+"' is unknown event")}})),this.alreadyListeningEvents=[]},t.startListenEvent=function(t){if(!this.alreadyListeningEvents.includes(t))switch(this.alreadyListeningEvents.push(t),t){case g.a.SELECTION_UPDATED:this.startListenSelectionUpdated();break;case g.a.WIDGETS_CREATED:this.startListenWidgetsCreated();break;case g.a.WIDGETS_TRANSFORMATION_UPDATED:this.startListenWidgetsTransformationUpdated();break;case g.a.WIDGETS_DELETED:this.startListenWidgetsDeleted();break;case g.a.COMMENT_CREATED:this.startListenCommentCreated();break;case g.a.ESC_PRESSED:this.startListenEscPressed();break;case g.a.CANVAS_CLICKED:this.startListenCanvasClicked();break;case g.a.ALL_WIDGETS_LOADED:this.startListenAllWidgetsLoaded();break;case g.a.DATA_BROADCASTED:break;case g.a.METADATA_CHANGED:this.startListenMetadataChanged();break;case g.a.ONLINE_USERS_CHANGED:this.startListenOnlineUsersChanged();break;default:throw new Error("'"+t+"' is unknown event")}},t.onKeyUp=function(e){"Escape"===e.key&&t.dispatchEvent(g.a.ESC_PRESSED,[])},t.startListenEscPressed=function(){window.addEventListener("keyup",this.onKeyUp)},t.stopListenEscPressed=function(){window.removeEventListener("keyup",this.onKeyUp)},t.startListenAllWidgetsLoaded=function(){o.widgetController.isAllWidgetsLoaded()||o.widgetController.allWidgetsLoaded.addOnce((function(){t.dispatchEvent(g.a.ALL_WIDGETS_LOADED,[])}))},t.onCanvasClicked=function(){var e=s.c(),n=Object(l.L)(e.x),r=Object(l.M)(e.y);t.dispatchEvent(g.a.CANVAS_CLICKED,{x:n,y:r})},t.startListenCanvasClicked=function(){o.mouseController.mouseReleased.add(this.onCanvasClicked)},t.stopListenCanvasClicked=function(){o.mouseController.mouseReleased.remove(this.onCanvasClicked)},t.onSelectionChanged=function(e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,c,s,l;return Object(r.e)(this,(function(r){for(n=new Map,i=new Array(e.length),c=0;c<e.length;++c)"0"===(s=e[c]).tokenizer.id.toString()?n.set(s.tokenizer,{index:c,widget:s}):i[c]=Object(a.j)(s);return n.size?(l=function(e,r){var c=n.get(e);c&&(n.delete(e),i[c.index]=Object(a.j)(r)),0===n.size&&(o.objectsRegistry.tokenizerUpdated.remove(l),t.dispatchSelectionUpdateEvent(i))},o.objectsRegistry.tokenizerUpdated.add(l)):t.dispatchSelectionUpdateEvent(i),[2]}))}))},t.dispatchSelectionUpdateEvent=function(e){var n=0===e.length;n&&n===t.prevSelectionIsEmpty||t.dispatchEvent(g.a.SELECTION_UPDATED,e),t.prevSelectionIsEmpty=n},t.startListenSelectionUpdated=function(){o.mySelection.onSelectionChanged.add(this.onSelectionChanged)},t.stopListenSelectionUpdated=function(){o.mySelection.onSelectionChanged.remove(this.onSelectionChanged)},t.onTokenizerUpdated=function(e,n){n instanceof u.a&&t.buffer.push(Object(a.j)(n)),0===t.eventTimeout&&t.buffer.length&&(t.eventTimeout=setTimeout((function(){var e=t.buffer.slice();t.buffer=[],t.eventTimeout=0,t.dispatchEvent(g.a.WIDGETS_CREATED,e)}),10))},t.startListenWidgetsCreated=function(){o.objectsRegistry.tokenizerUpdated.add(this.onTokenizerUpdated)},t.stopListenWidgetsCreated=function(){o.objectsRegistry.tokenizerUpdated.remove(this.onTokenizerUpdated)},t.onWidgetsUpdated=function(e,n){if(e&&n){var r=Object(a.l)(n);t.dispatchEvent(g.a.WIDGETS_TRANSFORMATION_UPDATED,r)}},t.startListenWidgetsTransformationUpdated=function(){o.transformationController.transformationEnd.add(this.onWidgetsUpdated),o.resizeController.resizeEnded.add(this.onWidgetsUpdated)},t.stopListenWidgetsTransformationUpdated=function(){o.transformationController.transformationEnd.remove(this.onWidgetsUpdated),o.resizeController.resizeEnded.remove(this.onWidgetsUpdated)},t.onRemoveActionStarted=function(e){t.dispatchEvent(g.a.WIDGETS_DELETED,e.map((function(t){return{id:t.id.toString()}})))},t.startListenWidgetsDeleted=function(){o.presenceController.removeActionStarted.add(this.onRemoveActionStarted)},t.stopListenWidgetsDeleted=function(){o.presenceController.removeActionStarted.remove(this.onRemoveActionStarted)},t.onCommentCreated=function(){t.dispatchEvent(g.a.COMMENT_CREATED,[])},t.startListenCommentCreated=function(){Object(c.a)().commentCreated.add(this.onCommentCreated)},t.stopListenCommentCreated=function(){Object(c.a)().commentCreated.remove(this.onCommentCreated)},t.startListenMetadataChanged=function(){Object(d.a)().documentJson.subscribe("app_metadata",this.onMetadataChanged)},t.stopListenMetadataChanged=function(){Object(d.a)().documentJson.unsubscribe("app_metadata",this.onMetadataChanged)},t.onMetadataChanged=function(e){if(e.type===p.a.UPDATED_REMOTELY||e.type===p.a.UPDATED_LOCALLY){var n=e.path.split("/");if(!(n.length<2)){var r=n[1];t.dispatchEvent(g.a.METADATA_CHANGED,e.state[r]||{},(function(t){return t.appKey===r}))}}},t.onClientAttached=function(e,n,o){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,Object(f.a)()];case 1:return e=n.sent(),o&&!e.some((function(t){return t.id===o.id}))&&e.push({id:o.id.toString(),name:o.name}),t.dispatchEvent(g.a.ONLINE_USERS_CHANGED,e),[2]}}))}))},t.onClientDetached=function(e,n){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,Object(f.a)()];case 1:return e=n.sent(),t.dispatchEvent(g.a.ONLINE_USERS_CHANGED,e),[2]}}))}))},t.startListenOnlineUsersChanged=function(){this.usersService.clientAttached.add(this.onClientAttached),this.usersService.clientDetached.add(this.onClientDetached)},t.stopListenOnlineUsersChanged=function(){this.usersService.clientAttached.remove(this.onClientAttached),this.usersService.clientDetached.remove(this.onClientDetached)},t.dispatchEvent=function(e,n,o){return Object(r.b)(this,void 0,Promise,(function(){var i,a,c,s,l,u;return Object(r.e)(this,(function(d){switch(d.label){case 0:i={type:e,data:n},a=!1,c=Object(r.a)({},i),t.fakeSDKEventDispatcher.dispatchEvent(c),s=0,l=t.getPluginControllers(),d.label=1;case 1:return s<l.length?(u=l[s],o&&!o(u)?[3,5]:a?[4,u.dispatchEventToIframes(i)]:[3,3]):[3,6];case 2:return d.sent(),[3,5];case 3:return[4,u.dispatchEventToIframes(i)];case 4:a=d.sent().preventDefaultBehavior,d.label=5;case 5:return s++,[3,1];case 6:return[2,{preventDefaultBehavior:a}]}}))}))},t.alreadyListeningEvents=[],t.prevSelectionIsEmpty=!1,t.buffer=[],t.eventTimeout=0,t.usersService=Object(h.a)(),t}();e.a=m},3893:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h}));var r=n(1288),o=["circle","clipPath","defs","ellipse","filter","g","hatch","hatchpath","line","linearGradient","marker","mask","path","pattern","polygon","radialGradient","rect","stop","text","textPath","svg"],i=["xmlns","id","cx","cy","r","rx","ry","pathLength","x1","x2","y1","y2","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","viewBox","height","width","x","y","maskContentUnits","maskUnits","d","patternContentUnits","patternTransform","patternUnits","points","polyline","gradientTransform","gradientUnits","spreadMethod","offset","stop-color","stop-opacity","svg","symbol","d\u0445","dy","rotate","textLength","lengthAdjust","text-anchor","lengthAdjust","method","path","side","spacing","startOffset","alignment-baseline","baseline-shift","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","display","dominant-baseline","enable-background","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","solid-color","solid-opacity","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","transform","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"],a=i.filter((function(t){return"width"!==t&&"height"!==t}));function c(t){return Array.from(t.children).filter((function(t){return o.includes(t.nodeName)})).map((function(t){return s(t)})).join("\n")}function s(t){return"<"+t.nodeName+" "+function(t){return Array.from(t.attributes).filter((function(e){return"svg"===t.nodeName?a.includes(e.name):i.includes(e.name)})).map((function(t){return t.name+'="'+t.nodeValue+'"'})).join(" ")}(t)+">"+c(t)+"</"+t.nodeName+">"}function l(t,e){var n=(new DOMParser).parseFromString(t,"image/svg+xml"),r=n.firstChild;return 1===n.childNodes.length&&r instanceof SVGElement?e(r):(n.children[0].innerHTML,"")}function u(t){return l('<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>",c)}var d="data:image/svg+xml,",p=["https://","data:image/png;base64,",d];function h(t){if(p.some((function(e){return t.startsWith(e)}))){if(t.startsWith(d)){var e=t.substring(d.length);return d+encodeURIComponent(function(t){return l(t,s)}(decodeURIComponent(e)))}return t}throw new Error(r.a.urlSchemaNotWhitelisted(t,p))}},3894:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1886);function o(t,e,n,o){if(void 0===o&&(o=!1),n.data.rtbSuperCommandID)if(n.data.rtbSuperCommandID===r.a.IFRAME_CHANNEL_COMMAND){if("IS_RESPONSE_FOR_SOME_COMMAND"===n.data.data.commandId&&!o)return;console.info("%c"+t,"color: "+e+";",n.data.data.commandId,n.data)}else console.info("%c"+t,"color: "+e+";",n.data)}},3942:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return j}));var r=n(375),o=n(0),i=n(614),a=n(551),c=n(451),s=n(42),l=n(199),u=n(213),d=n(285),p=n(3802),h=n(516),f=n(16),g=function(t){function e(e,n,o){var i=t.call(this,e,n,o)||this;return i.marketplaceSearchInProgress=!1,i.searchAutofocusEnabled=f.a.desktop,i.init=function(){var t=Object(h.b)();i._searchController=new p.a(t),a.c(i.$scope,t,i._searchController),c.pluginSignals.onAppInstalledFromMarketPlace.add(i.resetSearchQuery),Object(d.a)().toolbar.listUpdated.add(i.rerender),i._searchController.librarySearchResultsUpdated.add(i.onSearchResultsUpdated),i.$scope.$on("$destroy",i.destroy)},i.destroy=function(){i._searchController.librarySearchResultsUpdated.remove(i.onSearchResultsUpdated),i._searchController.destroy(),i._searchController=void 0,c.pluginSignals.onAppInstalledFromMarketPlace.remove(i.resetSearchQuery),Object(d.a)().toolbar.listUpdated.remove(i.rerender)},i.openMarketplace=function(){Object(c.openMarketplace)({utm_source:"miro_in_app_marketplace_toolbar_library_empty_search",utm_term:i.searchQuery}),Object(s.a)().sendApiEvent("open_marketplace_toolbar_library_empty_search_results",{})},i.onResetSearchQueryClick=function(t){t.preventDefault(),t.stopPropagation(),i.resetSearchQuery()},i.onSearchKeyDown=function(t){if(t.keyCode===l.a.ENTER){var e=i._searchController.getInstalledSearchResults();!!i._searchController.searchQuery&&1===e.length&&Object(u.a)().activateToolbarPluginById(e[0].pluginId)}},i.resetSearchQuery=function(){i.searchQuery="",i.rerender()},i.rerender=function(){i.$scope.safeDigest()},i.canShowMarketplaceModal=function(){return Object(r.b)().canShowMarketplaceModal()},i.hasSearchResults=function(){return i._searchController.hasSearchResults()},i.hasNothingFoundResults=function(){return i._searchController.hasNothingFoundResults()},i.hasInstalledSearchResults=function(){return!!i.searchQuery&&i._searchController.getInstalledSearchResults().length>0},i.hasNonInstalledSearchResults=function(){return!i.marketplaceSearchInProgress&&i._searchController.getNonInstalledSearchResults().length>0},i.onSearchResultsUpdated=function(t){i.marketplaceSearchInProgress=t.nonInstalledPluginsLoading,i.rerender()},i}return Object(o.d)(e,t),Object.defineProperty(e.prototype,"searchQuery",{get:function(){return this._searchController.searchQuery},set:function(t){this._searchController.applySearchQuery(t)},enumerable:!1,configurable:!0}),e}(i.a),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.getIFrameURL=function(){return this.params.iframeURL},e.prototype.getIFrameAllow=function(){return this.params.iframeAllow},e.prototype.getIFrameAppKey=function(){return this.params.appKey},e}(i.a),b=n(303),y=n(1273),v=n(1126),O={isOldStyles:!1,isFullHeight:!0,title:""};function j(){Object(b.a)(),Object(v.a)(),y.a();var t={id:r.a,title:"",template:n(3804),ControllerClass:g,objectClickListener:void 0,dummyController:void 0,asyncResize:!0,fullHeight:!1};Object(r.b)().__setRootLibraryContent(t),Object(r.b)().__setIframePluginContentFactory((function(t,e,r,o){var i;return void 0===o&&(o=""),{id:t,template:n(3806),ControllerClass:m,objectClickListener:void 0,dummyController:void 0,params:{iframeURL:e,iframeAllow:o},title:r.title||O.title,fullHeight:null!==(i=r.isFullHeight)&&void 0!==i?i:O.isFullHeight,fullWidth:r.isFullWidth,isPinned:r.isPinned,width:r.width,height:r.height,isOldStyles:r.isOldStyles}}))}},3966:function(t,e,n){"use strict";n.r(e);var r=n(214),o=n(4516),i=n(624),a=n(6),c="BoardSdkV2";a.f(c,(function(){return n.e(41).then(n.bind(null,11420)).then((function(t){return t.default}))}));var s=a.d(c),l=n(926),u=function(){function t(){this.sdkV2Loaded=!1,r.a.board.runWebPlugins&&o.c()}return t.prototype.loadAndStartPlugin=function(t){var e;r.a.board.runWebPlugins&&!Object(i.a)().isSdkDisabled&&((null===(e=t.application.clientPlugin)||void 0===e?void 0:e.sdkVersion)===l.b.SDK_V2?(this.sdkV2Loaded=!0,s().then((function(e){e.loadAndStartPlugin(t)}))):o.d(t))},t.prototype.unloadPlugin=function(t){r.a.board.runWebPlugins&&!Object(i.a)().isSdkDisabled&&(this.sdkV2Loaded&&s().then((function(e){e.unloadPlugin(t)})),o.f(t))},t.prototype.onRouteMount=function(){},t.prototype.onRouteUnmount=function(){r.a.board.runWebPlugins&&(this.sdkV2Loaded&&(s().then((function(t){t.onRouteUnmount()})),this.sdkV2Loaded=!1),o.a())},t}();e.default=new u},3971:function(t,e,n){"use strict";var r=n(0),o=n(619),i=function(t,e){this.controller=t,this.root=e},a=n(2947),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.get=function(){return Object(a.a)(this.controller.appKey,this.controller.getAccountId()).then((function(t){return t.account}))},Object(r.c)([o.d],e.prototype,"get",null),e}(i);e.a=c},402:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(180),o=n(185),i=n.n(o),a=n(204),c=n(212),s=n(354),l=n.n(s),u=n(476),d=function(t){var e=t.onTap,n=t.children,o=t.deleteLabel,s=void 0===o?"Remove":o,d=t.title,p=t.className,h=t.onDelete,f=t.size,g=void 0===f?"small":f,m=t.type,b=void 0===m?"primaryBordered":m,y=t.isTransparent,v=t.isHoverable,O=t.isDisabled,j=t.testId,S=void 0===j?"chip":j,I=t.chipBtnTestId,E=void 0===I?"chip__deleteButton":I,_=i()(u.chip,p,"chip_"+b,"chip_"+g,{chip_disabled:O,chip_transparent:y,chip_noHover:!v});return r.createElement(a.f,{hmTap:e},r.createElement("div",{className:_,"data-autotest-id":S},r.createElement("div",{title:d,className:"chip__content"},n),r.createElement(a.b,{"aria-label":s,hmTap:h,type:"button",disabled:O,className:"chip__deleteButton",dataAutoTestId:E},r.createElement(c.a,{href:l.a}))))}},4516:function(t,e,n){"use strict";n.d(e,"c",(function(){return _})),n.d(e,"a",(function(){return w})),n.d(e,"e",(function(){return D})),n.d(e,"b",(function(){return C})),n.d(e,"d",(function(){return k})),n.d(e,"f",(function(){return A}));var r,o,i,a=n(0),c=n(43),s=n(2769),l=n(1886),u=n(4517),d=n(285),p=n(3894),h=n(4573),f=n(189),g=n(3892),m=n(274),b=n(624),y=n(3893),v=n(4523),O=n(17),j=n(194),S=(n(224),n(926),[]),I={},E=window;function _(){r=Object(c.i)(O.f.LOG_SDK_COMMANDS),window.addEventListener("message",T),g.a.init((function(){return S})),i=document.querySelector("#plugins-svg-icons");var t=Object(h.b)();o=t.controller,E.miro=t.instance,Object(b.a)().sdkDisabled.add((function(){S.forEach((function(t){Object(d.a)().unloadAndStopPlugin(t.appKey)}))}))}function w(){g.a.destroy()}function D(t,e){if(I[t]&&I[t][e])return"#"+I[t][e];var n="plugin-icon__"+Object(m.b)();return i.innerHTML+='<symbol viewBox="0 0 '+e+" "+e+'" id="'+n+'">'+Object(y.a)(t)+"</symbol>",I[t]||(I[t]={}),I[t][e]=n,"#"+n}function C(){return r}function T(t){if(t.data&&t.data.rtbSuperCommandID){var e,n=t.data;switch(r&&Object(p.a)("PLUGIN \u2192 APP","green",t,"showResponses"===r),n.rtbSuperCommandID){case l.a.HELLO_APP_FROM_IFRAME:if(!x().some((function(e){return e.createIframeCommandChannelAndSayHello(t.source)})))throw new Error("HELLO_APP_FROM_IFRAME:: PluginController not found for origin '"+t.origin+"'");break;case l.a.IFRAME_CHANNEL_COMMAND:var o=n.data,i=(e=o.context.pluginId,x().find((function(t){return t.appKey===e})));if(!i)throw new Error("IFRAME_CHANNEL_COMMAND:: PluginController not found for pluginId="+o.context.pluginId);!function(t,e){var n=t.data.commandId,r=t.data.context&&t.data.context.pluginId;if(r&&n&&n!==s.a.RESPONSE_COMMAND_ID){var o=Object(j.a)().canvasBoardInfo,i=Object(v.a)(t.data.data);f.sdkMethodUsed(n,e,r,o.id,o.account.id,i)}}(n,"iframe"),i.processCommandFromIFrame(t.source,o)}}}function x(){return Object(a.j)(S,[o])}function k(t){var e=new u.a(t);return S.push(e),f.pluginMainJSLoaded(e.appKey),e}function A(t){var e=S.findIndex((function(e){return e.appKey===t})),n=S[e];n&&(n.destroy(),S.splice(e,1))}E.reloadSandbox=function(){var t=Object(d.a)(),e=S.slice();S.forEach((function(e){t.unloadAndStopPlugin(e.appKey)})),e.forEach((function(t){k(t.appInstallation)}))}},4517:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return C}));var r=n(0),o=n(619),i=n(2769),a=n(1886),c=n(2943),s=n(4518),l=n(4516),u=n(4573),d=n(194),p=n(189),h=n(187),f=n(12),g=n(1058),m=n(1288),b=n(213),y=n(285),v=n(224),O=n(687),j=n(527),S=n(42),I=n(4523),E=n(926),_=n(451),w=n(2949),D=o.b(s.a),C=o.b(c.a),T=function(){function e(t){this.iframes=new Map,this.linkedIframeURLs=[],this.mainIframeURL="",this.sharedRuntimeData={},this.appInstallation=t,t.application.appKey!==u.a&&(this.mainIframeURL=this.verifyMainUri(t.application.clientPlugin.mainJSUri),this.createMainIframe(this.mainIframeURL),this.unloadIfNotInitializedInTime())}return e.prototype.verifyMainUri=function(t){return t.startsWith("https://")||t.startsWith("http://")?t:(m.a.pluginUrlHasWrongFormat(t),"")},Object.defineProperty(e.prototype,"appKey",{get:function(){return this.appInstallation.application.appKey},enumerable:!1,configurable:!0}),e.prototype.createMainIframe=function(t){this.mainIframeElement=function(t,e){var n=document.createElement("iframe");return n.setAttribute("src",t),n.setAttribute("data-container-type","sandbox"),n.setAttribute(w.a,e),n.setAttribute("class","plugins_sandbox_iframe"),n.setAttribute("aria-hidden","true"),n.style.width="1px",n.style.height="1px",document.body.appendChild(n),n}(this.getIframeURL(t),this.appKey)},e.prototype.getAccountId=function(){return v.a.getInfo().account.id},e.prototype.getBoardId=function(){return Object(d.a)().getBoardId()},e.prototype.getUserId=function(){return Object(h.a)().myUserId.toString()},e.prototype.invalidateAuthorization=function(){var t=this;return Object(_.updateApplicationInstallationInfo)(this.appKey).then((function(e){e&&(t.appInstallation=e)}))},e.prototype.isCurrentUserAuthorizedScope=function(t){return!!this.appInstallation.application.ignoreScopesForSDK||(Object(O.b)()&&this.isAvailableForExternalEditors()?this.appInstallation.application.scopes.some((function(e){return e.key===t})):!!this.appInstallation.currentUserAuthorization&&this.appInstallation.currentUserAuthorization.scopes.includes(t))},e.prototype.isAvailableForExternalEditors=function(){return Object(j.b)(this.appInstallation.application)},e.prototype.getIframeURL=function(t){var e,n=this.getBaseUrl();return n?e=new URL(t,n).href:(Object(f.f)(t)||m.a.pluginUrlMustBeAbsoluteOutsidePlugin(),e=t),this.linkedIframeURLs.push(e),e},e.prototype.getBaseUrl=function(){return this.mainIframeURL?this.mainIframeURL.endsWith(".html")?this.mainIframeURL.split("/").slice(0,-1).join("/"):this.mainIframeURL.endsWith("/")?this.mainIframeURL:this.mainIframeURL+"/":""},e.prototype.isAlive=function(){return!!this.mainIframeElement},e.prototype.isInitialized=function(){return!!this.mainIframeConnector},e.prototype.isApplicationPublished=function(){return this.appInstallation.application.marketplaceState===E.a.PUBLISHED},e.prototype.registerPlugin=function(t){t&&this.addButtonExtensionPoint(t.extensionPoints)},e.prototype.addButtonExtensionPoint=function(e){var n=Object.keys(e).filter((function(t){return!!e[t]})).join(", ");t.log("sdk","[BoardPluginController] Plugin defined extension points: "+n+" | "+this.appInstallation.application.name+" | "+this.appKey),Object(y.a)().appendPluginExtensionPoints(this.appKey,this.generateExtensionPointsByConfig(e))},e.prototype.generateExtensionPointsByConfig=function(t){var e=this,n={};if(t.bottomBar){var o=Object(l.e)(t.bottomBar.svgIcon,24);n.bottomBar={title:t.bottomBar.title,iconURL:o,positionPriority:1e3,onClick:function(){e.deactivateBottomBarButtonHandler?(e.deactivateBottomBarButtonHandler(),e.deactivateBottomBarButtonHandler=void 0):e.mainIframeConnector.callExtensionPointClickListener("bottomBar"),e.sendExtensionPointUsedStat("bottomBar")},isVisible:function(){return!0},isActive:function(){return!!e.deactivateBottomBarButtonHandler}}}if(t.toolbar){var i=Object(l.e)(t.toolbar.toolbarSvgIcon,24),a=Object(l.e)(t.toolbar.librarySvgIcon,48);n.toolBar={title:t.toolbar.title,getToolbarIcon:function(){return i},getCatalogIcon:function(){return a},isActive:function(){return!!e.deactivateToolBarButtonHandler},onClick:function(t){t.close(),e.deactivateToolBarButtonHandler?(e.deactivateToolBarButtonHandler(),e.deactivateToolBarButtonHandler=void 0):e.mainIframeConnector.callExtensionPointClickListener("toolbar"),e.sendExtensionPointUsedStat("toolbar")}}}if(t.exportMenu){o=Object(l.e)(t.exportMenu.svgIcon,24);n.exportPanel={title:t.exportMenu.title,iconURL:o,onClick:function(){e.mainIframeConnector.callExtensionPointClickListener("exportMenu"),e.sendExtensionPointUsedStat("exportMenu")},positionPriority:1e3}}return t.hasWidgetMenuItems&&(n.getWidgetMenuItems=function(t){return Object(r.b)(e,void 0,void 0,(function(){var e,n=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return e=t.map((function(t){return Object(g.i)(void 0,t)})),[4,this.mainIframeConnector.onWidgetsSelected(e,Object(b.a)().testTools("CURSOR"))];case 1:return[2,r.sent().map((function(t,e){return{svgIcon:Object(l.e)(t.svgIcon,24),tooltip:t.tooltip,onClick:function(){n.mainIframeConnector.callMenuItemClickListener(e)}}}))]}}))}))}),n},e.prototype.sendExtensionPointUsedStat=function(t){Object(p.pluginExtensionPointUsed)(t,v.a.getInfo().id,this.appKey)},e.prototype.findLinkedIframe=function(t){var e=Array.from(document.querySelectorAll("iframe")).find((function(e){return e.contentWindow===t}));if(e){var n=e.getAttribute(w.a);return(n===this.appKey||!n)&&this.linkedIframeURLs.includes(e.src)?e:void 0}},e.prototype.createIframeCommandChannelAndSayHello=function(t){var e=this.findLinkedIframe(t);if(!e)return!1;var n=this.createIframeCommandChannel(e,t),r=e===this.mainIframeElement,o={pluginId:this.appKey,descriptor:D,isMainIframe:r,locationOrigin:window.location.origin,accountId:Object(d.a)().canvasBoardInfo.account.id};return this.sendSuperCommandToIFrame(t,a.a.HELLO_IFRAME_FROM_APP,o),r?(Object(y.a)().startPlugin({pluginId:this.appKey,extensionPoints:{}}),this.mainIframeConnector=n.connector,console.info("Plugin initialized | "+this.appInstallation.application.name+" | "+this.appKey)):this.runAliveChecking(n),!0},e.prototype.createIframeCommandChannel=function(t,e){var n,r=this,c=new i.a((function(t){e.window?r.sendSuperCommandToIFrame(e,a.a.IFRAME_CHANNEL_COMMAND,t):(t.commandId,i.a.RESPONSE_COMMAND_ID)}),(function(t){return n})),l={pluginId:this.appKey},u={};o.a("",u,C,(function(t,e){return c.sendCommand(t,l,e)}));var d={connector:u,channel:c,iframeElement:t,iframeWindow:e};return n=new s.a(this,d),this.iframes.set(e,d),d},e.prototype.runAliveChecking=function(t){var e=this,n=function(){var r=!0;setTimeout((function(){r&&e.isAlive()&&e.destroyIframeCommandChannel(t)}),1e3),t.connector.areYouAlive().then((function(){r=!1})).then(x).then(n)};n()},e.prototype.unloadIfNotInitializedInTime=function(){var t=this;setTimeout((function(){t.isAlive()&&!t.isInitialized()&&(console.info("Plugin initialization timeout | "+t.appInstallation.application.name+" | "+t.appKey),t.sendPluginInitializationTimeoutStat(),t.isApplicationPublished()&&ErrorsTracker.error(new Error("Plugin initialization timeout"),{pluginName:t.appInstallation.application.name,pluginId:t.appInstallation.application.appKey}),Object(y.a)().unloadAndStopPlugin(t.appKey))}),6e4)},e.prototype.destroyIframeCommandChannel=function(t){this.iframes.delete(t.iframeWindow)},e.prototype.processCommandFromIFrame=function(t,e){var n=this,r=this.iframes.get(t);if(!r)throw new Error("processCommandFromIFrame:: iframe channel not found, plugin = "+this.appKey+", cmd = "+e.commandId);r.channel.processCommand(e).then((function(t){"error"in t&&(n.sendIFrameCommandExecutionErrorStat(e,t.error),n.isApplicationPublished()&&ErrorsTracker.error(t.error,{methodId:e.commandId,pluginId:n.appInstallation.application.appKey,pluginName:n.appInstallation.application.name}))}))},e.prototype.sendSuperCommandToIFrame=function(t,e,n){t.postMessage({rtbSuperCommandID:e,data:n,rtbEnableCommandsLog:Object(l.b)()},"*")},e.prototype.sendIFrameCommandExecutionErrorStat=function(t,e){var n=v.a.getInfo();Object(S.a)().sendApiEvent("sdk_command_execution_error_raised",{account_id:n.account.id,board_id:n.id,plugin_id:this.appInstallation.application.appKey,plugin_name:this.appInstallation.application.name,sdk_method_caller:"iframe",sdk_method_id:t.commandId,input_arguments:Object(I.a)(t.data),error_message:e instanceof Error?e.message:void 0})},e.prototype.sendPluginInitializationTimeoutStat=function(){var t=v.a.getInfo();Object(S.a)().sendApiEvent("sdk_plugin_initialization_timed_out",{account_id:t.account.id,board_id:t.id,plugin_id:this.appInstallation.application.appKey,plugin_name:this.appInstallation.application.name})},e.prototype.destroy=function(){var t=this;this.iframes.forEach((function(e){t.destroyIframeCommandChannel(e),e.iframeElement.remove()})),this.mainIframeElement&&(this.mainIframeElement.remove(),this.mainIframeElement=void 0)},e.prototype.dispatchEventToIframes=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return e=Array.from(this.iframes.values()).map((function(e){return e.connector.dispatchEvent(t)})),[4,Promise.all(e)];case 1:return n=r.sent(),[2,{preventDefaultBehavior:n.some((function(t){return!0===t}))}]}}))}))},e}();function x(){return new Promise((function(t){setTimeout(t,3e4)}))}e.a=T}).call(this,n(54))},4518:function(t,e,n){"use strict";(function(t){var r=n(0),o=n(619),i=n(528),a=n(346),c=n(382),s=n(1949),l=n(548),u=n(11269),d=n(186),p=n(3892),h=n(184),f=n(224),g=n(3971),m=n(7946),b=n(192),y=n(53),v=n(1162),O=n(3893),j=n(187),S=n(228),I=n(687),E=n(254),_=n(4522),w=n(2948),D=n(16),C=function(){function e(t,e){this.draggingItemsCallbacks=new Map,this.controller=t,this.currentIframeInfo=e,this.board=new u.a(this.controller,this),this.account=new g.a(this.controller,this),this.currentUser=new m.a(this.controller,this)}return e.prototype.initializeInner=function(t){return this.controller.registerPlugin(t),Promise.resolve()},e.prototype.addButtonExtensionPoint=function(t){this.controller.addButtonExtensionPoint(t)},e.prototype.showNotification=function(t){Object(d.a)().show(t)},e.prototype.showErrorNotification=function(t){Object(d.a)().showError(t)},e.prototype.startListenEvent=function(t){p.a.startListenEvent(t)},e.prototype.broadcastEventInner=function(t){if("ESC_PRESSED"===t.type)this.controller.dispatchEventToIframes({type:"ESC_PRESSED",data:void 0});else{if("BROADCAST_DATA"!==t.type)throw new Error("Unknown sdk inner event "+t);this.controller.dispatchEventToIframes({type:"DATA_BROADCASTED",data:t.data})}},e.prototype.isAuthorized=function(){return Object(r.b)(this,void 0,Promise,(function(){var t,e;return Object(r.e)(this,(function(n){return Object(I.b)()&&this.controller.isAvailableForExternalEditors()?[2,!0]:(t=f.a.getInfo().account.id,e=this.controller.appInstallation.id,[2,Object(w.a)(t,e)])}))}))},e.prototype.getToken=function(){if(Object(j.a)().userType===S.a.REGULAR){var t=f.a.getInfo().account.id,e=this.controller.appInstallation.id;return h.a.accounts.selectById(t).getApplicationOAuthToken(e).then((function(t){return t.token})).catch((function(t){return""}))}return Promise.resolve("")},e.prototype.getIdToken=function(){return Object(r.b)(this,void 0,Promise,(function(){var t,e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:if(Object(j.a)().userType!==S.a.REGULAR)throw new Error("You don't have permissions to call getIdToken()");if(t=f.a.getInfo().account.id,!(e=this.controller.appInstallation.id))throw new Error("You are trying to call getIdToken() from the developer console.");r.label=1;case 1:return r.trys.push([1,3,,4]),[4,h.a.accounts.selectById(t).getSignedIdentity(e)];case 2:return[2,r.sent()];case 3:if("number"===typeof(null===(n=r.sent())||void 0===n?void 0:n.status)&&n.status>499&&n.status<=599)throw new Error("An error occurred when retrieving signed identity.");throw new Error("you are not authorised to call getIdToken()");case 4:return[2]}}))}))},e.prototype.requestAuthorization=function(t){return Object(r.b)(this,void 0,Promise,(function(){var e=this;return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,Object(E.a)().show({componentFactory:Object(_.a)({applicationId:this.controller.appInstallation.application.id,accountId:f.a.getInfo().account.id,isAuthorized:function(){return e.isAuthorized()},redirectUri:null===t||void 0===t?void 0:t.redirect_uri,state:null===t||void 0===t?void 0:t.state})})];case 1:return[4,(0,n.sent().waitForClose)()];case 2:if(n.sent()instanceof Error)throw"Authorization request rejected by user or failed";return[4,this.__invalidateAuthorization()];case 3:return n.sent(),[2]}}))}))},e.prototype.__invalidateAuthorization=function(){return this.controller.invalidateAuthorization()},e.prototype.__authorizeStub=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.__setRuntimeState=function(t){if("object"!==typeof t)throw new Error("Runtime data should have 'object' type");return this.controller.sharedRuntimeData=Object(r.a)(Object(r.a)({},this.controller.sharedRuntimeData),t),this.__getRuntimeState()},e.prototype.__getRuntimeState=function(){return Promise.resolve(this.controller.sharedRuntimeData)},e.prototype.onDraggableItemStartDrag=function(e,n){var r=this.currentIframeInfo.iframeElement;this.createDummy(e,r,Object(l.a)((function(){var e=n.preview.width||100,r=n.preview.height||100;return t('<div class="sdk-dragging-dummy"><img referrerpolicy="no-referrer" crossorigin="anonymous" src="'+Object(O.b)(n.preview.url)+'"></div>').css({width:e,height:r,margin:"-"+Math.round(r/2)+"px 0 0 -"+Math.round(e/2)+"px"})}),(function(){})),[],n.isTouchEvent)},e.prototype.onDraggableImageStartDrag=function(t,e){var n=this.currentIframeInfo.iframeElement,r=[e.preview.url,{image:e.image.url}];this.createDummy(t,n,Object(l.c)(),r,e.isTouchEvent)},e.prototype.createDummy=function(e,n,o,i,a){var l,u,d=this,p="disableMouseEvents",h=!1;n.classList.add(p),u=n.getBoundingClientRect();var f,g=D.a.firefox;g&&(f=getComputedStyle(n).display,n.style.display="none");var m=t(n).offset();setTimeout((function(){g&&(n.style.display=f),a?d.draggingItemsCallbacks.set(e,{onTouchMove:function(t,e){y(c.a(t+m.left,e+m.top))},onTouchEnd:v,onTouchCancel:O}):(t(document).on("mousemove",y),t(document).on("mouseup",v))}));var y=function(t){l=c.b(t),h?o.move(l):(h=!0,o.create.apply(o,Object(r.j)([l],i))),t.preventDefault(),t.stopPropagation()},v=function(){h&&(Object(s.d)(u,l)?(o.cancel(),d.currentIframeInfo.connector.currentDraggableItemCanceled(e)):(o.drop(l),d.currentIframeInfo.connector.currentDraggableItemDropped(e,Object(b.L)(l.x),Object(b.M)(l.y)))),n.classList.remove(p),j()},O=function(){h&&o.cancel(),j()},j=function(){t(document).off("mousemove",y),t(document).off("mouseup",v),d.draggingItemsCallbacks.delete(e)}},e.prototype.onDraggableImageClick=function(t){a.initPosition(),Object(i.a)().createWidgetFromUrl(t.url)},e.prototype.onDraggableItemTouchMove=function(t,e,n){var r=this.draggingItemsCallbacks.get(t);r&&r.onTouchMove(e,n)},e.prototype.onDraggableItemTouchEnd=function(t){var e=this.draggingItemsCallbacks.get(t);e&&e.onTouchEnd()},e.prototype.onDraggableItemTouchCancel=function(t){var e=this.draggingItemsCallbacks.get(t);e&&e.onTouchCancel()},Object(r.c)([Object(o.e)(u.a)],e.prototype,"board",void 0),Object(r.c)([Object(o.e)(g.a)],e.prototype,"account",void 0),Object(r.c)([Object(o.e)(m.a)],e.prototype,"currentUser",void 0),Object(r.c)([o.d],e.prototype,"initializeInner",null),Object(r.c)([o.d],e.prototype,"addButtonExtensionPoint",null),Object(r.c)([o.d],e.prototype,"showNotification",null),Object(r.c)([o.d],e.prototype,"showErrorNotification",null),Object(r.c)([o.d,Object(v.d)(y.o.BOARDS_READ)],e.prototype,"startListenEvent",null),Object(r.c)([o.d],e.prototype,"broadcastEventInner",null),Object(r.c)([o.d],e.prototype,"isAuthorized",null),Object(r.c)([o.d],e.prototype,"getToken",null),Object(r.c)([o.d],e.prototype,"getIdToken",null),Object(r.c)([o.d],e.prototype,"requestAuthorization",null),Object(r.c)([o.d],e.prototype,"__invalidateAuthorization",null),Object(r.c)([o.d],e.prototype,"__authorizeStub",null),Object(r.c)([o.d],e.prototype,"__setRuntimeState",null),Object(r.c)([o.d],e.prototype,"__getRuntimeState",null),Object(r.c)([o.d],e.prototype,"onDraggableItemStartDrag",null),Object(r.c)([o.d],e.prototype,"onDraggableImageStartDrag",null),Object(r.c)([o.d],e.prototype,"onDraggableImageClick",null),Object(r.c)([o.d],e.prototype,"onDraggableItemTouchMove",null),Object(r.c)([o.d],e.prototype,"onDraggableItemTouchEnd",null),Object(r.c)([o.d],e.prototype,"onDraggableItemTouchCancel",null),e}();e.a=C}).call(this,n(193))},4519:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(1058);function o(t,e){var n=Object(r.o)(t),o=(null===e||void 0===e?void 0:e.metadata)||{},i=Object.assign(n,o);return e&&(e.metadata=i),Object(r.b)(t,"metadata",e)}function i(t,e){var n=e.appInstallation.application.id;if(t&&t.metadata){var r=Object.keys(t.metadata);if(r.length>1)throw new Error("You can write metadata only for your app ID '"+n+"'. Your keys are "+r);if(1===r.length&&r[0]!==n)throw new Error("You can write metadata only for your app ID '"+n+"'. Your key is "+r[0])}}},4520:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(540),o=n(187),i=n(560),a=n.n(i);function c(){var t=Object(o.a)(),e=Object(r.a)(),n=e.getAttachedClientIds().map((function(t){return{clientId:t,userId:e.getUserId(t)}})),i=a()(n,(function(t){return t.userId})),c=i.map((function(t){return e.getUserInfo(t.clientId)}));return i.some((function(e){return e.userId===t.myUserId}))||c.push(Promise.resolve(t.userInfo)),Promise.all(c).then((function(t){return t.map((function(t){return{id:t.id,name:t.name}}))}))}},4521:function(t,e,n){"use strict";var r;!function(t){t.SELECTION_UPDATED="SELECTION_UPDATED",t.WIDGETS_CREATED="WIDGETS_CREATED",t.WIDGETS_DELETED="WIDGETS_DELETED",t.WIDGETS_TRANSFORMATION_UPDATED="WIDGETS_TRANSFORMATION_UPDATED",t.COMMENT_CREATED="COMMENT_CREATED",t.ESC_PRESSED="ESC_PRESSED",t.CANVAS_CLICKED="CANVAS_CLICKED",t.ALL_WIDGETS_LOADED="ALL_WIDGETS_LOADED",t.DATA_BROADCASTED="DATA_BROADCASTED",t.METADATA_CHANGED="METADATA_CHANGED",t.ONLINE_USERS_CHANGED="ONLINE_USERS_CHANGED"}(r||(r={})),e.a=r},4522:function(t,e,n){"use strict";var r=n(0),o=n(180),i=n.n(o),a=n(185),c=n.n(a),s=n(227),l=n(347),u=(n(7947),n(1496));function d(t){var e=Object(o.useState)((function(){var e=t.current;return!!(null===e||void 0===e?void 0:e.contentWindow)&&Object(u.d)(e.contentWindow)&&Object(u.c)(e.contentWindow.location.href)})),n=e[0],r=e[1];return Object(o.useEffect)((function(){var e=t.current;if(e){var n=Object(u.e)(e,(function(t){var e=t.url;r(!!e&&Object(u.c)(e))}));return function(){n()}}})),n}e.a=Object(s.a)((function(t,e){return Object(r.a)(Object(r.a)({},t),{onAuthorizationSuccess:function(){return e()},onAuthorizationCanceled:function(){return e(new Error("Not authorized"))}})}))((function(t){var e=this,n=t.applicationId,a=t.onAuthorizationSuccess,s=t.onAuthorizationCanceled,p=t.isAuthorized,h=Object(o.useRef)(null),f=function(t){var e=Object(o.useState)(!1),n=e[0],r=e[1],i=d(t);return Object(o.useEffect)((function(){var e,o=null===(e=t.current)||void 0===e?void 0:e.contentWindow;if(!n&&o&&i){var a=function(){r(!0)};return"interactive"===o.document.readyState?a():o.addEventListener("DOMContentLoaded",a),function(){o.removeEventListener("DOMContentLoaded",a)}}}),[i,n,t]),Object(o.useEffect)((function(){var t=setTimeout((function(){r(!0)}),1e4);return function(){clearTimeout(t)}}),[]),n}(h),g=Object(u.a)(t),m=d(h);!function(t,e,n){Object(o.useEffect)((function(){function r(r){var o;r.origin===location.origin&&r.source===(null===(o=e.current)||void 0===o?void 0:o.contentWindow)&&Object(u.b)(r.data)&&r.data.installedAppId===t&&!0===r.data.success&&n()}return window.addEventListener("message",r),function(){window.removeEventListener("message",r)}}),[t,e,n])}(n,h,a);var b=Object(o.useCallback)((function(){return Object(r.b)(e,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(e){switch(e.label){case 0:return(t=f&&!m)?[4,p()]:[3,2];case 1:t=e.sent(),e.label=2;case 2:return t?a():s(),[2]}}))}))}),[p,f,m,s,a]);return Object(o.useEffect)((function(){return window.mpClosed=b,function(){delete window.mpClosed}}),[b]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"app-authorization-modal__overlay",onClick:b}),i.a.createElement("div",{className:c()("app-authorization-modal",{"app-authorization-modal--loading":!f,"app-authorization-modal--custom-postinstall-page":f&&!m}),"data-autotest-id":"app-authorization-modal"},i.a.createElement("iframe",{ref:h,src:g,"data-autotest-id":f?"app-authorization-modal__initialized-frame":"app-authorization-modal__uninitialized-frame"}),!f&&i.a.createElement(l.a,{className:"app-authorization-modal__spinner",color:"white"}),f&&!m&&i.a.createElement("div",{className:"app-authorization-modal__btn-close",onClick:b,"data-autotest-id":"app-authorization-modal__close-custom-page_button"})))}))},4523:function(t,e,n){"use strict";function r(t){if(!t)return[];t=Array.isArray(t)?t:[t];for(var e=[],n=-1,r=function(r){var a="arg"+ ++n;if(!o(r))return e.includes(a)||e.push(a),"continue";if(Array.isArray(r))return r.forEach((function(n){if((o=n)!==Object(o))e.includes(a)||e.push(a);else{var r={};r[a]=n,t.push(r)}var o})),"continue";for(var c=i(r),s=function(t){var n=t[0],r=t[1];return Array.isArray(r)?(r.length>0?r.forEach((function(t){return c.push([n,t])})):n&&!e.includes(n)&&e.push(n),"continue"):o(r)?(i(r).forEach((function(t){return c.push([n+"."+t[0],t[1]])})),"continue"):void(n&&void 0!==r&&!e.includes(n)&&e.push(n))},l=0,u=c;l<u.length;l++){s(u[l])}},a=0,c=t;a<c.length;a++){r(c[a])}return e}function o(t){return"object"===typeof t&&null!==t}function i(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}n.d(e,"a",(function(){return r}))},4573:function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return E}));var r=n(2769),o=n(619),i=n(1709);var a=n(4521),c=n(409),s=n(738),l=n(735),u=n(395),d=n(901),p=n(1200),h=n(2019),f=n(1944),g=n(2945);var m=n(2943),b=n(4518),y=n(4517),v=n(3892),O=n(516),j=n(926),S="DEV_TOOL_CONSOLE_PLUGIN_NAME",I="dev_tool_console_plugin_frame_uid";function E(){var t={onReady:function(t){setTimeout(t)}},e=new i.a;v.a.fakeSDKEventDispatcher=e,function(t,e){var n=e;n.addListener=function(n,r){return t.addEventListener(n,r),e.startListenEvent(n)},n.removeListener=function(e,n){return t.removeEventListener(e,n),Promise.resolve()},n.broadcastData=function(t){return e.broadcastEventInner({type:"BROADCAST_DATA",data:t})},window.addEventListener("keyup",(function(t){"Escape"===t.key&&e.broadcastEventInner({type:"ESC_PRESSED"})}))}(e,t),t.enums={event:a.a,shapeType:c.a,stickerType:s.a,borderStyle:l.a,fontFamily:u.b,textAlign:h.a,textAlignVertical:g.a,lineStyle:d.a,lineType:f.a,lineArrowheadStyle:p.a};var n={pluginId:S,iframeUID:I},E=o.b(b.a);o.a("",t,E,(function(t,e){return C.sendCommand(t,n,e)}));var w,D=new m.a(e),C=new r.a((function(t){setTimeout((function(){T.processCommand(_(t))}))}),(function(t){return D})),T=new r.a((function(t){C.processCommand(_(t))}),(function(t){return w})),x={pluginId:S,iframeUID:I},k={};o.a("",k,y.b,(function(t,e){return T.sendCommand(t,x,e)}));var A={uid:I,connector:k,channel:T,iframeElement:void 0,iframeWindow:void 0},P=Object(O.a)(S);P.application.clientPlugin={enabled:!0,mainJSUri:"",sdkVersion:j.b.SDK_V1};var R=new y.a(P);return w=new b.a(R,A),{instance:t,controller:R}}function _(t){return JSON.parse(JSON.stringify(t))}},476:function(t,e,n){var r=n(477);"string"===typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(178)(r,o);r.locals&&(t.exports=r.locals)},477:function(t,e,n){(e=t.exports=n(177)(!1)).push([t.i,".chip-2U_KS {\n  box-sizing: border-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-align: center;\n      align-items: center;\n  max-width: 300px;\n  border-radius: 125px;\n  border-radius: var(--radiusCircle);\n}\n.chip-2U_KS .chip__content {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.chip-2U_KS .chip__deleteButton {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  padding-right: 6px;\n  padding-left: 6px;\n  margin-right: -8px;\n  color: rgba(217, 224, 255, 1);\n  color: var(--blue400);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  cursor: pointer;\n}\n.chip-2U_KS .chip__deleteButton[disabled] {\n  opacity: 0.4;\n}\n.chip-2U_KS.chip_large {\n  height: 32px;\n  line-height: 32px;\n  padding-right: 12px;\n  padding-left: 12px;\n}\n.chip-2U_KS.chip_large .chip__deleteButton {\n  height: 32px;\n}\n.chip-2U_KS.chip_large .chip__deleteButton svg {\n  width: 20px;\n  height: 20px;\n  min-width: 20px;\n  max-width: 20px;\n  min-height: 20px;\n  max-height: 20px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .chip-2U_KS.chip_large .chip__deleteButton svg {\n    width: auto;\n    height: auto;\n  }\n}\n.chip-2U_KS.chip_medium {\n  height: 28px;\n  line-height: 28px;\n  padding-right: 10px;\n  padding-left: 10px;\n}\n.chip-2U_KS.chip_medium .chip__deleteButton {\n  height: 28px;\n}\n.chip-2U_KS.chip_medium .chip__deleteButton svg {\n  width: 16px;\n  height: 16px;\n  min-width: 16px;\n  max-width: 16px;\n  min-height: 16px;\n  max-height: 16px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .chip-2U_KS.chip_medium .chip__deleteButton svg {\n    width: auto;\n    height: auto;\n  }\n}\n.chip-2U_KS.chip_small {\n  height: 24px;\n  line-height: 24px;\n  font-size: 12px;\n  padding-right: 6px;\n  padding-left: 6px;\n}\n.chip-2U_KS.chip_small .chip__deleteButton {\n  height: 24px;\n}\n.chip-2U_KS.chip_small .chip__deleteButton svg {\n  width: 16px;\n  height: 16px;\n  min-width: 16px;\n  max-width: 16px;\n  min-height: 16px;\n  max-height: 16px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .chip-2U_KS.chip_small .chip__deleteButton svg {\n    width: auto;\n    height: auto;\n  }\n}\n.chip-2U_KS.chip_primary {\n  background-color: rgba(66, 98, 255, 1);\n  background-color: var(--blue700);\n  color: rgba(255, 255, 255, 1);\n  color: var(--white);\n}\n.chip-2U_KS.chip_primary:not(.chip_noHover):not(.chip_transparent):hover,\n.chip-2U_KS.chip_primary:not(.chip_noHover):not(.chip_transparent):focus-visible {\n  background-color: rgba(69, 91, 237, 1);\n  background-color: var(--blue800);\n}\n.chip-2U_KS.chip_primary .chip__deleteButton {\n  color: rgba(217, 224, 255, 1);\n  color: var(--blue400);\n}\n.chip-2U_KS.chip_primary .chip__deleteButton:hover,\n.chip-2U_KS.chip_primary .chip__deleteButton:focus-visible {\n  color: rgba(104, 129, 255, 1);\n  color: var(--blue600);\n}\n.chip-2U_KS.chip_secondary {\n  background-color: rgba(240, 240, 243, 1);\n  background-color: var(--indigo100);\n}\n.chip-2U_KS.chip_secondary:not(.chip_noHover):not(.chip_transparent):hover,\n.chip-2U_KS.chip_secondary:not(.chip_noHover):not(.chip_transparent):focus-visible {\n  background-color: rgba(235, 235, 239, 1);\n  background-color: var(--indigo200);\n}\n.chip-2U_KS.chip_secondary .chip__deleteButton {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n}\n.chip-2U_KS.chip_secondary .chip__deleteButton:hover,\n.chip-2U_KS.chip_secondary .chip__deleteButton:focus-visible {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.chip-2U_KS.chip_danger {\n  background: rgba(253, 242, 242, 1);\n  background: var(--red100);\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.chip-2U_KS.chip_danger:not(.chip_noHover):not(.chip_transparent):hover,\n.chip-2U_KS.chip_danger:not(.chip_noHover):not(.chip_transparent):focus-visible {\n  background-color: rgba(247, 212, 212, 1);\n  background-color: var(--red400);\n}\n.chip-2U_KS.chip_danger .chip__deleteButton {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n}\n.chip-2U_KS.chip_danger .chip__deleteButton:hover,\n.chip-2U_KS.chip_danger .chip__deleteButton:focus-visible {\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.chip-2U_KS.chip_primaryBordered {\n  border: 1px solid rgba(217, 224, 255, 1);\n  border: 1px solid var(--blue400);\n  color: rgba(66, 98, 255, 1);\n  color: var(--blue700);\n}\n.chip-2U_KS.chip_primaryBordered .chip__deleteButton {\n  color: rgba(217, 224, 255, 1);\n  color: var(--blue400);\n}\n.chip-2U_KS.chip_primaryBordered .chip__deleteButton:hover,\n.chip-2U_KS.chip_primaryBordered .chip__deleteButton:focus-visible {\n  color: rgba(104, 129, 255, 1);\n  color: var(--blue600);\n}\n.chip-2U_KS.chip_transparent {\n  background-color: transparent;\n  border: none;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n}\n.chip-2U_KS.chip_transparent .chip__deleteButton {\n  opacity: 0;\n  pointer-events: none;\n}\n.chip-2U_KS.chip_disabled {\n  pointer-events: none;\n}\n",""]),e.locals={chip:"chip-2U_KS"}},546:function(t,e,n){var r=n(721);"string"===typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(178)(r,o);r.locals&&(t.exports=r.locals)},613:function(t,e,n){"use strict";var r=n(0),o=n(179),i=n(942),a=n.n(i),c=n(210),s=n(233),l=n(237),u=n(402),d=n(212),p=n(354),h=n.n(p),f=n(681),g=n.n(f);n(546);var m=function(t){function e(e){var n=t.call(this,e)||this,r=e.throttle,i=e.search;return n.state={search:i,defaultSearchValue:i},n.emitChangeDebounced=r&&r>0?a()(n.emitChange,r):null,n.inputRef=o.d.createRef(),n}return Object(r.d)(e,t),e.prototype.setFocus=function(t){void 0===t&&(t=!1),this.inputRef.current&&(this.inputRef.current.focus(),t&&this.inputRef.current.select())},e.prototype.handleFocus=function(){this.props.onFocus&&this.props.onFocus()},e.prototype.handleBlur=function(){this.props.onBlur&&this.props.onBlur()},e.prototype.handleChange=function(t){var e=t.target.value;this.setState({search:e}),this.emitChangeDebounced?this.emitChangeDebounced(e):this.emitChange(e)},e.prototype.handleKeyDown=function(t){this.props.onKeyDown&&this.props.onKeyDown(t)},e.prototype.handleClearSearch=function(t){t.stopPropagation(),this.setState({search:""}),this.emitChange(""),this.props.clearBricks&&this.props.bricks&&this.props.clearBricks(this.props.bricks),this.inputRef.current&&this.inputRef.current.focus()},e.prototype.brickHandle=function(t){this.props.deleteBrick&&this.props.deleteBrick(t)},e.prototype.emitChange=function(t){this.props.onChange(t)},e.prototype.componentDidUpdate=function(t){var e=this.props.throttle;e&&e>0&&e!==t.throttle?(this.emitChangeDebounced&&this.emitChangeDebounced.cancel(),this.emitChangeDebounced=a()(this.emitChange,e)):e||(this.emitChangeDebounced=null)},e.prototype.componentWillUnmount=function(){this.emitChangeDebounced&&this.emitChangeDebounced.cancel()},e.prototype.renderBricks=function(){var t=this,e=this.props.bricks;return e&&e.length?o.d.createElement("div",{className:"search-input__bricks"},e.map((function(e){return o.d.createElement(b,{key:e.value,brick:e,onDeletePress:t.brickHandle})}))):null},e.prototype.renderClearButton=function(){var t=this.props,e=t.showClearButton,n=t.bricks,r=t.clearButtonTooltip,i=this.state.search;if(e&&(i||n&&n.length)){var a=o.d.createElement(o.f.Button,{className:"search-input__clear-icon-button","aria-label":"Clear input",hmTap:this.handleClearSearch},o.d.createElement(d.a,{href:h.a}));return r?o.d.createElement(l.a,{interactive:!0},o.d.createElement(c.a.Anchor.div,{className:"search-input__clear-icon search-input__button"},a),o.d.createElement(s.a,{placement:"top"},o.d.createElement("span",null,r))):o.d.createElement("div",{className:"search-input__clear-icon search-input__button"},a)}return null},e.prototype.render=function(){var t=this.props,e=t.placeholder,n=t.className,r=t.isFocused,i=t.maxLength,a=t.children,c=t.dataAutoTestId,s=this.state.search;return o.d.createElement("div",{className:"search-input "+(n||"")},o.d.createElement("div",{className:"search-input__icon"},o.d.createElement(d.a,{href:g.a})),o.d.createElement("div",{className:"search-input__input-container"},this.renderBricks(),o.d.createElement("input",{type:"text",className:"search-input__input rtb-input",placeholder:e||"Search",value:s,autoFocus:!!r,maxLength:i,ref:this.inputRef,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,"data-autotest-id":c})),o.d.createElement("div",{className:"search-input__buttons-container"},this.renderClearButton(),a))},e.getDerivedStateFromProps=function(t,e){return e.defaultSearchValue!==t.search?{search:t.search,defaultSearchValue:t.search}:null},Object(r.c)([o.j.autobind],e.prototype,"handleFocus",null),Object(r.c)([o.j.autobind],e.prototype,"handleBlur",null),Object(r.c)([o.j.autobind],e.prototype,"handleChange",null),Object(r.c)([o.j.autobind],e.prototype,"handleKeyDown",null),Object(r.c)([o.j.autobind],e.prototype,"handleClearSearch",null),Object(r.c)([o.j.autobind],e.prototype,"brickHandle",null),e}(o.d.PureComponent);e.a=m;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.onDeletePress=function(){this.props.onDeletePress(this.props.brick)},e.prototype.render=function(){var t=this.props.brick;return o.d.createElement(u.a,{type:"primary",size:"medium",className:"search-input__brick",onDelete:this.onDeletePress},t.key)},Object(r.c)([o.j.autobind],e.prototype,"onDeletePress",null),e}(o.d.PureComponent)},619:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l}));var r="__receiverDescriptionFieldName";function o(t){t[r]||(t[r]={methods:[],nestedReceivers:[]})}function i(t,e){o(t),t[r].methods.push(e)}function a(t){return function(e,n){if(o(e),!t.prototype[r])throw new Error("NestedReceiver does not contain any remote methods");e[r].nestedReceivers.push({key:n,receiver:t.prototype[r]})}}function c(t){return t.prototype[r]}function s(t,e,n,r){n.methods.forEach((function(n){e[n]=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var i=t+"."+n;return r(i,e)}})),n.nestedReceivers.forEach((function(n){e[n.key]={},s(t+"."+n.key,e[n.key],n.receiver,r)}))}function l(t,e){for(var n in t)if(t[n]===e)return n;var o=t[r].nestedReceivers;if(Array.isArray(o))for(var i=0,a=o;i<a.length;i++){var c=a[i],s=l(t[c.key],e);if(s)return c.key+"."+s}}},681:function(t,e){t.exports="#img__search-24"},721:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".search-input {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.search-input:hover .search-input__icon,\n.search-input:focus-within .search-input__icon,\n.search-input .search-input__input:focus + .search-input__icon {\n  color: rgba(69, 91, 237, 1);\n  color: var(--blue800);\n}\n.search-input .search-input__icon {\n  width: 24px;\n  height: 24px;\n}\n.search-input .search-input__icon svg {\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  max-width: 24px;\n  min-height: 24px;\n  max-height: 24px;\n  overflow: hidden;\n  transition-property: color;\n  transition-duration: 500ms;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .search-input .search-input__icon svg {\n    width: auto;\n    height: auto;\n  }\n}\n.search-input .search-input__buttons-container {\n  display: inline-block;\n}\n.search-input .search-input__buttons-container .search-input__button {\n  top: 6px;\n  right: 0;\n  width: 24px;\n  height: 24px;\n  padding: 6px 2px;\n  margin-left: 10px;\n  cursor: pointer;\n  display: inline-block;\n}\n.search-input .search-input__buttons-container .search-input__button svg {\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  max-width: 24px;\n  min-height: 24px;\n  max-height: 24px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .search-input .search-input__buttons-container .search-input__button svg {\n    width: auto;\n    height: auto;\n  }\n}\n.search-input .search-input__clear-icon-button {\n  padding: 0;\n}\n.search-input .search-input__input-container {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  -ms-flex: 0 1 100%;\n      flex: 0 1 100%;\n  margin: 0 14px;\n}\n.search-input .search-input__input-container .search-input__brick {\n  margin-right: 8px;\n  animation: fadein 0.2s ease;\n}\n.search-input .search-input__input {\n  -ms-flex: 0 1 100%;\n      flex: 0 1 100%;\n  width: 100%;\n  padding: 2px 0 4px;\n  font-size: 14px;\n  height: 36px;\n  border-radius: 0;\n  background-origin: border-box;\n  background-size: 0 0;\n  color: rgba(5, 0, 56, 1);\n  color: var(--indigo700);\n  border: none transparent;\n  background: transparent;\n}\n.search-input .search-input__input:-ms-input-placeholder {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n  -ms-user-select: none;\n      user-select: none;\n}\n.search-input .search-input__input::placeholder {\n  color: rgba(95, 92, 128, 1);\n  color: var(--indigo600);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n@keyframes fadein {\n  from {\n    opacity: 0.5;\n  }\n  to {\n    opacity: 1;\n  }\n}\n",""])},786:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"g",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return p}));var r=n(1288);function o(t,e,n){return function(o){return!(!e||"undefined"!==typeof o)||(typeof o===n||r.a.valueHasNotAssignableType(o+":"+typeof o,t+":"+n))}}function i(t,e){return void 0===e&&(e=!1),o(t,e,"number")}function a(t,e){return void 0===e&&(e=!1),o(t,e,"string")}function c(t,e){return void 0===e&&(e=!1),o(t,e,"boolean")}function s(t){return function(e){return"object"===typeof e||r.a.valueHasNotAssignableType(e+":"+typeof e,t+":Style")}}function l(t){return function(e){return"object"===typeof e||r.a.valueHasNotAssignableType(e,t+":object")}}function u(t){return function(e){return!!Array.isArray(e)||r.a.valueHasNotAssignableType(e,t+":Array")}}function d(t,e){return void 0===e&&(e=0),"number"===typeof t?t:e}function p(t){return function(){return!0}}},7941:function(t,e,n){t.exports=n(4112)},7942:function(t,e,n){"use strict";(function(t){var r=n(0),o=n(181),i=n(528),a=n(1058),c=n(27),s=n(3955),l=n(203),u=n(2059),d=n(1168),p=n(1887),h=n(786),f=n(879),g=n(1889),m=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.widgetType=c.G.IMAGE,t.supportedFieldsForWrite={x:Object(h.e)("image.x"),y:Object(h.e)("image.y"),scale:Object(h.e)("image.scale"),rotation:Object(h.e)("image.rotation"),width:Object(h.e)("image.width"),title:Object(h.g)("image.title"),url:Object(h.g)("image.url")},t.requiredFieldsToCreate=["url"],t}return Object(r.d)(n,e),n.prototype.create=function(t){if(void 0===t&&(t={}),Object(g.a)(100),!t.url||!d.a.getInstance().isUrl(t.url))throw new Error("'url' field is required for ImageWidget");return Object(i.a)().uploadResourceFromUrl(t.url).then((function(e){var n={x:t.x||0,y:t.y||0,scale:t.scale||1,rotation:t.rotation||0,info:e,imageTitle:t.title};return o.imageWidgetController.create(n)}))},n.prototype.update=function(e,n){return Object(r.b)(this,void 0,Promise,(function(){var a,c;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,function(){return n.url&&d.a.getInstance().isUrl(n.url)?(Object(g.a)(100),u.c(e),Object(i.a)().uploadResourceFromUrl(n.url).then((function(t){return u.d(),t})).catch((function(n){throw u.b(e),t.log("SdkImageWidgetController","Failed while updating image"),n}))):Promise.resolve(void 0)}()];case 1:return a=r.sent(),c=this.convertSdkToInnerData(n,e),a&&(c.resource={id:a.data.id,boardId:a.data.boardId,generated:a.data.generated,name:a.data.name,width:a.data.meta.width,height:a.data.meta.height},c.image={animated:a.data.meta.animated}),[4,o.imageWidgetController.update(e,c)];case 2:return r.sent(),[2,Promise.resolve(e)]}}))}))},n.prototype.convertInnerToSdkData=function(t){var e=t.resourceComponent,n=Object(a.i)(this,t);return n.x=t.x,n.y=t.y,n.scale=t.scale,n.rotation=t.rotation,n.title=t.title||"",n.url=e.resourceController.getEditLink(),n},n.prototype.convertSdkToInnerData=function(t,e){var n=new s.c;n.transformationData=new l.J,Object(p.a)(n.transformationData,t,e),Object(p.b)(n.transformationData,t),Object(p.c)(n.transformationData,t),"string"===typeof t.title&&(n.titleData=new l.G(t.title.trim()));var o={image:{}};n.animationData&&(o.image=Object(r.a)(Object(r.a)({},o.image),{animated:n.animationData.animated})),n.externalLinkData&&(o.image=Object(r.a)(Object(r.a)({},o.image),{externalLink:n.externalLinkData.externalLink})),n.cropData&&(o.crop={x:n.cropData.x,y:n.cropData.y,width:n.cropData.width,height:n.cropData.height});var i=void 0;n.resourceData&&(i={generated:n.resourceData.generated,name:n.resourceData.name});var a=void 0;n.resourceIdentificationData&&(a={id:n.resourceIdentificationData.resourceId.toString(),boardId:n.resourceIdentificationData.boardId});var c=void 0;return n.resourceSizeData&&(c={width:n.resourceSizeData.width,height:n.resourceSizeData.height}),i&&a&&c&&(o.resource=Object(r.a)(Object(r.a)(Object(r.a)({},i),a),c)),n.titleData&&(o.title=n.titleData.title),n.transformationData&&(n.transformationData.positionData&&(o.position={x:n.transformationData.positionData.x,y:n.transformationData.positionData.y}),n.transformationData.rotationData&&(o.rotation={rotation:n.transformationData.rotationData.rotation}),n.transformationData.scaleData&&(o.scale={scale:n.transformationData.scaleData.scale})),o},n}(f.a);e.a=m}).call(this,n(54))},7943:function(t,e,n){var r=n(7944);"string"===typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(178)(r,o);r.locals&&(t.exports=r.locals)},7944:function(t,e,n){(t.exports=n(177)(!1)).push([t.i,".iframe-modal .md-content iframe {\n  display: block;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  border: 0;\n}\n.iframe-modal .md-content .rtb-material-spinner {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n",""])},7945:function(t,e){t.exports='<rtb-modal-old class="iframe-modal">\n\t\x3c!-- todo \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0443 \u0432\u044b\u043d\u0435\u0441\u0442\u0438 \u044d\u0442\u043e --\x3e\n\t<iframe\n\t\tclass="iframe-extension-point"\n\t\tdata-container-type="modal"\n\t\tng-if="modal.getIFrameURL()"\n\t\tng-show="modal.loaded"\n\t\tng-src="{{ modal.getIFrameURL() }}"\n\t\tng-attr-allow="{{ modal.getIFrameAllow() }}"\n\t\tng-onload="modal.onLoad($event)"\n\t\tscrolling="no"\n\t></iframe>\n\t<material-spinner ng-hide="modal.loaded"></material-spinner>\n</rtb-modal-old>\n'},7946:function(t,e,n){"use strict";var r=n(0),o=n(619),i=n(184),a=n(187),c=n(228),s=n(2947),l=n(195),u=n(3891),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getCurrentAccountPermissions=function(){return Object(s.a)(this.controller.appKey,this.controller.getAccountId()).then((function(t){return t.account.currentUserPermissions}))},e.prototype.getCurrentBoardPermissions=function(){return Promise.resolve(Object(u.a)())},e.prototype.getId=function(){return Promise.resolve(Object(a.a)().userInfo.id)},e.prototype.getScopes=function(){return Object(s.a)(this.controller.appKey,this.controller.getAccountId()).then((function(t){return t.scopes}))},e.prototype.isMemberOfCurrentAccount=function(){if(Object(a.a)().userType!==c.a.REGULAR)throw Error("Account requests not available for guests");return i.a.accounts.selectById(this.controller.getAccountId()).get({fields:"role"}).then((function(t){return t.role===l.g.ADMIN||t.role===l.g.USER}))},e.prototype.isSignedIn=function(){return Promise.resolve(Object(a.a)().userType===c.a.REGULAR)},Object(r.c)([o.d],e.prototype,"getCurrentAccountPermissions",null),Object(r.c)([o.d],e.prototype,"getCurrentBoardPermissions",null),Object(r.c)([o.d],e.prototype,"getId",null),Object(r.c)([o.d],e.prototype,"getScopes",null),Object(r.c)([o.d],e.prototype,"isMemberOfCurrentAccount",null),Object(r.c)([o.d],e.prototype,"isSignedIn",null),e}(n(1161).a);e.a=d},7947:function(t,e,n){var r=n(7948);"string"===typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(178)(r,o);r.locals&&(t.exports=r.locals)},7948:function(t,e,n){var r=n(229);(t.exports=n(177)(!1)).push([t.i,".app-authorization-modal {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.app-authorization-modal iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n.app-authorization-modal .app-authorization-modal__spinner {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n.app-authorization-modal .app-authorization-modal__btn-close {\n  position: absolute;\n  right: -20px;\n  top: -20px;\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  background-image: url("+r(n(1497))+");\n  background-repeat: no-repeat;\n  background-color: rgba(5, 0, 56, 1);\n  background-color: var(--indigo700);\n  background-size: 24px;\n  background-position: 50%;\n  cursor: pointer;\n}\n.app-authorization-modal.app-authorization-modal--loading {\n  width: 100px;\n  height: 100px;\n}\n.app-authorization-modal.app-authorization-modal--loading iframe {\n  visibility: hidden;\n}\n.app-authorization-modal.app-authorization-modal--custom-postinstall-page {\n  width: 800px;\n  height: 600px;\n}\n.app-authorization-modal.app-authorization-modal--custom-postinstall-page iframe {\n  background: white;\n  border-radius: 8px;\n}\n.app-authorization-modal__overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n",""])},879:function(t,e,n){"use strict";var r=n(1288),o=n(1058),i=function(){function t(){this.requiredFieldsToCreate=[]}return t.prototype.create=function(t){throw new Error(r.a.createNotSupported(Object(o.q)(this.widgetType)))},t.prototype.update=function(t,e){throw new Error(r.a.updateNotSupported(Object(o.q)(this.widgetType)))},t.prototype.convertInnerToSdkData=function(t){throw new Error("convertInnerToSdkData not implemented")},t.prototype.convertSdkToInnerData=function(t,e){throw new Error("convertSdkToInnerData not implemented")},t}();e.a=i}}]);
//# sourceMappingURL=https://miro.com/app/static/BoardSdk.6e5d4839f3ad7a24700d.js.map